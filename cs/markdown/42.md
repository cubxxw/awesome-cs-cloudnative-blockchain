+ [author(Github)](https://github.com)
# ç¬¬42èŠ‚ Clash å­¦ä¹ å’Œé…ç½®
+ [å›åˆ°ç›®å½•](../README.md)
+ [å›åˆ°é¡¹ç›®é¦–é¡µ](../../README.md)
+ [ä¸Šä¸€èŠ‚](41.md)
> â¤ï¸ğŸ’•ğŸ’•CSè‡ªå­¦æŒ‡å—,å¤§å­¦æ•™è‚²æ— è®ºæ˜¯æ·±åº¦è¿˜æ˜¯å¹¿åº¦éƒ½æ²¡æœ‰åŠæ³•æ”¯æ’‘æˆ‘ä»¬çš„èŒä¸šç´ å…»,è¿™ä¸ªæ¿å—ç®—æ˜¯è‡ªå·±åœ¨CSå­¦ä¹ ä¸­é¢å¤–è¡¥å……å’Œè®°å½•çš„ã€‚ä¸ªäººåšå®¢:[http://nsddd.top](http://nsddd.top/)
---
[TOC]

## Clash

Go ä¸­åŸºäºè§„åˆ™çš„éš§é“ã€‚

+ [GitHub åœ°å€](https://github.com/Dreamacro/clash)
+ [å­¦ä¹ æ–‡æ¡£](https://lancellc.gitbook.io/clash)

**Release ä¸­æœ‰å„ç§ç±»å‹çš„åŒ…ï¼ˆwindows ã€ Linux ã€ macï¼‰**



## ç‰¹å¾

+ å…·æœ‰èº«ä»½éªŒè¯æ”¯æŒçš„æœ¬åœ° HTTP/HTTPS/SOCKS æœåŠ¡å™¨
+ Shadowsocks(R)ã€VMessã€Trojanã€Snellã€SOCKS5ã€HTTP(S) å‡ºç«™æ”¯æŒ
+ å†…ç½®[å‡ IP](https://www.rfc-editor.org/rfc/rfc3089) DNS æœåŠ¡å™¨ï¼Œæ—¨åœ¨æœ€å¤§é™åº¦åœ°å‡å°‘ DNS æ±¡æŸ“æ”»å‡»çš„å½±å“ã€‚æ”¯æŒ DoH/DoT ä¸Šæ¸¸ã€‚
+ åŸºäºåŸŸã€GEOIPã€IP-CIDR æˆ–è¿›ç¨‹åç§°çš„è§„åˆ™å°†æ•°æ®åŒ…è·¯ç”±åˆ°ä¸åŒçš„ç›®çš„åœ°
+ ä»£ç†ç»„å…è®¸ç”¨æˆ·å®æ–½å¼ºå¤§çš„è§„åˆ™ã€‚æ”¯æŒè‡ªåŠ¨å›é€€ã€è´Ÿè½½å‡è¡¡æˆ–åŸºäºå…³é—­å»¶è¿Ÿè‡ªåŠ¨é€‰æ‹©ä»£ç†
+ è¿œç¨‹æä¾›å•†ï¼Œå…è®¸ç”¨æˆ·è¿œç¨‹è·å–ä»£ç†åˆ—è¡¨è€Œä¸æ˜¯åœ¨é…ç½®ä¸­ç¡¬ç¼–ç 
+ é€æ˜ä»£ç†ï¼šä½¿ç”¨è‡ªåŠ¨è·¯ç”±è¡¨/è§„åˆ™ç®¡ç†é‡å®šå‘ TCP å’Œ TProxy TCP/UDP
+ é€šè¿‡å…¨é¢çš„ HTTP RESTful API æ§åˆ¶å™¨è¿›è¡Œçƒ­é‡è½½



## æ„å»º Clash ä½œä¸ºåº“çš„ Go åº”ç”¨ç¨‹åº

[æ‚¨å¯ä»¥ä»https://github.com/Dreamacro/clash/releases](https://github.com/Dreamacro/clash/releases)è·å– Clash çš„é¢„æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶æˆ–åœ¨æœ¬åœ°æ„å»ºã€‚

Clash éœ€è¦ Golang 1.19 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚

```bash
$ go install github.com/Dreamacro/clash@latest
```

äºŒè¿›åˆ¶æ–‡ä»¶æ„å»ºåœ¨ $GOPATH/bin ä¸‹

```bash
$ clash -v
```



## Clash for Linux

windows ä¸­ `V2ray N`ï¼Œå°è¯•ä¸€äº›æ–°ä¸œè¥¿ï¼ŒClash å¾ˆä¼˜ç§€çš„è½¨é“ï¼Œè€Œä¸”ä¹Ÿæ˜¯ç”¨ Goè¯­è¨€ ç¼–å†™çš„å¼€æºçš„å·¥å…·ï¼Œæ­£åˆæˆ‘æ„ã€‚

+ [riobard/go-shadowsocks2](https://github.com/riobard/go-shadowsocks2)
+ [v2ray/v2ray-core](https://github.com/v2ray/v2ray-core)
+ [WireGuard/wireguard-go](https://github.com/WireGuard/wireguard-go)



### ä¸‹è½½

install:

```bash
wget https://github.com/Dreamacro/clash/releases/download/v1.13.0/clash-linux-amd64-v3-v1.13.0.gz
```

tarï¼š

```bash
gunzip clash-linux-amd64-v3-v1.13.0.gz
mv clash-linux-amd64-v3-v1.13.0.gz clash 
```



mkdir:

```
mkdir Clash
mv clash ./Clash;cd clash
```



è½½clash é…ç½®æ–‡ä»¶config.yaml ï¼ˆæ³¨æ„ï¼šè¿™ä¸ªè®¢é˜…é“¾æ¥æ˜¯è‡ªå·±çš„ï¼Œæ›¿ä»£ [è®¢é˜…é“¾æ¥]ï¼Œå¦‚æœå¤±è´¥äº†è¯´æ˜è®¢é˜…é“¾æ¥æœ‰é—®é¢˜ï¼‰

+ [æˆ‘ä½¿ç”¨çš„æ˜¯ ssru ç»ˆèº«åˆ¶](https://ssru7.pw/user)



ä¸‹è½½Country.mmdbï¼š

> å¯èƒ½å‡ºç°ä¸‹è½½ä¸æˆåŠŸï¼Œftp å°±è¡Œ 

```bash
wget -O Country.mmdb https://www.sub-speeder.com/client-download/Country.mmdb
```



é…ç½®æ–‡ä»¶ç§»åŠ¨åˆ° `.config`:

```bash
mkdir -p ~/.config/clash/
sudo cp /opt/clash/Country.mmdb ~/.config/clash/Country.mmdb
```



å¯åŠ¨clashï¼š

```
chmod +x clash 
./clash -d .
```



### é…ç½®

wget è·å–é…ç½®æ–‡ä»¶ï¼š

```bash
wget -O config.yaml [è®¢é˜…é“¾æ¥(3293172751nss@gmail.com)] 
#ä¸‹è½½è®¢é˜…é“¾æ¥å†…å®¹å¹¶é‡å‘½åä¸ºconfig.yaml
```



ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š

```bash
vim config.yaml #ç¼–è¾‘config.yamlçš„æ–‡ä»¶
```

ä¿®æ”¹å¦‚ä¸‹ï¼š

```bash
#é…ç½®æ–‡ä»¶
#port: 1234 #httpç«¯å£ï¼Œä¸ç”¨åŠ¨
#socks-port: 1235 #socksç«¯å£ï¼Œä¸ç”¨åŠ¨
#allow-lan: true #æ˜¯å¦å…è®¸æ¥è‡ªå±€åŸŸç½‘çš„é“¾æ¥ï¼Œä¸ç”¨åŠ¨
external-controller: '0.0.0.0:0000' #ç”¨äºuiè¿æ¥çš„åœ°å€ï¼Œå†’å·å‰é¢ä¸€å®šè¦æ˜¯0.0.0.0ï¼Œä¸ç„¶æ— æ³•è¿æ¥uiã€‚0000æ”¹ä¸ºè‡ªå·±æƒ³è¦çš„ç«¯å£
secret: 'å¯†é’¥' #è¿æ¥uiç”¨çš„å¯†é’¥ï¼Œè‡ªå·±é…ç½®
#proxies:
#çœç•¥
```



### å¯åŠ¨

æŸ¥çœ‹æ­¤æ—¶çš„æ–‡ä»¶ç»“æ„ï¼š

![image-20230201150201722](http://sm.nsddd.top/sm202302011502183.png)

å¯åŠ¨ï¼š

```bash
./clash -f config.yaml #-fè¡¨ç¤ºä»¥æŒ‡å®šé…ç½®æ–‡ä»¶è¿è¡Œclash
```

> ä½¿ç”¨ctrl+cåœæ­¢clash



### åå°è¿è¡Œ

è¿è¡Œcalshåï¼Œä¸€æ—¦å…³é—­ç»ˆç«¯ä¼šå¯¼è‡´clashä¹Ÿå…³é—­ï¼Œæ‰€ä»¥ä½¿ç”¨nohupå‘½ä»¤åå°è¿è¡Œclash

```bash
nohup ./clash -f config.yaml &
```



#### éªŒè¯ï¼š

æµè§ˆå™¨è®¿é—®ç½‘å€http://clash.razord.top/ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶å¡«å…¥å¯¹åº”ä¿¡æ¯ï¼Œç„¶åé€‰æ‹©èŠ‚ç‚¹ã€‚ç”¨ä¸‹é¢å‘½ä»¤æµ‹è¯•èƒ½å¦ä½¿ç”¨ã€‚

æˆ‘æ˜¯ç”¨çš„æ˜¯ CLI ï¼š

```bash
root@cubmaster01:~/workspces# curl -x http://127.0.0.1:7890 google.com 
{"message":"Unauthorized"}
```

 ç»ˆç«¯æµ‹è¯•èƒ½å¦é€šè¿‡clashè¿æ¥è°·æ­Œã€‚è¿”å›å†…å®¹èƒ½è¯´æ˜æœ‰æ•ˆã€‚å…¶ä¸­7890ä¸ºä½ é…ç½®çš„httpç«¯å£



### åå°å…³é—­

ä½¿ç”¨åå°è¿è¡Œclashåï¼Œå…³é—­clashä½¿ç”¨ä¸‹é¢å‘½ä»¤

```bash
pkill -9 clash #æ€æ­»clashè¿›ç¨‹
```



### è®¾ç½®ç»ˆç«¯ä»£ç†ï¼Œå¹¶ä¸”é…ç½®å˜é‡

ç»ˆç«¯é»˜è®¤æ˜¯ç›´è¿çš„ï¼Œè®¾ç½®ä»£ç†å‘½ä»¤å¦‚ä¸‹

```bash
export http_proxy=http://127.0.0.1:7890 #7890ä¸ºä½ é…ç½®çš„ç«¯å£
export https_proxy=http://127.0.0.1:7890 #7890ä¸ºä½ é…ç½®çš„ç«¯å£
```



### å–æ¶ˆç»ˆç«¯ä»£ç†

```bash
unset http_proxy
unset https_proxy
```



### å¿«æ·æ–¹å¼-ç¯å¢ƒå˜é‡

æœ¬æ¬¡ç»ˆç«¯è®¾ç½®ä»£ç†åï¼Œä¸‹æ¬¡æ‰“å¼€ç»ˆç«¯ä¾æ—§éœ€è¦é‡æ–°è®¾ç½®ï¼Œæ¯æ¬¡è¾“å…¥å¤ªéº»çƒ¦ï¼Œç›´æ¥æ·»åŠ å˜é‡è§£å†³

```bash
sudo vim ~/.bashrc #ç¼–è¾‘bashrcæ–‡ä»¶
```

åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼Œå…¶ä¸­7890ä¸ºä½ è®¾ç½®çš„ç«¯å£ã€‚â€œproxyâ€å’Œâ€œunproxyâ€ä¸ºä½ å–œæ¬¢çš„å˜é‡åå­—ï¼Œä¸€ä¸ªç”¨äºå¼€å¯ä»£ç†ï¼Œä¸€ä¸ªç”¨äºå…³é—­

```bash
alias proxy="export http_proxy=http://127.0.0.1:7890;export https_proxy=http://127.0.0.1:7890"
alias unproxy="unset http_proxy;unset https_proxy"
```

åˆ·æ–°ï¼š

```
source ~/.bashrc #æ³¨æ„ä¸ç¼–è¯‘æ— æ³•ç”Ÿæ•ˆ
```

> æˆ‘ä¸€èˆ¬æ”¾åœ¨ `/etc/profile.d/mypath.sh` æ–‡ä»¶ä¸­



ä»¥åç»ˆç«¯ä»£ç†ç›´æ¥ç»ˆç«¯è¾“å…¥`proxyCopy`å³å¯ã€‚å–æ¶ˆç”¨`unproxyCopy`ã€‚æŸ¥çœ‹ç»ˆç«¯ä»£ç†çŠ¶æ€ï¼š

```bash
[root@dev workspces]# env | grep -i proxy
https_proxy=http://127.0.0.1:7890
http_proxy=http://127.0.0.1:7890
```



### ä½¿ç”¨å˜é‡å¯åŠ¨clash

ä¸Šé¢çš„ç»ˆç«¯ä»£ç†å¯ä»¥ç”¨å˜é‡å¿«é€Ÿè¿›è¡Œï¼ŒåŒç†clashä¹Ÿå¯ä»¥å¿«é€Ÿå¯åŠ¨ã€‚ä¸è¿‡ä¸Šé¢çš„å‘½ä»¤æ˜¯åœ¨ `/opt/vpn/Clash`ç›®å½•ä¸‹ä¸”è¯¥ç›®å½•æœ‰é…ç½®æ–‡ä»¶æ‰èƒ½æ­£ç¡®æ‰§è¡Œï¼Œæ‰€ä»¥å˜é‡çš„å‘½ä»¤éœ€è¦å°†è·¯å¾„éƒ½å†™ä¸ºç»å¯¹è·¯å¾„ã€‚

åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢çš„å†…å®¹ã€‚â€œclashâ€å’Œâ€œunclashâ€ä¸ºä½ å–œæ¬¢çš„å˜é‡åå­—ï¼Œä¸€ä¸ªç”¨äºå¼€å¯clashï¼Œä¸€ä¸ªç”¨äºå…³é—­

åé¢çš„æ„æ€æ˜¯å°†è¾“å‡ºæ–‡ä»¶å†™å…¥åˆ°/dev/nullä¸‹ï¼Œè¿™ä¸ªç›®å½•ä¼šä¸¢å¼ƒæ‰€æœ‰å†™å…¥æ•°æ®ï¼Œå°±æ˜¯åƒåœ¾ç«™ï¼Œè€Œæ•°å­—æ˜¯linuxçš„é‡å®šå‘ï¼Œé‡Œé¢çš„æ•°å­—å«ä¹‰å¦‚ä¸‹æ‰€ç¤º

+ 1ï¼šæ ‡å‡†è¾“å‡º,åœ¨ä¸€èˆ¬ä½¿ç”¨æ—¶ï¼Œé»˜è®¤çš„æ˜¯æ ‡å‡†è¾“å‡ºï¼›
+ 2ï¼šè¡¨ç¤ºé”™è¯¯ä¿¡æ¯è¾“å‡ºã€‚

è¿™é‡Œæ•´å¥è¯å«ä¹‰æ˜¯å°†é”™è¯¯ä¿¡æ¯é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºï¼Œå…¶ä»–ä¿¡æ¯ä¸¢è¿› `/dev/null`

```bash
alias 'clash'='nohup /opt/vpn/Clash/clash -f /opt/vpn/Clash/config.yaml -d /opt/vpn/Clash/ > /dev/null 2>&1 &'   
alias 'unclash'='pkill -9 clash'
```

åˆ·æ–°ï¼š

```bash
source ~/.bashrc #æ³¨æ„ä¸ç¼–è¯‘æ— æ³•ç”Ÿæ•ˆ
```

æ­¤æ—¶å°±å¯ç”¨`clashCopy`å’Œ`unclashCopy`å‘½ä»¤æ¥å¯åŠ¨å’Œå…³é—­clashï¼Œé€šè¿‡å‘½ä»¤`ps -ef | grep clashCopy`æ¥åˆ¤æ–­clashæ˜¯å¦è¿è¡Œï¼Œæµ‹è¯•ä¸€ä¸‹

```bash
[root@dev workspces]# unclash 
[root@dev workspces]# curl -x http://127.0.0.1:7890 google.com 
curl: (7) Failed to connect to 127.0.0.1 port 7890: Connection refused
[2]+  Killed                  nohup /opt/vpn/Clash/clash -f /opt/vpn/Clash/config.yaml -d /opt/vpn/Clash/ > /dev/null 2>&1
[root@dev workspces]# clash 
[1] 99148
[root@dev workspces]# curl -x http://127.0.0.1:7890 google.com 
<HTML><HEAD><meta http-equiv="content-type" content="text/html;charset=utf-8">
<TITLE>301 Moved</TITLE></HEAD><BODY>
<H1>301 Moved</H1>
The document has moved
<A HREF="http://www.google.com/">here</A>.
</BODY></HTML>
```

çŠ¶æ€ï¼›

```bash
[root@dev workspces]# ps -ef | grep clash #åˆ¤æ–­clashçŠ¶æ€
root       99148   97461  0 07:21 pts/8    00:00:00 /opt/vpn/Clash/clash -f /opt/vpn/Clash/config.yaml -d /opt/vpn/Clash/
root       99170   97461  0 07:21 pts/8    00:00:00 grep --color=auto clash
```

> å®Œæˆäº†ï¼Œæˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹ Google ï¼š

```bash
[root@dev workspces]# nmap -p google.com
Starting Nmap 7.80 ( https://nmap.org ) at 2023-02-01 07:25 UTC
Found no matches for the service mask 'google.com' and your specified protocols
QUITTING!

[root@dev workspces]# nmap -p 7890 google.com
Starting Nmap 7.80 ( https://nmap.org ) at 2023-02-01 07:25 UTC
Nmap scan report for google.com (142.251.42.238)
Host is up (0.00061s latency).
rDNS record for 142.251.42.238: tsa01s11-in-f14.1e100.net

PORT     STATE    SERVICE
7890/tcp filtered unknown

Nmap done: 1 IP address (1 host up) scanned in 0.43 seconds
```



## Clash é…ç½®è¯­æ³•

Clash ä½¿ç”¨[YAML](https://yaml.org/)ï¼Œ*YAML Ain't Markup Language*ï¼Œä½œä¸ºé…ç½®æ–‡ä»¶ã€‚YAML è¢«è®¾è®¡ä¸ºæ˜“äºè®¡ç®—æœºé˜…è¯»ã€ç¼–å†™å’Œè§£é‡Šï¼Œé€šå¸¸ç”¨äºç²¾ç¡®çš„é…ç½®æ–‡ä»¶ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç» Clash çš„å¸¸è§åŠŸèƒ½ä»¥åŠå¦‚ä½•ä½¿ç”¨å’Œé…ç½®å®ƒä»¬ã€‚

Clashçš„å·¥ä½œåŸç†æ˜¯åœ¨æœ¬ç«¯å¼€å¯HTTPã€SOCKS5æˆ–é€æ˜ä»£ç†æœåŠ¡å™¨ã€‚å½“è¯·æ±‚æˆ–æ•°æ®åŒ…ä¼ å…¥æ—¶ï¼ŒClashä½¿ç”¨ VMessã€Shadowsocksã€Snellã€Trojanã€SOCKS5 æˆ– HTTP åè®®å°†æ•°æ®åŒ…*è·¯ç”±*åˆ°ä¸åŒçš„è¿œç¨‹æœåŠ¡å™¨ï¼ˆâ€œèŠ‚ç‚¹â€ï¼‰ã€‚

```yaml
# Port of HTTP(S) proxy server on the local end
port: 7890

# Port of SOCKS5 proxy server on the local end
socks-port: 7891

# Transparent proxy server port for Linux and macOS (Redirect TCP and TProxy UDP)
# redir-port: 7892

# Transparent proxy server port for Linux (TProxy TCP and TProxy UDP)
# tproxy-port: 7893

# HTTP(S) and SOCKS4(A)/SOCKS5 server on the same port
# mixed-port: 7890

# authentication of local SOCKS5/HTTP(S) server
# authentication:
#  - "user1:pass1"
#  - "user2:pass2"

# Set to true to allow connections to the local-end server from
# other LAN IP addresses
allow-lan: false

# This is only applicable when `allow-lan` is `true`
# '*': bind all IP addresses
# 192.168.122.11: bind a single IPv4 address
# "[aaaa::a8aa:ff:fe09:57d8]": bind a single IPv6 address
bind-address: '*'

# Clash router working mode
# rule: rule-based packet routing
# global: all packets will be forwarded to a single endpoint
# direct: directly forward the packets to the Internet
mode: rule

# Clash by default prints logs to STDOUT
# info / warning / error / debug / silent
log-level: info

# When set to false, resolver won't translate hostnames to IPv6 addresses
ipv6: false

# RESTful web API listening address
external-controller: 127.0.0.1:9090

# A relative path to the configuration directory or an absolute path to a
# directory in which you put some static web resource. Clash core will then
# serve it at `http://{{external-controller}}/ui`.
external-ui: folder

# Secret for the RESTful API (optional)
# Authenticate by spedifying HTTP header `Authorization: Bearer ${secret}`
# ALWAYS set a secret if RESTful API is listening on 0.0.0.0
# secret: ""

# Outbound interface name
interface-name: en0

# fwmark on Linux only
routing-mark: 6666

# Static hosts for DNS server and connection establishment (like /etc/hosts)
#
# Wildcard hostnames are supported (e.g. *.clash.dev, *.foo.*.example.com)
# Non-wildcard domain names have a higher priority than wildcard domain names
# e.g. foo.example.com > *.example.com > .example.com
# P.S. +.foo.com equals to .foo.com and foo.com
hosts:
  # '*.clash.dev': 127.0.0.1
  # '.dev': 127.0.0.1
  # 'alpha.clash.dev': '::1'

profile:
  # Store the `select` results in $HOME/.config/clash/.cache
  # set false If you don't want this behavior
  # when two different configurations have groups with the same name, the selected values are shared
  store-selected: false

  # persistence fakeip
  store-fake-ip: true

# DNS server settings
# This section is optional. When not present, the DNS server will be disabled.
dns:
  enable: false
  listen: 0.0.0.0:53
  # ipv6: false # when the false, response to AAAA questions will be empty

  # These nameservers are used to resolve the DNS nameserver hostnames below.
  # Specify IP addresses only
  default-nameserver:
    - 114.114.114.114
    - 8.8.8.8
  enhanced-mode: fake-ip # or redir-host (not recommended)
  fake-ip-range: 198.18.0.1/16 # Fake IP addresses pool CIDR
  # use-hosts: true # lookup hosts and return IP record
  
  # Hostnames in this list will not be resolved with fake IPs
  # i.e. questions to these domain names will always be answered with their
  # real IP addresses
  # fake-ip-filter:
  #   - '*.lan'
  #   - localhost.ptlogin2.qq.com
  
  # Supports UDP, TCP, DoT, DoH. You can specify the port to connect to.
  # All DNS questions are sent directly to the nameserver, without proxies
  # involved. Clash answers the DNS question with the first result gathered.
  nameserver:
    - 114.114.114.114 # default value
    - 8.8.8.8 # default value
    - tls://dns.rubyfish.cn:853 # DNS over TLS
    - https://1.1.1.1/dns-query # DNS over HTTPS
    - dhcp://en0 # dns from dhcp
    # - '8.8.8.8#en0'

  # When `fallback` is present, the DNS server will send concurrent requests
  # to the servers in this section along with servers in `nameservers`.
  # The answers from fallback servers are used when the GEOIP country
  # is not `CN`.
  # fallback:
  #   - tcp://1.1.1.1
  #   - 'tcp://1.1.1.1#en0'

  # If IP addresses resolved with servers in `nameservers` are in the specified
  # subnets below, they are considered invalid and results from `fallback`
  # servers are used instead.
  #
  # IP address resolved with servers in `nameserver` is used when
  # `fallback-filter.geoip` is true and when GEOIP of the IP address is `CN`.
  #
  # If `fallback-filter.geoip` is false, results from `nameserver` nameservers
  # are always used if not match `fallback-filter.ipcidr`.
  #
  # This is a countermeasure against DNS pollution attacks.
  # fallback-filter:
  #   geoip: true
  #   geoip-code: CN
  #   ipcidr:
  #     - 240.0.0.0/4
  #   domain:
  #     - '+.google.com'
  #     - '+.facebook.com'
  #     - '+.youtube.com'
  
  # Lookup domains via specific nameservers
  # nameserver-policy:
  #   'www.baidu.com': '114.114.114.114'
  #   '+.internal.crop.com': '10.0.0.1'

proxies:
  # Shadowsocks
  # The supported ciphers (encryption methods):
  #   aes-128-gcm aes-192-gcm aes-256-gcm
  #   aes-128-cfb aes-192-cfb aes-256-cfb
  #   aes-128-ctr aes-192-ctr aes-256-ctr
  #   rc4-md5 chacha20-ietf xchacha20
  #   chacha20-ietf-poly1305 xchacha20-ietf-poly1305
  - name: "ss1"
    type: ss
    server: server
    port: 443
    cipher: chacha20-ietf-poly1305
    password: "password"
    # udp: true

  - name: "ss2"
    type: ss
    server: server
    port: 443
    cipher: chacha20-ietf-poly1305
    password: "password"
    plugin: obfs
    plugin-opts:
      mode: tls # or http
      # host: bing.com

  - name: "ss3"
    type: ss
    server: server
    port: 443
    cipher: chacha20-ietf-poly1305
    password: "password"
    plugin: v2ray-plugin
    plugin-opts:
      mode: websocket # no QUIC now
      # tls: true # wss
      # skip-cert-verify: true
      # host: bing.com
      # path: "/"
      # mux: true
      # headers:
      #   custom: value

  # vmess
  # cipher support auto/aes-128-gcm/chacha20-poly1305/none
  - name: "vmess"
    type: vmess
    server: server
    port: 443
    uuid: uuid
    alterId: 32
    cipher: auto
    # udp: true
    # tls: true
    # skip-cert-verify: true
    # servername: example.com # priority over wss host
    # network: ws
    # ws-opts:
    #   path: /path
    #   headers:
    #     Host: v2ray.com
    #   max-early-data: 2048
    #   early-data-header-name: Sec-WebSocket-Protocol

  - name: "vmess-h2"
    type: vmess
    server: server
    port: 443
    uuid: uuid
    alterId: 32
    cipher: auto
    network: h2
    tls: true
    h2-opts:
      host:
        - http.example.com
        - http-alt.example.com
      path: /
  
  - name: "vmess-http"
    type: vmess
    server: server
    port: 443
    uuid: uuid
    alterId: 32
    cipher: auto
    # udp: true
    # network: http
    # http-opts:
    #   # method: "GET"
    #   # path:
    #   #   - '/'
    #   #   - '/video'
    #   # headers:
    #   #   Connection:
    #   #     - keep-alive

  - name: vmess-grpc
    server: server
    port: 443
    type: vmess
    uuid: uuid
    alterId: 32
    cipher: auto
    network: grpc
    tls: true
    servername: example.com
    # skip-cert-verify: true
    grpc-opts:
      grpc-service-name: "example"

  # socks5
  - name: "socks"
    type: socks5
    server: server
    port: 443
    # username: username
    # password: password
    # tls: true
    # skip-cert-verify: true
    # udp: true

  # http
  - name: "http"
    type: http
    server: server
    port: 443
    # username: username
    # password: password
    # tls: true # https
    # skip-cert-verify: true
    # sni: custom.com

  # Snell
  # Beware that there's currently no UDP support yet
  - name: "snell"
    type: snell
    server: server
    port: 44046
    psk: yourpsk
    # version: 2
    # obfs-opts:
      # mode: http # or tls
      # host: bing.com

  # Trojan
  - name: "trojan"
    type: trojan
    server: server
    port: 443
    password: yourpsk
    # udp: true
    # sni: example.com # aka server name
    # alpn:
    #   - h2
    #   - http/1.1
    # skip-cert-verify: true

  - name: trojan-grpc
    server: server
    port: 443
    type: trojan
    password: "example"
    network: grpc
    sni: example.com
    # skip-cert-verify: true
    udp: true
    grpc-opts:
      grpc-service-name: "example"

  - name: trojan-ws
    server: server
    port: 443
    type: trojan
    password: "example"
    network: ws
    sni: example.com
    # skip-cert-verify: true
    udp: true
    # ws-opts:
      # path: /path
      # headers:
      #   Host: example.com

  # ShadowsocksR
  # The supported ciphers (encryption methods): all stream ciphers in ss
  # The supported obfses:
  #   plain http_simple http_post
  #   random_head tls1.2_ticket_auth tls1.2_ticket_fastauth
  # The supported supported protocols:
  #   origin auth_sha1_v4 auth_aes128_md5
  #   auth_aes128_sha1 auth_chain_a auth_chain_b  
  - name: "ssr"
    type: ssr
    server: server
    port: 443
    cipher: chacha20-ietf
    password: "password"
    obfs: tls1.2_ticket_auth
    protocol: auth_sha1_v4
    # obfs-param: domain.tld
    # protocol-param: "#"
    # udp: true

proxy-groups:
  # relay chains the proxies. proxies shall not contain a relay. No UDP support.
  # Traffic: clash <-> http <-> vmess <-> ss1 <-> ss2 <-> Internet
  - name: "relay"
    type: relay
    proxies:
      - http
      - vmess
      - ss1
      - ss2

  # url-test select which proxy will be used by benchmarking speed to a URL.
  - name: "auto"
    type: url-test
    proxies:
      - ss1
      - ss2
      - vmess1
    # tolerance: 150
    # lazy: true
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  # fallback selects an available policy by priority. The availability is tested by accessing an URL, just like an auto url-test group.
  - name: "fallback-auto"
    type: fallback
    proxies:
      - ss1
      - ss2
      - vmess1
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  # load-balance: The request of the same eTLD+1 will be dial to the same proxy.
  - name: "load-balance"
    type: load-balance
    proxies:
      - ss1
      - ss2
      - vmess1
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    # strategy: consistent-hashing # or round-robin

  # select is used for selecting proxy or proxy group
  # you can use RESTful API to switch proxy is recommended for use in GUI.
  - name: Proxy
    type: select
    # disable-udp: true
    proxies:
      - ss1
      - ss2
      - vmess1
      - auto
 
  # direct to another infacename or fwmark, also supported on proxy
  - name: en1
    type: select
    interface-name: en1
    routing-mark: 6667
    proxies:
      - DIRECT 

  - name: UseProvider
    type: select
    use:
      - provider1
    proxies:
      - Proxy
      - DIRECT

proxy-providers:
  provider1:
    type: http
    url: "url"
    interval: 3600
    path: ./provider1.yaml
    health-check:
      enable: true
      interval: 600
      # lazy: true
      url: http://www.gstatic.com/generate_204
  test:
    type: file
    path: /test.yaml
    health-check:
      enable: true
      interval: 36000
      url: http://www.gstatic.com/generate_204

tunnels:
  # one line config
  - tcp/udp,127.0.0.1:6553,114.114.114.114:53,proxy
  - tcp,127.0.0.1:6666,rds.mysql.com:3306,vpn
  # full yaml config
  - network: [tcp, udp]
    address: 127.0.0.1:7777
    target: target.com
    proxy: proxy

rules:
  - DOMAIN-SUFFIX,google.com,auto
  - DOMAIN-KEYWORD,google,auto
  - DOMAIN,google.com,auto
  - DOMAIN-SUFFIX,ad.com,REJECT
  - SRC-IP-CIDR,192.168.1.201/32,DIRECT
  # optional param "no-resolve" for IP rules (GEOIP, IP-CIDR, IP-CIDR6)
  - IP-CIDR,127.0.0.0/8,DIRECT
  - GEOIP,CN,DIRECT
  - DST-PORT,80,DIRECT
  - SRC-PORT,7777,DIRECT
  - RULE-SET,apple,REJECT # Premium only
  - MATCH,auto
```



### æŒ‡å®šé…ç½®ç›®å½•

å¦‚æœæ²¡æœ‰å¦å¤–æŒ‡å®šï¼ŒClash é»˜è®¤è¯»å–ä½äº`$HOME/.config/clash/config.yaml`. å¦‚æœä¸å­˜åœ¨ï¼ŒClash å°†ç”Ÿæˆé»˜è®¤è®¾ç½®ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œé€‰é¡¹`-d`æŒ‡å®šé…ç½®ç›®å½•ï¼š

```bash
$ clash -d . # current directory
$ clash -d /etc/clash
```

æ‚¨å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œé€‰é¡¹`-f`æ¥æŒ‡å®šé…ç½®ï¼š

```bash
$ clash -f ./config.yaml # current directory
$ clash -f /etc/clash/config.yaml
```



## END é“¾æ¥

+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](41.md)
+ [ä¸‹ä¸€èŠ‚](43.md)



### å‚è€ƒ

+ [https://github.com/Dreamacro/clash/wiki/configuration](https://github.com/Dreamacro/clash/wiki/configuration)
+ [https://lancellc.gitbook.io/clash/clash-config-file/syntax](https://lancellc.gitbook.io/clash/clash-config-file/syntax)
+ [https://nekocat.top/clash/](https://nekocat.top/clash/)
+ [https://github.com/Dreamacro/clash/wiki](https://github.com/Dreamacro/clash/wiki)
+ https://zhuanlan.zhihu.com/p/598337110
+ [https://kotnt.com/tutorial](https://kotnt.com/tutorial)

**è´¡çŒ®ï¼š**

+ [å‚ä¸è´¡çŒ®â¤ï¸ğŸ’•ğŸ’•](https://github.com/3293172751/Block_Chain/blob/master/Git/git-contributor.md)