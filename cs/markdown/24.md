+ [author(Github)](https://github.com)

# ç¬¬24èŠ‚ dockeræ­å»ºcloudreve

+ [å›åˆ°ç›®å½•](../README.md)
+ [å›åˆ°é¡¹ç›®é¦–é¡µ](../../README.md)
+ [ä¸Šä¸€èŠ‚](23.md)
> â¤ï¸ğŸ’•ğŸ’•CSè‡ªå­¦æŒ‡å—,å¤§å­¦æ•™è‚²æ— è®ºæ˜¯æ·±åº¦è¿˜æ˜¯å¹¿åº¦éƒ½æ²¡æœ‰åŠæ³•æ”¯æ’‘æˆ‘ä»¬çš„èŒä¸šç´ å…»,è¿™ä¸ªæ¿å—ç®—æ˜¯è‡ªå·±åœ¨CSå­¦ä¹ ä¸­é¢å¤–è¡¥å……å’Œè®°å½•çš„ã€‚ä¸ªäººåšå®¢:[http://nsddd.top](http://nsddd.top/)
---
[toc]

<h4 align="center">æ”¯æŒå¤šå®¶äº‘å­˜å‚¨é©±åŠ¨çš„å…¬æœ‰äº‘æ–‡ä»¶ç³»ç»Ÿ.</h4>

<p align="center">
  <a href="https://github.com/cloudreve/Cloudreve/actions/workflows/test.yml">
    <img src="https://img.shields.io/github/workflow/status/cloudreve/Cloudreve/Test?style=flat-square"
         alt="GitHub Test Workflow">
  </a>
  <a href="https://codecov.io/gh/cloudreve/Cloudreve"><img src="https://img.shields.io/codecov/c/github/cloudreve/Cloudreve?style=flat-square"></a>
  <a href="https://goreportcard.com/report/github.com/cloudreve/Cloudreve">
      <img src="https://goreportcard.com/badge/github.com/cloudreve/Cloudreve?style=flat-square">
  </a>
  <a href="https://github.com/cloudreve/Cloudreve/releases">
    <img src="https://img.shields.io/github/v/release/cloudreve/Cloudreve?include_prereleases&style=flat-square" />
  </a>
  <a href="https://hub.docker.com/r/cloudreve/cloudreve">
     <img src="https://img.shields.io/docker/image-size/cloudreve/cloudreve?style=flat-square"/>
  </a>
</p>


<p align="center">
  <a href="https://demo.cloudreve.org">æ¼”ç¤ºç«™</a> â€¢
  <a href="https://forum.cloudreve.org/">è®¨è®ºç¤¾åŒº</a> â€¢
  <a href="https://docs.cloudreve.org/">æ–‡æ¡£</a> â€¢
  <a href="https://github.com/cloudreve/Cloudreve/releases">ä¸‹è½½</a> â€¢
  <a href="https://t.me/cloudreve_official">Telegram ç¾¤ç»„</a> â€¢
  <a href="#scroll-è®¸å¯è¯">è®¸å¯è¯</a>
</p>


![image-20220905202727987](http://sm.nsddd.top/smimage-20220905202727987.png?xxw@nsddd.top)

## :sparkles: ç‰¹æ€§

* :cloud: æ”¯æŒæœ¬æœºã€ä»æœºã€ä¸ƒç‰›ã€é˜¿é‡Œäº‘ OSSã€è…¾è®¯äº‘ COSã€åˆæ‹äº‘ã€OneDrive (åŒ…æ‹¬ä¸–çºªäº’è”ç‰ˆ) ä½œä¸ºå­˜å‚¨ç«¯
* :outbox_tray: ä¸Šä¼ /ä¸‹è½½ æ”¯æŒå®¢æˆ·ç«¯ç›´ä¼ ï¼Œæ”¯æŒä¸‹è½½é™é€Ÿ
* ğŸ’¾ å¯å¯¹æ¥ Aria2 ç¦»çº¿ä¸‹è½½ï¼Œå¯ä½¿ç”¨å¤šä¸ªä»æœºèŠ‚ç‚¹åˆ†æ‹…ä¸‹è½½ä»»åŠ¡
* ğŸ“š åœ¨çº¿ å‹ç¼©/è§£å‹ç¼©ã€å¤šæ–‡ä»¶æ‰“åŒ…ä¸‹è½½
* ğŸ’» è¦†ç›–å…¨éƒ¨å­˜å‚¨ç­–ç•¥çš„ WebDAV åè®®æ”¯æŒ
* :zap: æ‹–æ‹½ä¸Šä¼ ã€ç›®å½•ä¸Šä¼ ã€æµå¼ä¸Šä¼ å¤„ç†
* :card_file_box: æ–‡ä»¶æ‹–æ‹½ç®¡ç†
* :family_woman_girl_boy:   å¤šç”¨æˆ·ã€ç”¨æˆ·ç»„
* :link: åˆ›å»ºæ–‡ä»¶ã€ç›®å½•çš„åˆ†äº«é“¾æ¥ï¼Œå¯è®¾å®šè‡ªåŠ¨è¿‡æœŸ
* :eye_speech_bubble: è§†é¢‘ã€å›¾åƒã€éŸ³é¢‘ã€æ–‡æœ¬ã€Office æ–‡æ¡£åœ¨çº¿é¢„è§ˆ
* :art: è‡ªå®šä¹‰é…è‰²ã€é»‘æš—æ¨¡å¼ã€PWA åº”ç”¨ã€å…¨ç«™å•é¡µåº”ç”¨
* :rocket: All-In-One æ‰“åŒ…ï¼Œå¼€ç®±å³ç”¨
* ğŸŒˆ ... ...



## Cloudreve æ˜¯ä»€ä¹ˆï¼Ÿ

Cloudreve å¯ä»¥è®©æ‚¨å¿«é€Ÿæ­å»ºèµ·å…¬ç§å…¼å¤‡çš„ç½‘ç›˜ç³»ç»Ÿã€‚Cloudreve åœ¨åº•å±‚æ”¯æŒä¸åŒçš„äº‘å­˜å‚¨å¹³å°ï¼Œç”¨æˆ·åœ¨å®é™…ä½¿ç”¨æ—¶æ— é¡»å…³å¿ƒç‰©ç†å­˜å‚¨æ–¹å¼ã€‚ä½ å¯ä»¥ä½¿ç”¨ Cloudreve æ­å»ºä¸ªäººç”¨ç½‘ç›˜ã€æ–‡ä»¶åˆ†äº«ç³»ç»Ÿï¼Œäº¦æˆ–æ˜¯é’ˆå¯¹å¤§å°å›¢ä½“çš„å…¬æœ‰äº‘ç³»ç»Ÿã€‚



## dockerå®‰è£…

+ [x] [dockeræ•™ç¨‹](https://github.com/3293172751/Block_Chain/blob/master/docker/10.md)

> ä½¿ç”¨ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çŸ¥é“ docker çš„å·¥ä½œæœºåˆ¶ï¼Œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸Šè¿°éƒ¨ç½²æµç¨‹å·²ç»èƒ½å¤Ÿè¦†ç›–ç»å¤§å¤šæ•°ä½¿ç”¨åœºæ™¯ã€‚

æˆ‘ä»¬æä¾›å®˜æ–¹çš„ docker imageï¼Œæ”¯æŒä¸‰ç§æ¶æ„ `armv7`, `arm64` ä»¥åŠ `amd64`, ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éƒ¨ç½²

### åˆ›å»ºç›®å½•ç»“æ„

è¯·**ç¡®ä¿**è¿è¡Œä¹‹å‰ï¼š

> 1. æ‰‹åŠ¨åˆ›å»º `conf.ini` ç©ºæ–‡ä»¶æˆ–è€…ç¬¦åˆ Cloudreve é…ç½®æ–‡ä»¶è§„èŒƒçš„ `conf.ini`, å¹¶å°† `<path_to_your_config> `æ›¿æ¢ä¸ºè¯¥è·¯å¾„
> 2. æ‰‹åŠ¨åˆ›å»º `cloudreve.db` ç©ºæ–‡ä»¶, å¹¶å°† `<path_to_your_db> `æ›¿æ¢ä¸ºè¯¥è·¯å¾„
> 3. æ‰‹åŠ¨åˆ›å»º `uploads` æ–‡ä»¶å¤¹, å¹¶å°† `<path_to_your_uploads>` æ›¿æ¢ä¸ºè¯¥è·¯å¾„
> 4. æ‰‹åŠ¨åˆ›å»º `avatar` æ–‡ä»¶å¤¹ï¼Œå¹¶å°† `<path_to_your_avatar>` æ›¿æ¢ä¸ºè¯¥è·¯å¾„

æˆ–è€…ï¼Œç›´æ¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºï¼š

```bash
mkdir -vp cloudreve/{uploads,avatar} \
&& touch cloudreve/conf.ini \
&& touch cloudreve/cloudreve.db
```



### è¿è¡Œ

ç„¶åï¼Œè¿è¡Œ docker containerï¼š

```dockerfile
docker run -d \
-p 5212:5212 \
--mount type=bind,source=<path_to_your_config>,target=/cloudreve/conf.ini \
--mount type=bind,source=<path_to_your_db>,target=/cloudreve/cloudreve.db \
-v <path_to_your_uploads>:/cloudreve/uploads \
-v <path_to_your_avatar>:/cloudreve/avatar \
cloudreve/cloudreve:latest
```

> æˆ‘åˆ›å»ºçš„æ–‡ä»¶
>
> ```bash
> docker run -d \
> -p 5212:5212 \
> --mount type=bind,source=/cloudreve/cloudreve/conf.ini,target=/cloudreve/conf.ini \
> --mount type=bind,source=/cloudreve/cloudreve/cloudreve.db,target=/cloudreve/cloudreve.db \
> -v /cloudreve/cloudreve/uploads:/cloudreve/uploads \
> -v /cloudreve/cloudreve/avatar:/cloudreve/avatar \
> cloudreve/cloudreve:latest
> ```

> éœ€è¦æ³¨æ„çš„æ˜¯ï¼š`-d`æ˜¯åå°è¿è¡Œï¼Œæ²¡æœ‰æ˜¾ç¤ºä¸€äº›è´¦æˆ·ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦ç”¨`docker logs`æ¥æŸ¥çœ‹è´¦æˆ·ç™»å½•åå’Œå¯†ç ä¿¡æ¯:
>
> ```
> docker logs 
> ```

![image-20221029232707097](http://sm.nsddd.top/smimage-20221029232707097.png)



## Docker Compose

é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æä¾› `docker compose` éƒ¨ç½²ï¼Œå¹¶ä¸”æ•´åˆäº†ç¦»çº¿ä¸‹è½½æœåŠ¡ åœ¨æ­¤ä¹‹å‰ï¼Œéœ€è¦åˆ›å»º `data` ç›®å½•ä½œä¸ºç¦»çº¿ä¸‹è½½ä¸´æ—¶ä¸­è½¬ç›®å½•

### åˆ›å»ºç›®å½•ç»“æ„

```bash
mkdir -vp cloudreve/{uploads,avatar} \
&& touch cloudreve/conf.ini \
&& touch cloudreve/cloudreve.db \
&& mkdir -p aria2/config \
&& mkdir -p data/aria2 \
&& chmod -R 777 data/aria2
```



### è¿è¡Œ

ç„¶åå°†ä»¥ä¸‹æ–‡ä»¶ä¿å­˜ä¸º `docker-compose.yml`ï¼Œæ”¾ç½®äºå½“å‰ç›®å½•ï¼Œä¸ cloudreve åŒä¸€å±‚çº§ï¼ŒåŒæ—¶ï¼Œä¿®æ”¹æ–‡ä»¶ä¸­çš„ `RPC_SECRET`

> éšä¾¿æ”¹ä¸€ä¸‹å°±å¥½äº†

```
version: "3.8"
services:
  cloudreve:
    container_name: cloudreve
    image: cloudreve/cloudreve:latest
    restart: unless-stopped
    ports:
      - "5212:5212"
    volumes:
      - temp_data:/data
      - ./cloudreve/uploads:/cloudreve/uploads
      - ./cloudreve/conf.ini:/cloudreve/conf.ini
      - ./cloudreve/cloudreve.db:/cloudreve/cloudreve.db
      - ./cloudreve/avatar:/cloudreve/avatar
    depends_on:
      - aria2
  aria2:
    container_name: aria2
    image: p3terx/aria2-pro
    restart: unless-stopped
    environment:
      - RPC_SECRET=your_aria_rpc_token
      - RPC_PORT=6800
    volumes:
      - ./aria2/config:/config
      - temp_data:/data
volumes:
  temp_data:
    driver: local
    driver_opts:
      type: none
      device: $PWD/data
      o: bind
```

## ç«¯å£

+ æ£€æŸ¥ç«¯å£å·

  > `lsof -i`æ£€æŸ¥ç«¯å£å·ï¼Œå¦‚æœæ²¡æœ‰è¢«å ç”¨äº†å°±ä¸æ˜¾ç¤º

  ```
  lsof -i:5212
  ```

+ å¼€æ”¾ç«¯å£

+ å®å¡”æ·»åŠ æ–¹å‘ä»£ç†

![image-20221029234109014](http://sm.nsddd.top/smimage-20221029234109014.png)



## è¿è¡Œé•œåƒ

**åå°è¿è¡Œæ¨¡å¼ï¼Œå¯ä»¥ä» docker/docker-compose çš„æ—¥å¿—ä¸­è·å–é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ç”¨æˆ·åå’Œå¯†ç **

```
docker-compose up -d
```



**æˆ–è€…ï¼Œç›´æ¥è¿è¡Œï¼Œlog å°†ä¼šç›´æ¥è¾“å‡ºåœ¨å½“å‰æ§åˆ¶å°ä¸­ï¼Œè¯·æ³¨æ„é€€å‡ºä¹‹åä¿æŒå½“å‰å®¹å™¨è¿è¡Œ**

```
docker-compose up
```



**åœ¨ä¹‹åçš„æ§åˆ¶é¢æ¿ä¸­ï¼ŒæŒ‰ç…§å¦‚ä¸‹é…ç½®**

1. **[ä¸å¯ä¿®æ”¹]** RPC æœåŠ¡å™¨åœ°å€ => `http://aria2:6800`
2. **[å¯ä¿®æ”¹, éœ€ä¿æŒå’Œ docker-compose.yml æ–‡ä»¶ä¸€è‡´]** RPC æˆæƒä»¤ç‰Œ => `your_aria_rpc_token`
3. **[ä¸å¯ä¿®æ”¹]** Aria2 ç”¨ä½œä¸´æ—¶ä¸‹è½½ç›®å½•çš„ èŠ‚ç‚¹ä¸Šçš„ç»å¯¹è·¯å¾„ => `/data`



## æ›´æ–°

å…³é—­å½“å‰è¿è¡Œçš„å®¹å™¨ï¼Œæ­¤æ­¥éª¤ä¸ä¼šåˆ é™¤æŒ‚è½½çš„é…ç½®æ–‡ä»¶ä»¥åŠç›¸å…³ç›®å½•

```
docker-compose down
```

å¦‚æœæ­¤å‰å·²ç»æ‹‰å– docker é•œåƒï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è·å–æœ€æ–°é•œåƒ

```
docker pull cloudreve/cloudreve
```



## END é“¾æ¥

+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](23.md)
+ [ä¸‹ä¸€èŠ‚](25.md)
---
+ [å‚ä¸è´¡çŒ®â¤ï¸ğŸ’•ğŸ’•](https://github.com/3293172751/Block_Chain/blob/master/Git/git-contributor.md)
