+ [author](https://github.com/3293172751/cs-awesome-Block_Chain)

# ç¬¬4èŠ‚ ä¾èµ–å€’è½¬åŸåˆ™

<div><a href = '3.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '5.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>

> â¤ï¸ğŸ’•ğŸ’•Javaå’ŒGolangçš„è®¾è®¡æ¨¡å¼ï¼Œè®¾è®¡æ¨¡å¼ä»‹ç»ã€åˆ›å»ºè€…æ¨¡å¼ã€ç»“æ„å‹æ¨¡å¼ã€è¡Œä¸ºå‹æ¨¡å¼ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)

---
[TOC]

## åŸåˆ™

::: danger
**(Dependence**  **Inversion Principle, DIP)**

ä¾èµ–äºæŠ½è±¡(æ¥å£)ï¼Œä¸è¦ä¾èµ–å…·ä½“çš„å®ç°(ç±»)ï¼Œä¹Ÿå°±æ˜¯é’ˆå¯¹æ¥å£ç¼–ç¨‹ã€‚
:::



## æ²¡æœ‰ä½¿ç”¨ä¾èµ–å€’è½¬

```go
// ä¾èµ–å€’è½¬åŸåˆ™
package main

import "fmt"

//+å¸æœºå¼ ä¸‰ã€æå››ã€ç‹äº”
//+++å¼ ä¸‰å¼€å¥”é©°
//+++æå››å¼€å®é©¬

//å¼ ä¸‰å¥”é©°
type Zhangsan struct {
}

//æå››å®é©¬
type Lisi struct {
}

//å¼ ä¸‰å¼€å¥”é©°
func (b *Zhangsan) Run() {
	fmt.Println("å¥”é©°åœ¨è·‘")
}

//å¥”é©°
type Benz struct {
}

//å®é©¬
type Bmw struct {
}

//å¥”é©°
func (b *Benz) Run() {
	fmt.Println("å¥”é©°åœ¨è·‘")
}

//å®é©¬
func (b *Lisi) Run() {
	fmt.Println("å®é©¬åœ¨è·‘")
}

//å¼ ä¸‰æƒ³å¼€å®é©¬
func (b *Zhangsan) WantRun() {
	fmt.Println("å¼ ä¸‰æƒ³å¼€å®é©¬")
}

//æå››æƒ³å¼€å¥”é©°
func (b *Lisi) WantRun() {
	fmt.Println("æå››æƒ³å¼€å¥”é©°")
}

func main() {
	//å¼ ä¸‰å¼€å¥”é©°
	zhangsan := &Zhangsan{}
	zhangsan.Run()
	//æå››å¼€å®é©¬
	lisi := &Lisi{}
	lisi.Run()

	//å¼ ä¸‰æƒ³å¼€å®é©¬
	zhangsan.WantRun()
	//æå››æƒ³å¼€å¥”é©°
	lisi.WantRun()
}

```

ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š

```bash
[Running] go run "d:\æ–‡æ¡£\æœ€è¿‘çš„\awesome-golang\docs\code\go-super\81-main.go"
å¥”é©°åœ¨è·‘
å®é©¬åœ¨è·‘
å¼ ä¸‰æƒ³å¼€å®é©¬
æå››æƒ³å¼€å¥”é©°
```

::: warning ğŸ“œ å¯¹ä¸Šé¢çš„è§£é‡Š
æˆ‘ä»¬å¯ä»¥çœ‹å‡ºè¿™æ ·è®¾è®¡çš„å¼Šç«¯ï¼Œæˆ‘ä»¬å¸Œæœ›å¼ ä¸‰å¼€å¥”é©°ï¼Œæå››æƒ³å¼€å¥”é©°çš„æ—¶å€™ï¼Œéœ€è¦é¢å¤–åŠ æ–¹æ³•ã€‚

![image-20221128112622244](http://sm.nsddd.top/smimage-20221128112622244.png)

**æˆ‘ä»¬åº”è¯¥å°½é‡é™ä½è€¦åˆåº¦çš„å‘ç”Ÿ**

æˆ‘ä»¬æ¥çœ‹ä¸Šé¢çš„ä»£ç å’Œå›¾ä¸­æ¯ä¸ªæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå®é™…ä¸Šå¹¶æ²¡æœ‰ç”¨åˆ°ä»»ä½•çš„`interface`æ¥å£å±‚çš„ä»£ç ï¼Œæ˜¾ç„¶æœ€åæˆ‘ä»¬çš„ä¸¤ä¸ªä¸šåŠ¡ `å¼ ä¸‰å¼€å¥”é©°`, `æå››å¼€å®é©¬`ï¼Œç¨‹åºä¸­ä¹Ÿéƒ½å®ç°äº†ã€‚ä½†æ˜¯è¿™ç§è®¾è®¡çš„é—®é¢˜å°±åœ¨äºï¼Œå°è§„æ¨¡æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ä¸€æ—¦ç¨‹åºéœ€è¦æ‰©å±•ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨è¦å¢åŠ ä¸€ä¸ª`ä¸°ç”°æ±½è½¦` æˆ–è€… å¸æœº`ç‹äº”`ï¼Œ é‚£ä¹ˆæ¨¡å—å’Œæ¨¡å—çš„ä¾èµ–å…³ç³»å°†æˆæŒ‡æ•°çº§é€’å¢ï¼Œæƒ³èœ˜è››ç½‘ä¸€æ ·è¶Šæ¥è¶Šéš¾ç»´æŠ¤å’Œæ‹é¡ºã€‚

:::



## ä½¿ç”¨ä¾èµ–å€’è½¬

![image-20221128113217815](http://sm.nsddd.top/smimage-20221128113217815.png)

::: warning 
æˆ‘ä»¬éœ€è¦è®°ä½éœ€è¦å¼•å…¥æŠ½è±¡å±‚ï¼Œæ¥å£å…¶å®æœ€å¤§çš„ç›®çš„ä¹Ÿæ˜¯ä¸ºäº†å®ç°æŠ½è±¡ï¼Œå¯¹æ¥ä¸šåŠ¡å±‚å’Œå®ç°å±‚ã€‚

æˆ‘ä»¬ä¾ç…§æŠ½è±¡å±‚ï¼Œä¾æ¬¡å®ç°æ¯ä¸ªå®ç°å±‚çš„æ¨¡å—ï¼Œåœ¨æˆ‘ä»¬å†™å®ç°å±‚ä»£ç çš„æ—¶å€™ï¼Œå®é™…ä¸Šæˆ‘ä»¬åªéœ€è¦å‚è€ƒå¯¹åº”çš„æŠ½è±¡å±‚å®ç°å°±å¥½äº†ï¼Œå®ç°æ¯ä¸ªæ¨¡å—ï¼Œä¹Ÿå’Œå…¶ä»–çš„å®ç°çš„æ¨¡å—æ²¡æœ‰å…³ç³»ï¼Œè¿™æ ·ä¹Ÿç¬¦åˆäº†ä¸Šé¢ä»‹ç»çš„å¼€é—­åŸåˆ™ã€‚è¿™æ ·å®ç°èµ·æ¥æ¯ä¸ªæ¨¡å—åªä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œå’Œå…¶ä»–æ¨¡å—æ²¡å…³ç³»ï¼Œä¾èµ–å…³ç³»å•ä¸€ã€‚ç³»ç»Ÿå®¹æ˜“æ‰©å±•å’Œç»´æŠ¤ã€‚

æˆ‘ä»¬åœ¨æŒ‡å®šä¸šåŠ¡é€»è¾‘ä¹Ÿæ˜¯ä¸€æ ·ï¼Œåªéœ€è¦å‚è€ƒæŠ½è±¡å±‚çš„æ¥å£æ¥ä¸šåŠ¡å°±å¥½äº†ï¼ŒæŠ½è±¡å±‚æš´éœ²å‡ºæ¥çš„æ¥å£å°±æ˜¯æˆ‘ä»¬ä¸šåŠ¡å±‚å¯ä»¥ä½¿ç”¨çš„æ–¹æ³•ï¼Œç„¶åå¯ä»¥é€šè¿‡å¤šæ€çš„çº¿ä¸‹ï¼Œæ¥å£æŒ‡é’ˆæŒ‡å‘å“ªä¸ªå®ç°æ¨¡å—ï¼Œè°ƒç”¨äº†å°±æ˜¯å…·ä½“çš„å®ç°æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬ä¸šåŠ¡é€»è¾‘å±‚ä¹Ÿæ˜¯ä¾èµ–æŠ½è±¡æˆç¼–ç¨‹ã€‚

:::

ğŸ’¡ç®€å•çš„ä¸€ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼š

```go
package main

import "fmt"

//====> abstract layer <========
type Car interface {
	Run()
}

type Driver interface {
	Drive(car Car)
}

//====> Implementation layer <========
type BenZ struct {
	//...
}

func (benz *BenZ) Run() {
	fmt.Println("Benz is running...")
}

type Bmw struct {
	//...
}

func (bmw *Bmw) Run() {
	fmt.Println("Bmw is running...")
}

type Zhang_3 struct {
	//...
}

func (zhang3 *Zhang_3) Drive(car Car) {
	fmt.Println("Zhang3 drive -->", car)
	car.Run()
}

type Li_4 struct {
	//...
}

func (li4 *Li_4) Drive(car Car) {
	fmt.Println("li4 drive -->", car)
	car.Run()
}

type Wangwu struct {
	//...
}

func (wangwu *Wangwu) Drive(car Car) {
	fmt.Println("wangwu drive -->", car)
	car.Run()
}

//====> Business logic layer <=========
func main() {
	//Zhang 3 drives BMW
	var bmw Car = &Bmw{}

	//In 4 Mercedes drives
	var benz Car = &BenZ{}

	var zhang3 Driver = &Zhang_3{}
	zhang3.Drive(bmw)

	//Zhang San wants to drive a BMW
	zhang3.Drive(benz)

	var li4 Driver
	li4 = &Li_4{}
	li4.Drive(benz)

	//Li si wants to drive Mercedes
	li4.Drive(bmw)

	var wangwu Driver = &Wangwu{}
	wangwu.Drive(benz)
	wangwu.Drive(bmw)
}

```

ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š

```bash
[Running] go run "d:\æ–‡æ¡£\æœ€è¿‘çš„\awesome-golang\docs\code\go-super\82-main.go"
Zhang3 drive --> &{}
Bmw is running...
Zhang3 drive --> &{}
Benz is running...
li4 drive --> &{}
Benz is running...
li4 drive --> &{}
Bmw is running...
wangwu drive --> &{}
Benz is running...
wangwu drive --> &{}
Bmw is running...
```



## END é“¾æ¥

<ul><li><div><a href = '3.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '5.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; :æœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

