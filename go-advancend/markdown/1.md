+ [author](https://github.com/3293172751)

# ç¬¬1èŠ‚ Gcc and Cgo

+ [å›åˆ°ç›®å½•](../README.md)
> â¤ï¸ğŸ’•ğŸ’•Goè¯­è¨€é«˜çº§ç¯‡ç« ,åœ¨æ­¤ä¹‹å‰å»ºè®®æ‚¨å…ˆäº†è§£åŸºç¡€å’Œè¿›é˜¶ç¯‡ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)
> ###  **[Goè¯­è¨€åŸºç¡€ç¯‡](https://github.com/3293172751/Block_Chain/blob/master/TOC.md)**
>
> ###  **[Goè¯­è¨€100ç¯‡è¿›é˜¶](https://github.com/3293172751/Block_Chain/blob/master/Gomd_super/README.md)**
---
[TOC]

----

**æˆ‘ä»¬é»˜è®¤ä¸ºæ˜¯Cè¯­è¨€æ˜¯å 4ä¸ªå­—èŠ‚ï¼Œè¿™ä¸ªå’ŒGoè¯­è¨€æ˜¯ä¸ä¸€æ ·çš„ã€‚**

**åœ¨Goè¯­è¨€ä¸­ï¼Œinté»˜è®¤æ˜¯8ä¸ªå­—èŠ‚**

+ int32æ˜¯å››ä¸ªå­—èŠ‚
+ int64æ˜¯å…«ä¸ªå­—èŠ‚
+ intæ˜¯å…«ä¸ªå­—èŠ‚

```go
/*************************************************************************
    > File Name: a.go
    > Author: smile
    > Mail: 3293172751nss@gmail.com 
    > Created Time: Thu 30 Jun 2022 01:13:35 AM PDT
 ************************************************************************/
package main
import(
    "fmt"
)

func main(){
    var(
    a = 40000
    b = 50000
)
var c int
var d int32
    c = 50000
    d = 50000
    fmt.Println(a*a)
    fmt.Println(b*b)
    fmt.Println(c*c)
    fmt.Println(d*d)
}
```

**æˆ‘ä»¬å¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œç¼–è¯‘ï¼š**

```
root@ubuntu:/c# go run a.go 
1600000000
2500000000
2500000000
-1794967296
```



**å¯¹äºCè¯­è¨€æ¥è¯´**



**ç¼–è¯‘ä¸ºæ±‡ç¼–æ–‡ä»¶**

```asm
root@ubuntu:/c# gcc -S a.c
root@ubuntu:/c# cat a.s
	.file	"a.c"
	.text
	.section	.rodata
.LC0:
	.string	"%d\n,%d\n"
.LC1:
	.string	"int c = %d\n,int64_t d = %lld\n"
	.text
	.globl	main
	.type	main, @function
main:
.LFB0:
	.cfi_startproc
	endbr64
	pushq	%rbp
	.cfi_def_cfa_offset 16
	.cfi_offset 6, -16
	movq	%rsp, %rbp
	.cfi_def_cfa_register 6
	subq	$32, %rsp
	movl	$50000, -20(%rbp)
	movl	$40000, -16(%rbp)
	movl	-16(%rbp), %eax
	imull	%eax, %eax
	movl	%eax, %edx
	movl	-20(%rbp), %eax
	imull	%eax, %eax
	movl	%eax, %esi
	leaq	.LC0(%rip), %rdi
	movl	$0, %eax
	call	printf@PLT
	movq	-8(%rbp), %rax
	imulq	%rax, %rax
	movq	%rax, %rdx
	movl	-12(%rbp), %eax
	imull	%eax, %eax
	movl	%eax, %esi
	leaq	.LC1(%rip), %rdi
	movl	$0, %eax
	call	printf@PLT
	movl	$0, %eax
	leave
	.cfi_def_cfa 7, 8
	ret
	.cfi_endproc
.LFE0:
	.size	main, .-main
	.ident	"GCC: (Ubuntu 9.4.0-1ubuntu1~20.04.1) 9.4.0"
	.section	.note.GNU-stack,"",@progbits
	.section	.note.gnu.property,"a"
	.align 8
	.long	 1f - 0f
	.long	 4f - 1f
	.long	 5
0:
	.string	 "GNU"
1:
	.align 8
	.long	 0xc0000002
	.long	 3f - 2f
2:
	.long	 0x3
3:
	.align 8
4:
```



**ç¼–è¯‘ä¸ºäºŒè¿›åˆ¶ä»£ç **

```
root@ubuntu:/c# gcc -Og -c a.c
root@ubuntu:/c# cat a.o                                                                EÂ¹^_Âºò”ˆ5Â¿Â¸è¹ºH5Â¿Â¸.ed
,%d
int c = %d
,int64_t d = %lld
GCC: (Ubuntu 9.4.0-1ubuntu1~20.04.1) 9.4.0GNUó¿¾„zRx 
                                                Hò½                                     R*a.c.LC0.LC1main_GLOBAL_OFFSET_TABLE___printf_chk	ñ€¿Ã¿Ã¿$ñ€¿Ã¿Ã¿5 
ñ€¿Ã¿Ã¿Dñ€¿Ã¿Ã¿ .symtab.strtab.shstrtab.rela.text.data.bss.rodata.str1.1.comment.note.GNU-stack.note.gnu.property.rela.eh_frame @RÖ‚`
                                   &12&@0Â¸,Il@8 
                                               8h 

                                                	Â 7P{root@ubuntu:/c# XshellXshellXshellXshellXshell
XshellXshellXshellXshellXshell: command not found
```

**`.o`åç¼€çš„æ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ ¼å¼çš„ï¼Œæ²¡æœ‰æŸ¥çœ‹æ„ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼šæœºå™¨æ‰§è¡Œçš„ç¨‹åºåªæ˜¯ä¸€ä¸ªå­—èŠ‚åºåˆ—ï¼Œ å®ƒæ˜¯å¯¹ä¸€ç³»åˆ—æŒ‡ä»¤çš„ç¼–ç ã€‚æœºå™¨å¯¹äº§ç”Ÿè¿™äº›æŒ‡ä»¤çš„æºä»£ç å‡ ä¹ä¸€æ— æ‰€çŸ¥ã€‚**

**å¦‚æœéœ€è¦æ˜¾ç¤ºå‡ºæœºå™¨ä»£ç æ–‡ä»¶çš„å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°åæ±‡ç¼–å™¨ï¼ˆè¿™ä¸ªç¨‹åºéå¸¸æœ‰ç”¨ï¼‰ï¼Œåœ¨Linuxä¸­`-d`æŒ‡ä»¤æ ‡å¿—çš„objdump å¯ä»¥å……å½“è¿™ä¸ªè§’è‰²**

```asm
root@ubuntu:/c# objdump -d a.o

a.o:     file format elf64-x86-64


Disassembly of section .text:

0000000000000000 <main>:
   0:	f3 0f 1e fa          	endbr64 
   4:	48 83 ec 08          	sub    $0x8,%rsp
   8:	b9 00 10 5e 5f       	mov    $0x5f5e1000,%ecx
   d:	ba 00 f9 02 95       	mov    $0x9502f900,%edx
  12:	48 8d 35 00 00 00 00 	lea    0x0(%rip),%rsi        # 19 <main+0x19>
  19:	bf 01 00 00 00       	mov    $0x1,%edi
  1e:	b8 00 00 00 00       	mov    $0x0,%eax
  23:	e8 00 00 00 00       	callq  28 <main+0x28>
  28:	b9 00 00 00 00       	mov    $0x0,%ecx
  2d:	ba 00 00 00 00       	mov    $0x0,%edx
  32:	48 8d 35 00 00 00 00 	lea    0x0(%rip),%rsi        # 39 <main+0x39>
  39:	bf 01 00 00 00       	mov    $0x1,%edi
  3e:	b8 00 00 00 00       	mov    $0x0,%eax
  43:	e8 00 00 00 00       	callq  48 <main+0x48>
  48:	b8 00 00 00 00       	mov    $0x0,%eax
  4d:	48 83 c4 08          	add    $0x8,%rsp
  51:	c3                   	retq   
```



**å¯¹äºGoè¯­è¨€æˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨åæ±‡ç¼–å‘½ä»¤**

```asp
root@ubuntu:/c# go build -o a a.go
root@ubuntu:/c# ./a
1600000000
2500000000
2500000000
-1794967296
root@ubuntu:/c# objdump -d a | tail -n 10
  48d03c:	00 00 
  48d03e:	48 c7 44 24 20 01 00 	movq   $0x1,0x20(%rsp)
  48d045:	00 00 
  48d047:	e8 a4 96 ff ff       	callq  4866f0 <fmt.Fprintln>
  48d04c:	48 8b ac 24 80 00 00 	mov    0x80(%rsp),%rbp
  48d053:	00 
  48d054:	48 81 c4 88 00 00 00 	add    $0x88,%rsp
  48d05b:	c3                   	retq   
  48d05c:	e8 2f 47 fc ff       	callq  451790 <runtime.morestack_noctxt>
  48d061:	e9 2a fe ff ff       	jmpq   48ce90 <main.main>
```





## END é“¾æ¥

+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸‹ä¸€èŠ‚](2.md)
---
+ [å‚ä¸è´¡çŒ®â¤ï¸ğŸ’•ğŸ’•](https://github.com/3293172751/Block_Chain/blob/master/Git/git-contributor.md)