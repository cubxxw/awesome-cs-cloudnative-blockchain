+ [author](https://github.com/3293172751)

# ç¬¬10èŠ‚ go airå®ç°é¡¹ç›®çƒ­åŠ è½½

+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](9.md)
> â¤ï¸ğŸ’•ğŸ’•Goè¯­è¨€é«˜çº§ç¯‡ç« ,åœ¨æ­¤ä¹‹å‰å»ºè®®æ‚¨å…ˆäº†è§£åŸºç¡€å’Œè¿›é˜¶ç¯‡ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)
###  **[Goè¯­è¨€åŸºç¡€ç¯‡](https://github.com/3293172751/Block_Chain/blob/master/TOC.md)**
###  **[Goè¯­è¨€100ç¯‡è¿›é˜¶](https://github.com/3293172751/Block_Chain/blob/master/Gomd_super/README.md)**
---
[TOC]

## å¼€å§‹å‡†å¤‡

**ä½¿ç”¨windowçš„cmdç»ˆç«¯ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å‘½ä»¤`code .`æ‰“å¼€å½“å‰æ–‡ä»¶çš„vscode**

> ä½¿ç”¨`Start .`å¯ä»¥æ‰“å¼€æ–‡ä»¶èµ„æºç®¡ç†å™¨



### Windowså®‰è£…go airå®ç°é¡¹ç›®çƒ­åŠ è½½

Air æ˜¯ä¸º Go åº”ç”¨å¼€å‘è®¾è®¡çš„å¦å¤–ä¸€ä¸ªçƒ­é‡è½½çš„å‘½ä»¤è¡Œå·¥å…·ã€‚åªéœ€åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹è¾“å…¥ `air`ï¼Œç„¶åæŠŠå®ƒæ”¾åœ¨ä¸€è¾¹ï¼Œä¸“æ³¨äºä½ çš„ä»£ç å³å¯ã€‚

+ [x] [ä»“åº“åœ°å€](https://github.com/cosmtrek/air)

**å®‰è£…air**

```
go get -u github.com/cosmtrek/air
```



## å®‰è£…

### æ¨èä½¿ç”¨ install.sh

```
# binary æ–‡ä»¶ä¼šæ˜¯åœ¨ $(go env GOPATH)/bin/air
curl -sSfL https://raw.githubusercontent.com/cosmtrek/air/master/install.sh | sh -s -- -b $(go env GOPATH)/bin

# æˆ–è€…æŠŠå®ƒå®‰è£…åœ¨ ./bin/ è·¯å¾„ä¸‹
curl -sSfL https://raw.githubusercontent.com/cosmtrek/air/master/install.sh | sh -s

air -v
```

P.S. éå¸¸æ„Ÿè°¢ mattn çš„ [PR](https://github.com/cosmtrek/air/pull/1)ï¼Œä½¿å¾— Air æ”¯æŒ Windows å¹³å°ã€‚

### ä½¿ç”¨ `go install`

ä½¿ç”¨ Go çš„ç‰ˆæœ¬ä¸º 1.16 æˆ–æ›´é«˜:

```
go install github.com/cosmtrek/air@latest
```



### Docker

è¯·æ‹‰å–è¿™ä¸ª Docker é•œåƒ [cosmtrek/air](https://hub.docker.com/r/cosmtrek/air).

```
docker run -it --rm \
    -w "<PROJECT>" \
    -e "air_wd=<PROJECT>" \
    -v $(pwd):<PROJECT> \
    -p <PORT>:<APP SERVER PORT> \
    cosmtrek/air
    -c <CONF>
```

ä¾‹å¦‚ï¼Œæˆ‘çš„é¡¹ç›®ä¹‹ä¸€æ˜¯åœ¨ Docker ä¸Šè¿è¡Œçš„ï¼š

```
docker run -it --rm \
    -w "/go/src/github.com/cosmtrek/hub" \
    -v $(pwd):/go/src/github.com/cosmtrek/hub \
    -p 9090:9090 \
    cosmtrek/air
```

<img src="assets/image-20220822170342761.png" alt="image-20220822170342761" style="zoom:50%;" />



## ä½¿ç”¨æ–¹æ³•

æ‚¨å¯ä»¥æ·»åŠ  `alias air='~/.air'` åˆ°æ‚¨çš„ `.bashrc` æˆ– `.zshrc` åç¼€çš„æ–‡ä»¶.

é¦–å…ˆï¼Œè¿›å…¥ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹

```
cd /path/to/your_project
```

æœ€ç®€å•çš„æ–¹æ³•æ˜¯æ‰§è¡Œ

```
# ä¼˜å…ˆåœ¨å½“å‰è·¯å¾„æŸ¥æ‰¾ `.air.toml` åç¼€çš„æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„
air -c .air.toml
```

æ‚¨å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–ï¼ŒæŠŠé»˜è®¤é…ç½®æ·»åŠ åˆ°å½“å‰è·¯å¾„ä¸‹çš„`.air.toml` æ–‡ä»¶ã€‚

```
air init
```

> å”¯ä¸€éœ€è¦è®²çš„åœ°æ–¹æ˜¯åœ¨é…ç½®æ–‡ä»¶`.air.toml`ä¸­ï¼š
>
> ```
>   cmd = "go build -o ./tmp/main.exe ."
> ```
>
> **cmdæ˜¯å¯ä»¥æ‰§è¡Œairçš„ç›®å½•ï¼Œå³ä½¿ä½ `go mod init â€name"` åˆå§‹åŒ–äº†ï¼Œä½†æ˜¯ä¹Ÿæ˜¯è¦åŠ å…¥ç›¸å¯¹è·¯å¾„çš„ï¼Œæ¯”å¦‚è¯´åŠ å…¥é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„cmdæ–‡ä»¶**
>
> ```
>   cmd = "go build -o ./tmp/main.exe ./cmd"
> ```
>
> <img src="assets/image-20220822170925614.png" alt="image-20220822170925614" style="zoom:25%;" />

åœ¨è¿™ä¹‹åï¼Œä½ åªéœ€æ‰§è¡Œ `air` å‘½ä»¤ï¼Œæ— éœ€æ·»åŠ é¢å¤–çš„å˜é‡ï¼Œå®ƒå°±èƒ½ä½¿ç”¨ `.air.toml` æ–‡ä»¶ä¸­çš„é…ç½®äº†ã€‚

```
air
```

å¦‚æ¬²ä¿®æ”¹é…ç½®ä¿¡æ¯ï¼Œè¯·å‚è€ƒ [air_example.toml](https://github.com/cosmtrek/air/blob/master/air_example.toml) æ–‡ä»¶.



### è¿è¡Œæ—¶å‚æ•°

æ‚¨å¯ä»¥é€šè¿‡æŠŠå˜é‡æ·»åŠ åœ¨ air å‘½ä»¤ä¹‹åæ¥ä¼ é€’å‚æ•°ã€‚

```
# ä¼šæ‰§è¡Œ ./tmp/main bench
air bench

# ä¼šæ‰§è¡Œ ./tmp/main server --port 8080
air server --port 8080
```

You can separate the arguments passed for the air command and the built binary with `--` argument.

```
# ä¼šè¿è¡Œ ./tmp/main -h
air -- -h

# ä¼šä½¿ç”¨ä¸ªæ€§åŒ–é…ç½®æ¥è¿è¡Œ airï¼Œç„¶åæŠŠ -h åçš„å˜é‡å’Œå€¼æ·»åŠ åˆ°è¿è¡Œçš„å‚æ•°ä¸­
air -c .air.toml -- -h
```

### Docker-compose

```
services:
  my-project-with-air:
    image: cosmtrek/air
    # working_dir value has to be the same of mapped volume
    working_dir: /project-package
    ports:
      - <any>:<any>
    environment:
      - ENV_A=${ENV_A}
      - ENV_B=${ENV_B}
      - ENV_C=${ENV_C}
    volumes:
      - ./project-relative-path/:/project-package/
```

### è°ƒè¯•

è¿è¡Œ `air -d` å‘½ä»¤èƒ½æ‰“å°æ‰€æœ‰æ—¥å¿—ã€‚

## Q&A

### é‡åˆ° "command not found: air" æˆ– "No such file or directory" è¯¥æ€ä¹ˆåŠï¼Ÿ

```
export GOPATH=$HOME/xxxxx
export PATH=$PATH:$GOROOT/bin:$GOPATH/bin
export PATH=$PATH:$(go env GOPATH)/bin <---- è¯·ç¡®è®¤è¿™è¡Œåœ¨æ‚¨çš„é…ç½®ä¿¡æ¯ä¸­ï¼ï¼ï¼
```

## éƒ¨ç½²

è¯·æ³¨æ„ï¼šè¿™éœ€è¦ Go 1.16+ ï¼Œå› ä¸ºæˆ‘ä½¿ç”¨ `go mod` æ¥ç®¡ç†ä¾èµ–ã€‚

```
# 1. é¦–å…ˆå¤åˆ»ï¼ˆforkï¼‰è¿™ä¸ªé¡¹ç›®

# 2. å…¶æ¬¡å…‹éš†ï¼ˆcloneï¼‰å®ƒ
mkdir -p $GOPATH/src/github.com/cosmtrek
cd $GOPATH/src/github.com/cosmtrek
git clone git@github.com:<YOUR USERNAME>/air.git

# 3. å†æ¬¡å®‰è£…ä¾èµ–
cd air
make ci

# 4. è¿™æ ·å°±å¯ä»¥å¿«ä¹åœ°æ¢ç´¢å’Œç©è€å•¦ï¼
make install
```

é¡ºä¾¿è¯´ä¸€å¥: æ¬¢è¿ PR~

### å‘å¸ƒæ–°ç‰ˆæœ¬

```
# 1. checkout åˆ° master åˆ†æ”¯
git checkout master

# 2. æ·»åŠ éœ€è¦å‘å¸ƒçš„ç‰ˆæœ¬å·
git tag v1.xx.x

# 3. æ¨é€åˆ°è¿œç¨‹
git push origin v1.xx.x

ci ä¼šåŠ å·¥å’Œå¤„ç†ï¼Œç„¶åä¼šå‘å¸ƒæ–°ç‰ˆæœ¬ã€‚ç­‰å¾…å¤§çº¦äº”åˆ†é’Ÿï¼Œä½ å°±èƒ½è·å–åˆ°æ–°ç‰ˆæœ¬äº†ã€‚
```





## END é“¾æ¥
+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](9.md)
+ [ä¸‹ä¸€èŠ‚](11.md)
---
+ [å‚ä¸è´¡çŒ®â¤ï¸ğŸ’•ğŸ’•](https://github.com/3293172751/Block_Chain/blob/master/Git/git-contributor.md)