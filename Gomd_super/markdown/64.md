# 1. åå°„

åå°„æ˜¯æŒ‡åœ¨ç¨‹åºè¿è¡ŒæœŸå¯¹ç¨‹åºæœ¬èº«è¿›è¡Œè®¿é—®å’Œä¿®æ”¹çš„èƒ½åŠ›

### 1.1.1. å˜é‡çš„å†…åœ¨æœºåˆ¶

- å˜é‡åŒ…å«ç±»å‹ä¿¡æ¯å’Œå€¼ä¿¡æ¯ var arr [10]int arr[0] = 10
- ç±»å‹ä¿¡æ¯ï¼šæ˜¯é™æ€çš„å…ƒä¿¡æ¯ï¼Œæ˜¯é¢„å…ˆå®šä¹‰å¥½çš„
- å€¼ä¿¡æ¯ï¼šæ˜¯ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€æ”¹å˜çš„

### 1.1.2. åå°„çš„ä½¿ç”¨

- reflectåŒ…å°è£…äº†åå°„ç›¸å…³çš„æ–¹æ³•
- è·å–ç±»å‹ä¿¡æ¯ï¼šreflect.TypeOfï¼Œæ˜¯é™æ€çš„
- è·å–å€¼ä¿¡æ¯ï¼šreflect.ValueOfï¼Œæ˜¯åŠ¨æ€çš„

### 1.1.3. ç©ºæ¥å£ä¸åå°„

- åå°„å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–ç¨‹åºçš„å„ç§è¯¦ç»†ä¿¡æ¯
- åå°„è·å–interfaceç±»å‹ä¿¡æ¯

```go
package main

import (
   "fmt"
   "reflect"
)

//åå°„è·å–interfaceç±»å‹ä¿¡æ¯

func reflect_type(a interface{}) {
   t := reflect.TypeOf(a)
   fmt.Println("ç±»å‹æ˜¯ï¼š", t)
   // kind()å¯ä»¥è·å–å…·ä½“ç±»å‹
   k := t.Kind()
   fmt.Println(k)
   switch k {
   case reflect.Float64:
      fmt.Printf("a is float64\n")
   case reflect.String:
      fmt.Println("string")
   }
}

func main() {
   var x float64 = 3.4
   reflect_type(x)
}
```

- åå°„è·å–interfaceå€¼ä¿¡æ¯

```go
package main

import (
    "fmt"
    "reflect"
)

//åå°„è·å–interfaceå€¼ä¿¡æ¯

func reflect_value(a interface{}) {
    v := reflect.ValueOf(a)
    fmt.Println(v)
    k := v.Kind()
    fmt.Println(k)
    switch k {
    case reflect.Float64:
        fmt.Println("aæ˜¯ï¼š", v.Float())
    }
}

func main() {
    var x float64 = 3.4
    reflect_value(x)
}
```

- åå°„ä¿®æ”¹å€¼ä¿¡æ¯

```go
package main

import (
    "fmt"
    "reflect"
)

//åå°„ä¿®æ”¹å€¼
func reflect_set_value(a interface{}) {
    v := reflect.ValueOf(a)
    k := v.Kind()
    switch k {
    case reflect.Float64:
        // åå°„ä¿®æ”¹å€¼
        v.SetFloat(6.9)
        fmt.Println("a is ", v.Float())
    case reflect.Ptr:
        // Elem()è·å–åœ°å€æŒ‡å‘çš„å€¼
        v.Elem().SetFloat(7.9)
        fmt.Println("case:", v.Elem().Float())
        // åœ°å€
        fmt.Println(v.Pointer())
    }
}

func main() {
    var x float64 = 3.4
    // åå°„è®¤ä¸ºä¸‹é¢æ˜¯æŒ‡é’ˆç±»å‹ï¼Œä¸æ˜¯floatç±»å‹
    reflect_set_value(&x)
    fmt.Println("main:", x)
}
```

### 1.1.4. ç»“æ„ä½“ä¸åå°„

æŸ¥çœ‹ç±»å‹ã€å­—æ®µå’Œæ–¹æ³•

```go
package main

import (
    "fmt"
    "reflect"
)

// å®šä¹‰ç»“æ„ä½“
type User struct {
    Id   int
    Name string
    Age  int
}

// ç»‘æ–¹æ³•
func (u User) Hello() {
    fmt.Println("Hello")
}

// ä¼ å…¥interface{}
func Poni(o interface{}) {
    t := reflect.TypeOf(o)
    fmt.Println("ç±»å‹ï¼š", t)
    fmt.Println("å­—ç¬¦ä¸²ç±»å‹ï¼š", t.Name())
    // è·å–å€¼
    v := reflect.ValueOf(o)
    fmt.Println(v)
    // å¯ä»¥è·å–æ‰€æœ‰å±æ€§
    // è·å–ç»“æ„ä½“å­—æ®µä¸ªæ•°ï¼št.NumField()
    for i := 0; i < t.NumField(); i++ {
        // å–æ¯ä¸ªå­—æ®µ
        f := t.Field(i)
        fmt.Printf("%s : %v", f.Name, f.Type)
        // è·å–å­—æ®µçš„å€¼ä¿¡æ¯
        // Interface()ï¼šè·å–å­—æ®µå¯¹åº”çš„å€¼
        val := v.Field(i).Interface()
        fmt.Println("val :", val)
    }
    fmt.Println("=================æ–¹æ³•====================")
    for i := 0; i < t.NumMethod(); i++ {
        m := t.Method(i)
        fmt.Println(m.Name)
        fmt.Println(m.Type)
    }

}

func main() {
    u := User{1, "zs", 20}
    Poni(u)
}
```

æŸ¥çœ‹åŒ¿åå­—æ®µ

```go
package main

import (
    "fmt"
    "reflect"
)

// å®šä¹‰ç»“æ„ä½“
type User struct {
    Id   int
    Name string
    Age  int
}

// åŒ¿åå­—æ®µ
type Boy struct {
    User
    Addr string
}

func main() {
    m := Boy{User{1, "zs", 20}, "bj"}
    t := reflect.TypeOf(m)
    fmt.Println(t)
    // Anonymousï¼šåŒ¿å
    fmt.Printf("%#v\n", t.Field(0))
    // å€¼ä¿¡æ¯
    fmt.Printf("%#v\n", reflect.ValueOf(m).Field(0))
}
```

ä¿®æ”¹ç»“æ„ä½“çš„å€¼

```go
package main

import (
    "fmt"
    "reflect"
)

// å®šä¹‰ç»“æ„ä½“
type User struct {
    Id   int
    Name string
    Age  int
}

// ä¿®æ”¹ç»“æ„ä½“å€¼
func SetValue(o interface{}) {
    v := reflect.ValueOf(o)
    // è·å–æŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ 
    v = v.Elem()
    // å–å­—æ®µ
    f := v.FieldByName("Name")
    if f.Kind() == reflect.String {
        f.SetString("kuteng")
    }
}

func main() {
    u := User{1, "5lmh.com", 20}
    SetValue(&u)
    fmt.Println(u)
}
```

è°ƒç”¨æ–¹æ³•

```go
package main

import (
    "fmt"
    "reflect"
)

// å®šä¹‰ç»“æ„ä½“
type User struct {
    Id   int
    Name string
    Age  int
}

func (u User) Hello(name string) {
    fmt.Println("Helloï¼š", name)
}

func main() {
    u := User{1, "5lmh.com", 20}
    v := reflect.ValueOf(u)
    // è·å–æ–¹æ³•
    m := v.MethodByName("Hello")
    // æ„å»ºä¸€äº›å‚æ•°
    args := []reflect.Value{reflect.ValueOf("6666")}
    // æ²¡å‚æ•°çš„æƒ…å†µä¸‹ï¼švar args2 []reflect.Value
    // è°ƒç”¨æ–¹æ³•ï¼Œéœ€è¦ä¼ å…¥æ–¹æ³•çš„å‚æ•°
    m.Call(args)
}
```

è·å–å­—æ®µçš„tag

```go
package main

import (
    "fmt"
    "reflect"
)

type Student struct {
    Name string `json:"name1" db:"name2"`
}

func main() {
    var s Student
    v := reflect.ValueOf(&s)
    // ç±»å‹
    t := v.Type()
    // è·å–å­—æ®µ
    f := t.Elem().Field(0)
    fmt.Println(f.Tag.Get("json"))
    fmt.Println(f.Tag.Get("db"))
}
```

### 1.1.5. åå°„ç»ƒä¹ 

- ä»»åŠ¡ï¼šè§£æå¦‚ä¸‹é…ç½®æ–‡ä»¶
  - åºåˆ—åŒ–ï¼šå°†ç»“æ„ä½“åºåˆ—åŒ–ä¸ºé…ç½®æ–‡ä»¶æ•°æ®å¹¶ä¿å­˜åˆ°ç¡¬ç›˜
  - ååºåˆ—åŒ–ï¼šå°†é…ç½®æ–‡ä»¶å†…å®¹ååºåˆ—åŒ–åˆ°ç¨‹åºçš„ç»“æ„ä½“
- é…ç½®æ–‡ä»¶æœ‰serverå’Œmysqlç›¸å…³é…ç½®

```
#this is comment
;this a comment
;[]è¡¨ç¤ºä¸€ä¸ªsection
[server]
ip = 10.238.2.2
port = 8080

[mysql]
username = root
passwd = admin
database = test
host = 192.168.10.10
port = 8000
timeout = 1.2
```

ä»£ç åœ°å€ï¼šhttps://github.com/lu569368/Practise_reflex.git

## END é“¾æ¥
<ul><li><div><a href = '63.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '65.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°é¦–é¡µğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; :æœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

