# ä½¿ç”¨hub.dockeræ¨é€åˆ°è¿œç¨‹

[[toc]]

[toc]

## å‰è¨€

+ [x] [åœ°å€](https://docs.docker.com/)

::: tip é«˜ä½è¯´ä¸¤å¥

ğŸ“– ç°åœ¨çš„hubå¥½åƒå¹¶æ²¡æœ‰å› ä¸ºç½‘è·¯åŸå› å¯¼è‡´â€¦â€¦.

ğŸ”¦ æ‰€ä»¥ç›®å‰æˆ‘è®¤ä¸ºhubæ¯”é˜¿é‡Œäº‘æ›´åŠ åˆé€‚å½“ä»“åº“

 â—ä¸‹é¢æœ‰åˆ†åˆ«æ¨é€windownså’ŒLinuxä¸­çš„é•œåƒåˆ°dockerï¼Œè¯·è€å¿ƒçœ‹å®Œ

:::

## ä½¿ç”¨commit

```
docker commit -m="vim cmd add ok" -a="nsddd" 08d1e4ac02f2  smile/myubuntu:1.0.0
```



## è®¾å®šç«¯å£æ˜ å°„

```
docker run -d -p 5000:5000 -v/zzyyuse/myregistry/:/tmp/registry --privileged=true registry
```

> é»˜è®¤æƒ…å†µä¸‹ï¼Œä»“åº“è¢«åˆ›å»ºåœ¨å®¹å™¨çš„`/var/lib/registry`ç›®å½•ä¸‹é¢ã€‚å»ºè®®è‡ªè¡Œç”¨å®¹å™¨å·æ˜ å°„ï¼Œæ–¹ä¾¿å®¿ä¸»æœºè”è°ƒ
>
> ä¸Šé¢å†™çš„å®¹å™¨å·/zzyyuse/myregistry/ **ä¸å†™çš„è¯å°±ç”¨é»˜è®¤ç›®å½•**
>
> --privileged=ture å¼€å¯æƒé™ï¼Œå¼€å¯åŠ¨æ‹¥æœ‰çœŸæ­£çš„rootæƒé™



## ä¿®æ”¹é…ç½®æ–‡ä»¶ä½¿dockeræ”¯æŒhttp

```
cat /etc/docker/daemon.json
```

**ä½¿ç”¨vimä¿®æ”¹**

```json
{
  "registry-mirrors": ["https://ks0realz.mirror.aliyuncs.com"],
  "insecure-registries":["192.168.111.167:5000"]
}
```

> **dockeré»˜è®¤ä¸æ”¯æŒhttpæ–¹å¼æ¨é€é•œåƒï¼Œé€šè¿‡é…ç½®é€‰é¡¹æ¥å–æ¶ˆè¿™ä¸ªé™åˆ¶ ===> ä¿®æ”¹å®Œå¦‚æœä¸ç”Ÿæ•ˆï¼Œé‡å¯docker**



## æ¨é€mysqlåˆ°hub.docker

> :smile: windownä¸‹æ¨é€MySQLåˆ°win

### å…ˆåˆ°hubä¸Šé¢æä¸€ä¸ªå¼€æºçš„ä»“åº“

![image-20220923201147595](http://sm.nsddd.top//typora/image-20220923201147595.png?mail:3293172751@qq.com)



**æ³¨æ„å³è¾¹çš„æ¨é€ï¼Œæˆ‘ä»¬æ‰“æ ‡ç­¾çš„æ—¶å€™è¦æŒ‰ç…§è¿™ä¸ªæ¥æ‰“**

â—â— `commit`æäº¤æ˜¯ç»™æˆ‘ä»¬è‡ªå·±åœ¨æœ¬åœ°çœ‹çš„

+ `-a` ï¼šä½œè€…
+ `-m`ï¼šæäº¤ä¿¡æ¯

```
docker commit -m "dockeræäº¤mysql" 55624332ddc6 smile/mysql:5.7
```



â—â— `tag`æ‰“æ ‡ç­¾æ˜¯æäº¤hubçš„æ ‡å¿—ï¼Œä¸€å®šè¦å’Œè¿œç¨‹çš„ä»“åº“å¯¹åº”ï¼Œå¦åˆ™æäº¤ä¸ä¸Šå»

```bash
docker tag smile/mysql:5.7 3293172751/mysql5.7:5.7
```

+ `3293172751/mysql5.7:5.7`ï¼šåˆ†åˆ«å¯¹åº”æˆ‘è‡ªå·±çš„è´¦æˆ·è¿˜æœ‰ä»“åº“åï¼Œä»¥åŠ`tag`



â—â— æœ€åæ˜¯`push`

```bash
docker push 3293172751/mysql5.7:5.7
```



â—â— è¿œç¨‹è®°å½•

![image-20220923201741572](https://sm.nsddd.top//typora/image-20220923201741572.png?mail:3293172751@qq.com)



### docker desktopä¸Šé¢æ¨é€

![image-20220923201633725](https://sm.nsddd.top//typora/image-20220923201633725.png?mail:3293172751@qq.com)

**åœ¨desktopä¸Šé¢æ²¡æœ‰æ ‡ç­¾æ ‡å¿—ï¼Œè¿˜æ˜¯éœ€è¦æ‰“æ ‡ç­¾çš„ï¼ï¼ï¼**

> å¦‚æœæœ‰æ ‡ç­¾å¯ä»¥ç›´æ¥æ¨é€



## åœ¨Ubuntuä¸Šé¢æ¨é€

ğŸ§ å› ä¸ºæœ€è¿‘éœ€è¦æŠŠç”µè„‘åˆ·æœºï¼Œç„¶ådockeré‡Œé¢çš„æ•°æ®éƒ½éœ€è¦ä¿å­˜ä¸‹æ¥ï¼Œä¸€æ–¹é¢è§‰å¾—æ˜ å°„åˆ°æœ¬åœ°çš„æ–‡ä»¶å¥½éº»çƒ¦ï¼Œå¯ä»¥é€‰æ‹©`push`åˆ°è¿œç¨‹ä»“åº“ã€‚

â— éœ€è¦æäº¤çš„é•œåƒå¦‚ä¸‹ï¼š

```bash
root@ubuntu:~# docker ps
CONTAINER ID   IMAGE              COMMAND                  CREATED        STATUS          PORTS                                              NAMES
84b04bbb5c02   nginx              "/docker-entrypoint.â€¦"   6 days ago     Up 39 seconds   0.0.0.0:3344->80/tcp, :::3344->80/tcp              nginx
846fec372f81   mysql:5.7          "docker-entrypoint.sâ€¦"   7 days ago     Up 39 seconds   0/tcp, 0.0.0.0:3307->3306/tcp, :::3307->3306/tcp   mysql_beifena
f19e7fbc3d18   v2fly/v2fly-core   "/usr/bin/v2ray -conâ€¦"   4 months ago   Up 40 seconds     
```

![image-20220923202155083](https://sm.nsddd.top//typora/image-20220923202155083.png?mail:3293172751@qq.com)



### ç™»é™†

```
docker login
```



## mysqlæˆ‘ä»¬å¯ä»¥æäº¤åˆ°åŒä¸€ä¸ªä»“åº“ï¼Œä½†æ˜¯æ¢ä¸ªtag



â—â— `push` åˆ°æœ¬åœ°

```
docker commit -m "commit mysql:5.7 ubuntu" -a "xiongxinwei" 846fec372f81 xiongxinwei/mysql:5.7 
```



â—â— `tag`æ‰“æ ‡ç­¾

> æˆ‘ä»¬æŠŠæ ‡ç­¾æ”¹ä¸ºubuntuï¼Œè¿™æ ·çš„è¯è¾¨è¯†åº¦é«˜ï¼Œè€Œä¸”ä¸éœ€è¦åˆ›å»ºå¤šä¸ªä»“åº“

```
docker tag xiongxinwei/mysql:5.7 3293172751/mysql5.7:ubuntu
```



â—â— `push`æ¨é€

```
docker push  3293172751/mysql5.7:ubuntu
```

