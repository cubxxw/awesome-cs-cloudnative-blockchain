+ [author](http://nsddd.top)

# ç¬¬9èŠ‚ Pod

<div><a href = '8.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '10.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>

> â¤ï¸ğŸ’•ğŸ’•æ–°æ—¶ä»£æ‹¥æŠ±äº‘åŸç”Ÿï¼Œäº‘åŸç”Ÿå…·æœ‰ç¯å¢ƒç»Ÿä¸€ã€æŒ‰éœ€ä»˜è´¹ã€å³å¼€å³ç”¨ã€ç¨³å®šæ€§å¼ºç‰¹ç‚¹ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)

---
[[toc]]

[TOC]

## ç†è§£Pod

> ä»€ä¹ˆæ˜¯podï¼Ÿ
>
> ![img](http://sm.nsddd.top/sm981878-20181221191353859-412884495.png)

podæ˜¯**è¿è¡Œä¸­çš„ä¸€ç»„å®¹å™¨**ï¼Œpodæ˜¯kubernetesä¸­åº”ç”¨çš„æœ€å°å•ä½ã€‚



> ä»€ä¹ˆæ˜¯CRIï¼Ÿï¼ˆcontainer runtime interfaceï¼‰

æˆ–è®¸ä½ å¯ä»¥ç†è§£æ˜¯dockerï¼Œ**CRIå°±æ˜¯å®¹å™¨è¿è¡Œæ—¶çš„ç¯å¢ƒ**ã€‚æˆ‘ä»¬å¼€å‘çš„åº”ç”¨å°±èƒ½ä»¥å®¹å™¨åŒ–çš„æ–¹å¼è¿è¡Œ~



::: tip 
ğŸ’¡ é‚£ä¹ˆk8sä¸ºäº†ç®¡ç†æ–¹ä¾¿ï¼Œåˆå°è£…äº†podï¼Œæ‰€ä»¥è¯´podæ˜¯å®¹å™¨è¿è¡Œçš„æœ€å°å•ä½~

+ æ¯ä¸€ä¸ªå®¹å™¨å°è£…æˆä¸€ä¸ªpod
+ æ¯ä¸ªpodå¯èƒ½æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨ï¼Œä½†æ˜¯ä¹Ÿç§°ä¹‹ä¸ºä¸€ç»„å®¹å™¨

> podæ˜¯å¯ä»¥æœ‰å¤šä¸ªå®¹å™¨çš„ï¼Œè€Œä¸”ç»„æˆåŸå­ï¼Œè¿™ä¸ªæ˜¯å’Œå®¹å™¨çš„åŒºåˆ«~

:::



âš¡ æè¿°æŸä¸€ä¸ªpodæ˜¯å¦‚ä½•è¿è¡Œçš„

```bash
kubectl describe pod my-nginx-7fb96c846b-m9rjp
```



::: details å±•å¼€æŸ¥çœ‹è¯¦æƒ…ğŸ’¡ 

```bash
[root@k8s-master03 ~]# kubectl get pod
NAME                        READY   STATUS    RESTARTS      AGE
my-nginx-7fb96c846b-cnhbz   1/1     Running   2 (92m ago)   38h
my-nginx-7fb96c846b-g55km   1/1     Running   2 (92m ago)   38h
my-nginx-7fb96c846b-m9rjp   1/1     Running   2 (92m ago)   38h
[root@k8s-master03 ~]# kubectl describe pod my-nginx-7fb96c846b-m9rjp
Name:             my-nginx-7fb96c846b-m9rjp
Namespace:        default
Priority:         0
Service Account:  default
Node:             k8s-master03/192.168.0.4
Start Time:       Thu, 20 Oct 2022 22:05:22 +0800
Labels:           app=nginx
                  pod-template-hash=7fb96c846b
Annotations:      cni.projectcalico.org/containerID: 66626e89ebcb580eeef3f2e75d7d860fe14ee213458642f7b25a860e164ea9a3
                  cni.projectcalico.org/podIP: 100.66.195.18/32
                  cni.projectcalico.org/podIPs: 100.66.195.18/32
Status:           Running
IP:               100.66.195.18
IPs:
  IP:           100.66.195.18
Controlled By:  ReplicaSet/my-nginx-7fb96c846b
Containers:
  nginx:
    Container ID:   containerd://85c401a1bca6531519ad09b539ee57bb2b508b370d71053926a1df0b5421597e
    Image:          nginx:1.14.2
    Image ID:       docker.io/library/nginx@sha256:f7988fb6c02e0ce69257d9bd9cf37ae20a60f1df7563c3a2a6abe24160306b8d
    Port:           80/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Sat, 22 Oct 2022 11:27:59 +0800
    Last State:     Terminated
      Reason:       Unknown
      Exit Code:    255
      Started:      Fri, 21 Oct 2022 11:10:13 +0800
      Finished:     Sat, 22 Oct 2022 11:27:01 +0800
    Ready:          True
    Restart Count:  2
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-x77br (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  kube-api-access-x77br:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   BestEffort
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:                      <none>
```

:::



**æˆ‘ä»¬åªè¦çœ‹`Events`å°±å¥½äº†~**

å¯ä»¥æŸ¥çœ‹çŠ¶æ€å’ŒåŸå› ï¼Œå¯ä»¥å»æ’æŸ¥äº‹æ•…åŸå› 



### Pod çŠ¶æ€

| çŠ¶æ€      | æè¿°                                                    | åŸå›                                                          |
| --------- | ------------------------------------------------------- | ------------------------------------------------------------ |
| Pending   | Podå·²è¢«Kubernetesç³»ç»Ÿæ¥å—ï¼Œä½†å°šæœªè¢«è°ƒåº¦åˆ°èŠ‚ç‚¹ä¸Šè¿è¡Œ     | Podæ­£åœ¨ç­‰å¾…è°ƒåº¦åˆ°èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚å¯èƒ½æ˜¯ç”±äºèŠ‚ç‚¹èµ„æºä¸è¶³ï¼Œæˆ–è€…Podå®šä¹‰ä¸­çš„æ§åˆ¶å™¨æ­£åœ¨ç­‰å¾…å…¶ä»–Podå…ˆå¯åŠ¨ã€‚ |
| Running   | Podæ­£åœ¨æ­£å¸¸è¿è¡Œ                                         | Podå·²è¢«è°ƒåº¦åˆ°èŠ‚ç‚¹ä¸Šï¼Œå¹¶ä¸”å®¹å™¨æ­£åœ¨è¿è¡Œã€‚                      |
| Succeeded | Podä¸­çš„æ‰€æœ‰å®¹å™¨éƒ½å·²æˆåŠŸè¿è¡Œå¹¶å·²é€€å‡º                     | æ‰€æœ‰å®¹å™¨éƒ½å·²æˆåŠŸå®Œæˆï¼Œå¹¶ä¸”å·²è¾¾åˆ°å…¶é¢„æœŸçš„çŠ¶æ€ã€‚               |
| Failed    | Podä¸­çš„æ‰€æœ‰å®¹å™¨éƒ½å·²é€€å‡ºï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨å› é”™è¯¯è€Œé€€å‡º | æ‰€æœ‰å®¹å™¨éƒ½å·²é€€å‡ºï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨å·²å¤±è´¥ã€‚                 |
| Unknown   | æ— æ³•ç¡®å®šPodçš„çŠ¶æ€                                       | Kubernetesæ— æ³•ç¡®å®šPodçš„çŠ¶æ€ã€‚å¯èƒ½æ˜¯ç”±äºä¸Podç›¸å…³çš„èŠ‚ç‚¹ï¼ˆnodeï¼‰å¤±å»è”ç³»ã€‚ |

**ä¸€èˆ¬å‡ºç° Failed çš„åŸå› éƒ½æ˜¯ç”±äº å®¹å™¨è¿è¡Œå¼‚å¸¸é€€å‡ºæˆ–è€…æ˜¯è¢«ç³»ç»Ÿç»ˆæ­¢æ‰äº†ã€‚**



### Pod çš„é‡å¯ç­–ç•¥

åœ¨ Kubernetes ä¸­ï¼Œå¯ä»¥ä¸º pod è®¾ç½®ä¸‰ç§ä¸åŒçš„é‡å¯ç­–ç•¥:

+ **Always**ï¼šæ— è®ºå…¶ä¸­çš„å®¹å™¨é€€å‡ºä»£ç å¦‚ä½•ï¼Œpod éƒ½å°†å§‹ç»ˆé‡æ–°å¯åŠ¨ã€‚
+ **OnFailure**ï¼šä»…å½“å…¶ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä»¥éé›¶é€€å‡ºä»£ç é€€å‡ºæ—¶ï¼Œpod æ‰ä¼šé‡æ–°å¯åŠ¨ã€‚
+ **Never**ï¼šå³ä½¿å…¶ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä»¥éé›¶é€€å‡ºä»£ç é€€å‡ºï¼Œpod ä¹Ÿæ°¸è¿œä¸ä¼šé‡æ–°å¯åŠ¨ã€‚

è¦ä¸º pod è®¾ç½®é‡å¯ç­–ç•¥ï¼Œéœ€è¦åœ¨ pod çš„ YAML æ–‡ä»¶ä¸­æŒ‡å®š `spec.restartPolicy` å­—æ®µã€‚ä¾‹å¦‚ï¼Œè¦å°†é‡å¯ç­–ç•¥è®¾ç½®ä¸º `OnFailure`ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ YAMLï¼š

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  restartPolicy: OnFailure
  containers:
  - name: my-container
    image: my-image
```



### Pod ä¸­å¥åº·æ£€æŸ¥

åœ¨ Kubernetes ä¸­ï¼Œå¯ä»¥ä¸º Pod é…ç½®ä»¥ä¸‹ä¸‰ç§ç±»å‹çš„å¥åº·æ£€æŸ¥ï¼š

+ **livenessProbe**ï¼šæ£€æŸ¥å®¹å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œã€‚å¦‚æœå®¹å™¨æ²¡æœ‰è¿è¡Œï¼Œåˆ™ kubelet å°†æ ¹æ® Pod çš„é‡å¯ç­–ç•¥é‡å¯å®¹å™¨ã€‚
+ **readinessProbe**ï¼šæ£€æŸ¥å®¹å™¨æ˜¯å¦å·²å‡†å¤‡å¥½æ¥æ”¶æµé‡ã€‚å¦‚æœå®¹å™¨æ²¡æœ‰å‡†å¤‡å¥½ï¼Œåˆ™ kube-proxy å°†åœ¨å…¶æ‰€åœ¨çš„èŠ‚ç‚¹ä¸Šä» Service çš„ Endpoint ä¸­åˆ é™¤å®ƒã€‚
+ **startupProbe**ï¼šæ£€æŸ¥å®¹å™¨æ˜¯å¦å·²ç»å®Œæˆäº†å¯åŠ¨è¿‡ç¨‹ã€‚å¦‚æœå®¹å™¨å·²ç»å®Œæˆäº†å¯åŠ¨è¿‡ç¨‹ï¼Œåˆ™ kubelet å°†å¼€å§‹è¿›è¡Œ livenessProbe å’Œ readinessProbe æ£€æŸ¥ã€‚

è¦ä¸ºå®¹å™¨é…ç½®è¿™äº›æ£€æŸ¥ï¼Œéœ€è¦åœ¨ Pod çš„ YAML æ–‡ä»¶ä¸­ä¸ºå®¹å™¨æŒ‡å®š `livenessProbe`ã€`readinessProbe` å’Œ `startupProbe` å­—æ®µã€‚ä¾‹å¦‚ï¼Œè¦ä¸ºå®¹å™¨ `my-container` é…ç½® livenessProbe å’Œ readinessProbeï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ YAMLï¼š

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  containers:
  - name: my-container
    image: my-image
    livenessProbe:
      tcpSocket:
        port: 8080
      initialDelaySeconds: 15
      periodSeconds: 20
    readinessProbe:
      httpGet:
        path: /healthz
        port: 8080
        httpHeaders:
        - name: X-Custom-Header
          value: Awesome
      initialDelaySeconds: 5
      periodSeconds: 10
```

**åœ¨å¹³å¸¸çš„ä½¿ç”¨ä¸­ï¼Œå»ºè®®å¯¹å…¨éƒ¨çš„æœåŠ¡åŒæ—¶è®¾ç½® readiness å’Œ liveness çš„å¥åº·æ£€æŸ¥ã€‚**



## åˆ é™¤pod

::: tip ç”±äºk8sçš„æ¦‚å¿µå¾ˆå¤šï¼Œåˆ é™¤éœ€è¦æŒ‡å®šæ¦‚å¿µ

+ æŒ‡å®šå‘½åç©ºé—´ï¼Œä¸æŒ‡å®šæ˜¯é»˜è®¤
+ æŒ‡å®šåˆ é™¤`pod`

```bash
kubectl delete pod mypodName -n xxxNamespace
```

:::



## ç®¡ç†å¯¹è±¡çš„ä¸¤ç§æ–¹å¼

### å‘½ä»¤è¡ŒæŒ‡ä»¤

ä½¿ç”¨ `kubectl` å‘½ä»¤æ¥åˆ›å»ºå’Œç®¡ç† `kubernetes` å¯¹è±¡

ç®€å•ã€é«˜æ•ˆå¿«é€Ÿä½†æ˜¯åŠŸèƒ½æœ‰é™ï¼Œæ“ä½œä¸å®¹æ˜“è¿½æº¯ï¼Œå¤šç”¨äºå¼€å‘å’Œè°ƒè¯•ã€‚



### å£°æ˜å¼é…ç½®

`kubernetes` ä½¿ç”¨ `yaml` æ–‡ä»¶æ¥æè¿° `kubernetes` å¯¹è±¡

å£°æ˜å¼é…ç½®å°±å¥½æ¯”ç”³è¯·è¡¨ï¼Œå­¦ä¹ éš¾åº¦å¤§è€Œä¸”é…ç½®éº»çƒ¦

å¥½å¤„æ˜¯æ“ä½œç•™ç—•è¿¹ï¼Œé€‚åˆæ“ä½œå¤æ‚çš„å¯¹è±¡ï¼Œå¤šç”¨äºç”Ÿäº§





## yaml è¯­æ³•ä»‹ç»

+ https://yaml.org/

YAML è¯­è¨€åˆ›å»ºäº 2001 å¹´ï¼Œæ¯” XML æ™šäº†ä¸‰å¹´ã€‚XML ä½ åº”è¯¥çŸ¥é“å§ï¼Œå®ƒæ˜¯ä¸€ç§ç±»ä¼¼ HTML çš„æ ‡ç­¾å¼è¯­è¨€ï¼Œæœ‰å¾ˆå¤šç¹æ–‡ç¼›èŠ‚ã€‚è€Œ YAML è™½ç„¶åœ¨åå­—ä¸Šæ¨¡ä»¿äº† XMLï¼Œä½†å®è´¨ä¸Šä¸ XML å®Œå…¨ä¸åŒï¼Œæ›´é€‚åˆäººç±»é˜…è¯»ï¼Œè®¡ç®—æœºè§£æèµ·æ¥ä¹Ÿå¾ˆå®¹æ˜“ã€‚

YAML æ˜¯ JSON çš„ **è¶…é›†**ï¼Œæ”¯æŒæ•´æ•°ã€æµ®ç‚¹æ•°ã€å¸ƒå°”ã€å­—ç¬¦ä¸²ã€æ•°ç»„å’Œå¯¹è±¡ç­‰æ•°æ®ç±»å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»»ä½•åˆæ³•çš„ JSON æ–‡æ¡£ä¹Ÿéƒ½æ˜¯ YAML æ–‡æ¡£ï¼Œå¦‚æœä½ äº†è§£ JSONï¼Œé‚£ä¹ˆå­¦ä¹  YAML ä¼šå®¹æ˜“å¾ˆå¤šã€‚



### yaml è¯­æ³•

+ ç¼©è¿›ä»£è¡¨ä¸Šä¸‹çº§å…³ç³»
+ ç¼©è¿›æ—¶ä½¿ç”¨ç©ºæ ¼ï¼Œä¸è¦ä½¿ç”¨tabï¼Œé€šå¸¸ä½¿ç”¨2ä¸ªç©ºæ ¼
+ ä½¿ç”¨åŒå¼•å·ï¼Œä¸è¦ä½¿ç”¨å•å¼•å·
+ `:` é”®å€¼å¯¹çš„åˆ†éš”ç¬¦ï¼Œå‰é¢ä¸è¦æœ‰ç©ºæ ¼ï¼Œåé¢è¦æœ‰ç©ºæ ¼
+ `-` æ•°ç»„çš„åˆ†éš”ç¬¦ï¼Œå‰åéƒ½è¦æœ‰ç©ºæ ¼
+ `#` æ³¨é‡Šï¼Œåé¢è¦æœ‰ç©ºæ ¼
+ `|` å¤šè¡Œæ–‡æœ¬ï¼Œåé¢è¦æœ‰ç©ºæ ¼ï¼Œåé¢å¯ä»¥æœ‰æ¢è¡Œ
+ `>` å¤šè¡Œæ–‡æœ¬ï¼Œåé¢è¦æœ‰ç©ºæ ¼
+ `---` yamlæ–‡ä»¶çš„åˆ†éš”ç¬¦ï¼Œå‰åéƒ½è¦æœ‰ç©ºæ ¼



### å¦‚ä½•ç¼–å†™ yaml

+ [å®˜æ–¹å›ç­”](https://kubernetes.io/docs/reference/kubernetes-api/)

ç¬¬ä¸€ä¸ªæŠ€å·§å…¶å®å‰é¢å·²ç»è¯´è¿‡äº†ï¼Œå°±æ˜¯ kubectl api-resources å‘½ä»¤ï¼Œå®ƒä¼šæ˜¾ç¤ºå‡ºèµ„æºå¯¹è±¡ç›¸åº”çš„ API ç‰ˆæœ¬å’Œç±»å‹ï¼Œæ¯”å¦‚ Pod çš„ç‰ˆæœ¬æ˜¯â€œv1â€ï¼ŒIngress çš„ç‰ˆæœ¬æ˜¯â€œnetworking.k8s.io/v1â€ï¼Œç…§ç€å®ƒå†™ç»å¯¹ä¸ä¼šé”™ã€‚

```
kubectl api-resources
```

ç¬¬äºŒä¸ªæŠ€å·§ï¼Œæ˜¯å‘½ä»¤ kubectl explainï¼Œå®ƒç›¸å½“äºæ˜¯ Kubernetes è‡ªå¸¦çš„ API æ–‡æ¡£ï¼Œä¼šç»™å‡ºå¯¹è±¡å­—æ®µçš„è¯¦ç»†è¯´æ˜ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸å¿…å»ç½‘ä¸ŠæŸ¥æ‰¾äº†ã€‚æ¯”å¦‚æƒ³è¦çœ‹ Pod é‡Œçš„å­—æ®µè¯¥æ€ä¹ˆå†™ï¼Œå°±å¯ä»¥è¿™æ ·ï¼š

```bash
kubectl explain pod
kubectl explain pod.metadata
kubectl explain pod.spec
kubectl explain pod.spec.containers
```

ä¸è¿‡æˆ‘ä»¬è¿˜å¯ä»¥è®© kubectl ä¸ºæˆ‘ä»¬â€œä»£åŠ³â€ï¼Œç”Ÿæˆä¸€ä»½â€œæ–‡æ¡£æ ·æ¿â€ï¼Œå…å»æˆ‘ä»¬æ‰“å­—å’Œå¯¹é½æ ¼å¼çš„å·¥ä½œã€‚è¿™ç¬¬ä¸‰ä¸ªæŠ€å·§å°±æ˜¯ kubectl çš„ä¸¤ä¸ªç‰¹æ®Šå‚æ•° `--dry-run=client` å’Œ `-o yaml`ï¼Œå‰è€…æ˜¯ç©ºè¿è¡Œï¼Œåè€…æ˜¯ç”Ÿæˆ YAML æ ¼å¼ï¼Œç»“åˆèµ·æ¥ä½¿ç”¨å°±ä¼šè®© kubectl ä¸ä¼šæœ‰å®é™…çš„åˆ›å»ºåŠ¨ä½œï¼Œè€Œåªç”Ÿæˆ YAML æ–‡ä»¶ã€‚

ä¾‹å¦‚ï¼Œæƒ³è¦ç”Ÿæˆä¸€ä¸ª Pod çš„ YAML æ ·æ¿ç¤ºä¾‹ï¼Œå¯ä»¥åœ¨ kubectl run åé¢åŠ ä¸Šè¿™ä¸¤ä¸ªå‚æ•°ï¼š

```bash
kubectl run ngx --image=nginx:alpine --dry-run=client -o yaml
```

å°±ä¼šç”Ÿæˆä¸€ä¸ªç»å¯¹æ­£ç¡®çš„ YAML æ–‡ä»¶ï¼š

```yaml
apiVersion: v1
kind: Pod
metadata:
  creationTimestamp: null
  labels:
    run: ngx
  name: ngx
spec:
  containers:
  - image: nginx:alpine
    name: ngx
    resources: {}
  dnsPolicy: ClusterFirst
  restartPolicy: Always
status: {}
```

æ¥ä¸‹æ¥ä½ è¦åšçš„ï¼Œå°±æ˜¯æŸ¥é˜…å¯¹è±¡çš„è¯´æ˜æ–‡æ¡£ï¼Œæ·»åŠ æˆ–è€…åˆ é™¤å­—æ®µæ¥å®šåˆ¶è¿™ä¸ª YAML äº†ã€‚

è¿™ä¸ªå°æŠ€å·§è¿˜å¯ä»¥å†è¿›åŒ–ä¸€ä¸‹ï¼ŒæŠŠè¿™æ®µå‚æ•°å®šä¹‰æˆ Shell å˜é‡ï¼ˆåå­—ä»»æ„ï¼Œæ¯”å¦‚`$do/$go`ï¼Œè¿™é‡Œç”¨çš„æ˜¯`$out`ï¼‰ï¼Œç”¨èµ·æ¥ä¼šæ›´çœäº‹ï¼Œæ¯”å¦‚ï¼š

```bash
export out="--dry-run=client -o yaml"
kubectl run ngx --image=nginx:alpine $out
```



## ç¦»çº¿ä»»åŠ¡

æˆ‘ä»¬åœ¨åé¢ä¼šçŸ¥é“ Kubernetes ä¸­çš„ç¦»çº¿ä»»åŠ¡æ„å‘³ç€ä»€ä¹ˆã€‚

ä¸Šæ¬¡è¯¾è®² Pod çš„æ—¶å€™æˆ‘ä»¬è¿è¡Œäº†ä¸¤ä¸ª Podï¼šNginx å’Œ busyboxï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨äº† Kubernetes é‡Œçš„ä¸¤å¤§ç±»ä¸šåŠ¡ã€‚ä¸€ç±»æ˜¯åƒ Nginx è¿™æ ·é•¿æ—¶é—´è¿è¡Œçš„â€œåœ¨çº¿ä¸šåŠ¡â€ï¼Œå¦ä¸€ç±»æ˜¯åƒ busybox è¿™æ ·çŸ­æ—¶é—´è¿è¡Œçš„â€œç¦»çº¿ä¸šåŠ¡â€ã€‚

â€œåœ¨çº¿ä¸šåŠ¡â€ç±»å‹çš„åº”ç”¨æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ Nginxã€Node.jsã€MySQLã€Redis ç­‰ç­‰ï¼Œä¸€æ—¦è¿è¡Œèµ·æ¥åŸºæœ¬ä¸Šä¸ä¼šåœï¼Œä¹Ÿå°±æ˜¯æ°¸è¿œåœ¨çº¿ã€‚

è€Œâ€œç¦»çº¿ä¸šåŠ¡â€ç±»å‹çš„åº”ç”¨ä¹Ÿå¹¶ä¸å°‘è§ï¼Œå®ƒä»¬ä¸€èˆ¬ä¸ç›´æ¥æœåŠ¡äºå¤–éƒ¨ç”¨æˆ·ï¼Œåªå¯¹å†…éƒ¨ç”¨æˆ·æœ‰æ„ä¹‰ï¼Œæ¯”å¦‚æ—¥å¿—åˆ†æã€æ•°æ®å»ºæ¨¡ã€è§†é¢‘è½¬ç ç­‰ç­‰ï¼Œè™½ç„¶è®¡ç®—é‡å¾ˆå¤§ï¼Œä½†åªä¼šè¿è¡Œä¸€æ®µæ—¶é—´ã€‚â€œç¦»çº¿ä¸šåŠ¡â€çš„ç‰¹ç‚¹æ˜¯å¿…å®šä¼šé€€å‡ºï¼Œä¸ä¼šæ— æœŸé™åœ°è¿è¡Œä¸‹å»ï¼Œæ‰€ä»¥å®ƒçš„è°ƒåº¦ç­–ç•¥ä¹Ÿå°±ä¸â€œåœ¨çº¿ä¸šåŠ¡â€å­˜åœ¨å¾ˆå¤§çš„ä¸åŒï¼Œéœ€è¦è€ƒè™‘è¿è¡Œè¶…æ—¶ã€çŠ¶æ€æ£€æŸ¥ã€å¤±è´¥é‡è¯•ã€è·å–è®¡ç®—ç»“æœç­‰ç®¡ç†äº‹é¡¹ã€‚

> â€œç¦»çº¿ä¸šåŠ¡â€ä¹Ÿå¯ä»¥åˆ†ä¸ºä¸¤ç§ã€‚ä¸€ç§æ˜¯â€œä¸´æ—¶ä»»åŠ¡â€ï¼Œè·‘å®Œå°±å®Œäº‹äº†ï¼Œä¸‹æ¬¡æœ‰éœ€æ±‚äº†è¯´ä¸€å£°å†é‡æ–°å®‰æ’ï¼›å¦ä¸€ç§æ˜¯â€œå®šæ—¶ä»»åŠ¡â€ï¼Œå¯ä»¥æŒ‰æ—¶æŒ‰ç‚¹å‘¨æœŸè¿è¡Œï¼Œä¸éœ€è¦è¿‡å¤šå¹²é¢„ã€‚

å¯¹åº”åˆ° Kubernetes é‡Œï¼Œâ€œä¸´æ—¶ä»»åŠ¡â€å°±æ˜¯ API å¯¹è±¡ Jobï¼Œâ€œå®šæ—¶ä»»åŠ¡â€å°±æ˜¯ API å¯¹è±¡ CronJobï¼Œä½¿ç”¨è¿™ä¸¤ä¸ªå¯¹è±¡ä½ å°±èƒ½å¤Ÿåœ¨ Kubernetes é‡Œè°ƒåº¦ç®¡ç†ä»»æ„çš„ç¦»çº¿ä¸šåŠ¡äº†ã€‚



### å¦‚ä½•ä½¿ç”¨ YAML æè¿° Job

æ¯”å¦‚ç”¨ busybox åˆ›å»ºä¸€ä¸ªâ€œecho-jobâ€ï¼Œå‘½ä»¤å°±æ˜¯è¿™æ ·çš„ï¼š

```bash
export out="--dry-run=client -o yaml"              # å®šä¹‰Shellå˜é‡
kubectl create job echo-job --image=busybox $out
```

ä¼šç”Ÿæˆä¸€ä¸ªåŸºæœ¬çš„ YAML æ–‡ä»¶ï¼Œä¿å­˜ä¹‹ååšç‚¹ä¿®æ”¹ï¼Œå°±æœ‰äº†ä¸€ä¸ª Job å¯¹è±¡ï¼š

```yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: echo-job

spec:
  template:
    spec:
      restartPolicy: OnFailure
      containers:
      - image: busybox
        name: echo-job
        imagePullPolicy: IfNotPresent
        command: ["/bin/echo"]
        args: ["hello", "world"]
```

ä½ ä¼šæ³¨æ„åˆ° Job çš„æè¿°ä¸ Pod å¾ˆåƒï¼Œä½†åˆæœ‰äº›ä¸ä¸€æ ·ï¼Œä¸»è¦çš„åŒºåˆ«å°±åœ¨â€œspecâ€å­—æ®µé‡Œï¼Œå¤šäº†ä¸€ä¸ª template å­—æ®µï¼Œç„¶ååˆæ˜¯ä¸€ä¸ªâ€œspecâ€ï¼Œæ˜¾å¾—æœ‰ç‚¹æ€ªã€‚

å¦‚æœä½ ç†è§£äº†åˆšæ‰è¯´çš„é¢å‘å¯¹è±¡è®¾è®¡æ€æƒ³ï¼Œå°±ä¼šæ˜ç™½è¿™ç§åšæ³•çš„é“ç†ã€‚å®ƒå…¶å®å°±æ˜¯åœ¨ Job å¯¹è±¡é‡Œåº”ç”¨äº†ç»„åˆæ¨¡å¼ï¼Œtemplate å­—æ®µå®šä¹‰äº†ä¸€ä¸ªâ€œåº”ç”¨æ¨¡æ¿â€ï¼Œé‡Œé¢åµŒå…¥äº†ä¸€ä¸ª Podï¼Œè¿™æ · Job å°±å¯ä»¥ä»è¿™ä¸ªæ¨¡æ¿æ¥åˆ›å»ºå‡º Podã€‚

è€Œè¿™ä¸ª Pod å› ä¸ºå— Job çš„ç®¡ç†æ§åˆ¶ï¼Œä¸ç›´æ¥å’Œ apiserver æ‰“äº¤é“ï¼Œä¹Ÿå°±æ²¡å¿…è¦é‡å¤ apiVersion ç­‰â€œå¤´å­—æ®µâ€ï¼Œåªéœ€è¦å®šä¹‰å¥½å…³é”®çš„ specï¼Œæè¿°æ¸…æ¥šå®¹å™¨ç›¸å…³çš„ä¿¡æ¯å°±å¯ä»¥äº†ï¼Œå¯ä»¥è¯´æ˜¯ä¸€ä¸ªâ€œæ— å¤´â€çš„ Pod å¯¹è±¡ã€‚

ä¸ºäº†è¾…åŠ©ä½ ç†è§£ï¼Œæˆ‘æŠŠ Job å¯¹è±¡é‡æ–°ç»„ç»‡äº†ä¸€ä¸‹ï¼Œç”¨ä¸åŒçš„é¢œè‰²æ¥åŒºåˆ†å­—æ®µï¼Œè¿™æ ·ä½ å°±èƒ½å¤Ÿå¾ˆå®¹æ˜“çœ‹å‡ºæ¥ï¼Œå…¶å®è¿™ä¸ªâ€œecho-jobâ€é‡Œå¹¶æ²¡æœ‰å¤ªå¤šé¢å¤–çš„åŠŸèƒ½ï¼Œåªæ˜¯æŠŠ Pod åšäº†ä¸ªç®€å•çš„åŒ…è£…ï¼š

![image-20230313231329255](http://sm.nsddd.top/sm202303132320813.png)

æ€»çš„æ¥è¯´ï¼Œè¿™é‡Œçš„ Pod å·¥ä½œéå¸¸ç®€å•ï¼Œåœ¨ containers é‡Œå†™å¥½åå­—å’Œé•œåƒï¼Œcommand æ‰§è¡Œ `/bin/echo`ï¼Œè¾“å‡ºâ€œhello worldâ€ã€‚

ä¸è¿‡ï¼Œå› ä¸º Job ä¸šåŠ¡çš„ç‰¹æ®Šæ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦åœ¨ spec é‡Œå¤šåŠ ä¸€ä¸ªå­—æ®µ `restartPolicy`ï¼Œç¡®å®š Pod è¿è¡Œå¤±è´¥æ—¶çš„ç­–ç•¥ï¼Œ**OnFailure æ˜¯å¤±è´¥åŸåœ°é‡å¯å®¹å™¨ï¼Œè€Œ Never åˆ™æ˜¯ä¸é‡å¯å®¹å™¨**ï¼Œè®© Job å»é‡æ–°è°ƒåº¦ç”Ÿæˆä¸€ä¸ªæ–°çš„ Podã€‚



### å¦‚ä½•åœ¨ Kubernetes é‡Œæ“ä½œ Job

ç°åœ¨è®©æˆ‘ä»¬æ¥åˆ›å»º Job å¯¹è±¡ï¼Œè¿è¡Œè¿™ä¸ªç®€å•çš„ç¦»çº¿ä½œä¸šï¼Œç”¨çš„å‘½ä»¤è¿˜æ˜¯ kubectl applyï¼š

```bash
kubectl apply -f job.yml
```



æŸ¥çœ‹ï¼š

```bash
kubectl get job
kubectl get pod
NAME       COMPLETIONS   DURATION   AGE
echo-job   0/1           5s         5s
NAME             READY   STATUS    RESTARTS   AGE
echo-job-tl75m   0/1     Pending   0          5skubectl get job
kubectl get pod
NAME       COMPLETIONS   DURATION   AGE
echo-job   0/1           5s         5s
NAME             READY   STATUS    RESTARTS   AGE
echo-job-tl75m   0/1     Pending   0          5s
```

å¯ä»¥çœ‹åˆ°ï¼Œå› ä¸º Pod è¢« Job ç®¡ç†ï¼Œå®ƒå°±ä¸ä¼šåå¤é‡å¯æŠ¥é”™äº†ï¼Œè€Œæ˜¯ä¼šæ˜¾ç¤ºä¸º Completed è¡¨ç¤ºä»»åŠ¡å®Œæˆï¼Œè€Œ Job é‡Œä¹Ÿä¼šåˆ—å‡ºè¿è¡ŒæˆåŠŸçš„ä½œä¸šæ•°é‡ï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ªä½œä¸šï¼Œæ‰€ä»¥å°±æ˜¯ 1/1ã€‚

ä½ è¿˜å¯ä»¥çœ‹åˆ°ï¼ŒPod è¢«è‡ªåŠ¨å…³è”äº†ä¸€ä¸ªåå­—ï¼Œç”¨çš„æ˜¯ Job çš„åå­—ï¼ˆecho-jobï¼‰å†åŠ ä¸Šä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ï¼ˆpb5ghï¼‰ï¼Œè¿™å½“ç„¶ä¹Ÿæ˜¯ Job ç®¡ç†çš„â€œåŠŸåŠ³â€ï¼Œå…å»äº†æˆ‘ä»¬æ‰‹å·¥å®šä¹‰çš„éº»çƒ¦ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å‘½ä»¤ kubectl logs æ¥è·å– Pod çš„è¿è¡Œç»“æœï¼š







## é…ç½®å¯¹è±¡

**åœ¨åˆ›å»º Kubernetes å¯¹è±¡æ‰€å¯¹åº”çš„ `yaml` æ–‡ä»¶ä¸­ï¼Œéœ€è¦é…ç½®çš„å­—æ®µï¼š**

+ `apiVersion` ï¼šKubernetes API ç‰ˆæœ¬
+ `Kind` ï¼šå¯¹è±¡ç±»åˆ«ï¼Œä¾‹å¦‚ `Pod` ã€`Deployment` 
+ `metadata` ï¼šæè¿°å¯¹è±¡çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬ä¸€ä¸ª name å­—ç¬¦ä¸²ã€UID å’Œ å¯é€‰çš„`namespace`
+ `spec` ï¼šå¯¹è±¡çš„é…ç½®



## é…ç½®æ–‡ä»¶åˆ›å»ºpod

æˆ‘ä»¬æˆ–è®¸å¯ä»¥ç”¨é…ç½®æ–‡ä»¶çš„æ–¹å¼å»åˆ›å»ºä¸€ä¸ªpod~

```bash
[root@k8s-master01 ~]# vim pod.yaml 
[root@k8s-master01 ~]# kubectl apply -f pod.yaml 
```

::: tip yamlåˆ›å»ºpodæ ¼å¼

```yaml
apiVersion: v1
kind: Pod  # èµ„æºç±»å‹
metadata:  
  labels:
    run: myapp
  name: myapp  # podåç§°
spec: # podè¯¦ç»†é…ç½®ä¿¡æ¯
  containers: # å¯åŠ¨ä¸€ä¸ªå®¹å™¨
  - image: nginx # å¯åŠ¨nginx
    name: mynginx
  - image: tomcat:8.5.68
    name: mytomcat
  - image: redis
    name: myredis
```

![image-20221022153945150](http://sm.nsddd.top/smimage-20221022153945150.png)

> å¯èƒ½ä¼šå‡ºç°podçŠ¶æ€å¤„äºContainerCreatingçš„æƒ…å†µï¼Œå¸¸è§çš„åŸå› ä¹‹ä¸€æ˜¯é•œåƒæ‹‰å–å¤±è´¥ã€‚

:::



ğŸ’¡å®¹å™¨çš„åˆ›å»ºè¯¦æƒ…æŸ¥çœ‹å¦‚ä¸‹ï¼š

```bash
kubectl describe pod mynginx
```

::: details âš¡ å±•å¼€æŸ¥çœ‹è¯¦æƒ…

```bash
[root@k8s-master01 ~]# kubectl describe pod mynginx
Name:             mynginx
Namespace:        default
Priority:         0
Service Account:  default
Node:             k8s-master03/192.168.0.4
Start Time:       Sat, 22 Oct 2022 13:20:17 +0800
Labels:           run=mynginx
Annotations:      cni.projectcalico.org/containerID: 9fc6db4dd24c4816b28be43c1f2907c89adea8fadb36fb49844fea42142671e7
                  cni.projectcalico.org/podIP: 100.66.195.25/32
                  cni.projectcalico.org/podIPs: 100.66.195.25/32
Status:           Running
IP:               100.66.195.25
IPs:
  IP:  100.66.195.25
Containers:
  mynginx:
    Container ID:   containerd://69b25d59d551f94e8f7cc659ef3b740765e23673b60f45de7353cfbc13d52420
    Image:          nginx
    Image ID:       docker.io/library/nginx@sha256:5ffb682b98b0362b66754387e86b0cd31a5cb7123e49e7f6f6617690900d20b2
    Port:           <none>
    Host Port:      <none>
    State:          Running
      Started:      Sat, 22 Oct 2022 13:21:13 +0800
    Ready:          True
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-m6rqn (ro)
  myredis:
    Container ID:   containerd://e72e35e2f7dda8d6108a89e98c41da32b4678eab31cf26c8406eeaee5e3ecc3c
    Image:          redis
    Image ID:       docker.io/library/redis@sha256:c95835a74c37b3a784fb55f7b2c211bd20c650d5e55dae422c3caa9c01eb39fa
    Port:           <none>
    Host Port:      <none>
    State:          Running
      Started:      Sat, 22 Oct 2022 13:21:47 +0800
    Ready:          True
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-m6rqn (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  kube-api-access-m6rqn:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   BestEffort
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age   From               Message
  ----    ------     ----  ----               -------
  Normal  Scheduled  113s  default-scheduler  Successfully assigned default/mynginx to k8s-master03
  Normal  Pulling    112s  kubelet            Pulling image "nginx"
  Normal  Pulled     58s   kubelet            Successfully pulled image "nginx" in 54.707721222s
  Normal  Created    57s   kubelet            Created container mynginx
  Normal  Started    57s   kubelet            Started container mynginx
  Normal  Pulling    57s   kubelet            Pulling image "redis"
  Normal  Pulled     23s   kubelet            Successfully pulled image "redis" in 33.819467112s
  Normal  Created    23s   kubelet            Created container myredis
  Normal  Started    23s   kubelet            Started container myredis
```

:::

![image-20221022132504701](http://sm.nsddd.top/smimage-20221022132504701.png)



## å¯è§†åŒ–ç•Œé¢åˆ›å»ºpod

::: danger æ³¨æ„
è¿™ä¸ªæ¿å—å¾…è¡¥å……~ æ¬¢è¿pr
:::



## podæ—¥å¿—

å¥½åƒåªæœ‰podæœ‰æ—¥å¿—æŠŠï¼Ÿ

> å’Œdockerçš„æ—¥å¿—ä¸€æ ·ç”¨æ³•

æˆ‘ä»¬æŸ¥çœ‹podæ—¥å¿—ï¼š

```bash
kubectl logs mynginx
```

![image-20221022133031267](http://sm.nsddd.top/smimage-20221022133031267.png)



âš¡ å¯ä»¥åŠ ä¸Š `-f` è¿½è¸ªå¼æ—¥å¿—

```
kubectl logs -f  mynginx
```

![image-20221022133159587](http://sm.nsddd.top/smimage-20221022133159587.png)



## pod - IP

âš¡ æ¯ä¸ªpod â€“ k8séƒ½ä¼šåˆ†é…ä¸€ä¸ªipï¼Œä½¿ç”¨ä¸‹é¢å‘½ä»¤æŸ¥çœ‹ï¼š

```bash
kubectl get pod -owide
```

![image-20221022150442624](https://sm.nsddd.top/smimage-20221022150442624.png)



## è¿›å…¥podå¹¶ä¿®æ”¹pod

ğŸ—“ï¸ å›å¿†æˆ‘ä»¬dockerä¿®æ”¹å®¹å™¨å†…éƒ¨

```bash
docker exec -it idName #/bin/bash
```



**ä½¿ç”¨K8sè¿›å…¥podå‘½ä»¤ï¼š**

> å’Œdockerå‘½ä»¤å¤§è‡´ä¸€æ ·ï¼Œæ³¨æ„åé¢æœ‰ `â€“`

```bash
kubectl exec -it mynginx -- /bin/bash
```

![image-20221022151001187](http://sm.nsddd.top/smimage-20221022151001187.png)



::: tip å¯è§†åŒ–ç•Œé¢
å¯ä»¥ç›´æ¥è¿›å»k8sçš„å¯è§†åŒ–ç•Œé¢è¿›è¡Œä¿®æ”¹~

:::



## å¤šå®¹å™¨podç»†èŠ‚

::: warning æé†’âš ï¸ 
åœ¨`Kubernetes`ä¸­éƒ¨ç½²åº”ç”¨æ—¶ï¼Œéƒ½æ˜¯ä»¥`pod`è¿›è¡Œè°ƒåº¦çš„ï¼Œå®ƒä»¬åŸºæœ¬ä¸Šæ˜¯å•ä¸ªå®¹å™¨çš„åŒ…è£…æˆ–æˆ¿å­ã€‚ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œå®¹å™¨çš„å®¹å™¨ã€‚ `pod`æ˜¯ä¸€ä¸ªé€»è¾‘åŒ…è£…å®ä½“ï¼Œç”¨äºåœ¨`K8s`é›†ç¾¤ä¸Šæ‰§è¡Œå®¹å™¨ã€‚å¯ä»¥æŠŠæ¯ä¸ª`pod`æƒ³è±¡æˆä¸€ä¸ªé€æ˜çš„åŒ…è£…ï¼Œä¸ºå®¹å™¨æä¾›ä¸€ä¸ªæ’æ§½ã€‚`pod`æ˜¯`Kubernetes`æœ€å°çš„å¯éƒ¨ç½²å•ä½ã€‚`pod`æ˜¯ä¸€ç»„ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ï¼Œå…·æœ‰å…±äº«çš„å­˜å‚¨/ç½‘ç»œèµ„æºï¼Œä»¥åŠå¦‚ä½•è¿è¡Œå®¹å™¨çš„è§„èŒƒã€‚å› æ­¤ï¼Œæœ€ç®€å•åœ°è¯´ï¼Œ`pod`æ˜¯ä¸€ä¸ªå®¹å™¨å¦‚ä½•åœ¨`Kubernetes`ä¸­â€œç”¨èµ·æ¥â€çš„æœºåˆ¶ã€‚

+ podæ˜¯k8sçš„æœ€å°å•å…ƒï¼Œå®¹å™¨åŒ…å«åœ¨podä¸­ï¼Œä¸€ä¸ªpodä¸­æœ‰ä¸€ä¸ªpauseå®¹å™¨å’Œè‹¥å¹²ä¸ªä¸šåŠ¡å®¹å™¨ï¼Œè€Œå®¹å™¨æ˜¯å•ç‹¬çš„ä¸€ä¸ªå®¹å™¨ï¼Œç®€è€Œè¨€ä¹‹ï¼Œpodæ˜¯ä¸€ç»„å®¹å™¨çš„é›†åˆã€‚

+ podç›¸å½“äºé€»è¾‘ä¸»æœºï¼Œæ¯ä¸ªpodéƒ½æœ‰è‡ªå·±çš„ipåœ°å€

+ **podå†…çš„å®¹å™¨å…±äº«ç›¸åŒçš„ipå’Œç«¯å£**

+ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªå®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿä¸å…¶ä»–å®¹å™¨å®Œå…¨éš”ç¦»

+ **podæ˜¯ä¸€ç»„å®¹å™¨ï¼Œä¸€ä¸ªpodä¹Ÿæ˜¯å¯ä»¥éƒ¨ç½²ä¸¤ä¸ªç”šè‡³æ˜¯å¤šä¸ªå®¹å™¨**

:::



## æ›´å¤šå‘½ä»¤

**æ›´å¤šå‘½ä»¤ï¼š**

```bash
# æŸ¥çœ‹å…¨éƒ¨
kubectl get all

# é‡æ–°éƒ¨ç½²
kubectl rollout restart deployment test-k8s

# å‘½ä»¤ä¿®æ”¹é•œåƒï¼Œ--record è¡¨ç¤ºæŠŠè¿™ä¸ªå‘½ä»¤è®°å½•åˆ°æ“ä½œå†å²ä¸­
kubectl set image deployment test-k8s test-k8s=ccr.ccs.tencentyun.com/k8s-tutorial/test-k8s:v2-with-error --record

# æš‚åœè¿è¡Œï¼Œæš‚åœåï¼Œå¯¹ deployment çš„ä¿®æ”¹ä¸ä¼šç«‹åˆ»ç”Ÿæ•ˆï¼Œæ¢å¤åæ‰åº”ç”¨è®¾ç½®
kubectl rollout pause deployment test-k8s

# æ¢å¤
kubectl rollout resume deployment test-k8s

# è¾“å‡ºåˆ°æ–‡ä»¶
kubectl get deployment test-k8s -o yaml >> app2.yaml

# åˆ é™¤å…¨éƒ¨èµ„æº
kubectl delete all --all
```



::: details é—ç•™é—®é¢˜ï¼š

+ æ¯æ¬¡åªèƒ½è®¿é—®ä¸€ä¸ª podï¼Œæ²¡æœ‰è´Ÿè½½å‡è¡¡è‡ªåŠ¨è½¬å‘åˆ°ä¸åŒ pod
+ è®¿é—®è¿˜éœ€è¦ç«¯å£è½¬å‘
+ Pod é‡åˆ›å IP å˜äº†ï¼Œåå­—ä¹Ÿå˜äº†

:::



## END é“¾æ¥

<ul><li><div><a href = '8.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '10.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md) 

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

