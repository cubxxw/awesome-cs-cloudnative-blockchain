+ [author](http://nsddd.top)

# ç¬¬18èŠ‚ åè¯è§£é‡Š

<div><a href = '17.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '19.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>

> â¤ï¸ğŸ’•ğŸ’•è®°å½•[sealos](https://github.com/3293172751/sealos)å¼€æºé¡¹ç›®çš„å­¦ä¹ è¿‡ç¨‹ã€‚[k8s,dockerå’Œäº‘åŸç”Ÿçš„å­¦ä¹ ](https://github.com/3293172751/sealos)ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)

---
[TOC]

## åè¯

::: tip

```go
// /var/lib/sealer/data/my-cluster/pki
func (k *Runtime) getPKIPath() string {
	return filepath.Join(k.infra.GetClusterRootfsPath(), "pki")
}

// /var/lib/sealer/data/my-cluster/pki/etcd
func (k *Runtime) getEtcdCertPath() string {
	return filepath.Join(k.getPKIPath(), "etcd")
}

// /var/lib/sealer/data/my-cluster/rootfs/statics
func (k *Runtime) getStaticFileDir() string {
	return filepath.Join(k.infra.GetClusterRootfsPath(), "statics")
}

// /var/lib/sealer/data/my-cluster/mount/etc/kubeadm.yml
func (k *Runtime) getDefaultKubeadmConfig() string {
	return filepath.Join(k.infra.GetClusterRootfsPath(), "etc", "kubeadm.yml")
}
```

æ³¨é‡Šä¸Šè¯»å–çš„æ˜¯mountè¿‡ç¨‹ä¸­ç”Ÿæˆçš„æ–‡ä»¶è·¯å¾„ï¼Œå®‰è£…è¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ˜¯è¯¥è·¯å¾„ï¼Œåç»­è¿™äº›æ–‡ä»¶è¢«ç§»åŠ¨åˆ°ç›¸åº”ä½ç½®åï¼Œsealeråˆä¼šæ‰§è¡Œunmountç§»å‡ºæŒ‚è½½
:::



`Public Key Infrastructureï¼ˆPKI)` ï¼š ä¸­æ–‡å«åšå…¬å¼€å¯†é’¥åŸºç¡€è®¾æ–½ï¼Œä¹Ÿå°±æ˜¯åˆ©ç”¨å…¬å¼€å¯†é’¥æœºåˆ¶å»ºç«‹èµ·æ¥çš„åŸºç¡€è®¾æ–½ã€‚

> pathï¼š`/var/lib/sealer/data/my-cluster/pki`



`EtcdCert` ï¼šclient certificate ç”¨äºé€šè¿‡æœåŠ¡å™¨éªŒè¯å®¢æˆ·ç«¯ã€‚ä¾‹å¦‚etcdctlï¼Œetcd proxyï¼Œfleetctlæˆ–dockerå®¢æˆ·ç«¯ã€‚
server certificate ç”±æœåŠ¡å™¨ä½¿ç”¨ï¼Œå¹¶ç”±å®¢æˆ·ç«¯éªŒè¯æœåŠ¡å™¨èº«ä»½ã€‚ä¾‹å¦‚dockeræœåŠ¡å™¨æˆ–kube-apiserverã€‚
peer certificate ç”± etcd é›†ç¾¤æˆå‘˜ä½¿ç”¨ï¼Œä¾›å®ƒä»¬å½¼æ­¤ä¹‹é—´é€šä¿¡ä½¿ç”¨ã€‚

> pathï¼š` /var/lib/sealer/data/my-cluster/pki/etcd`

`StaticFile`

> ` /var/lib/sealer/data/my-cluster/rootfs/statics`

`DefaultKubeadmConfig`

> `/var/lib/sealer/data/my-cluster/mount/etc/kubeadm.yml`



`DNS domain`ï¼šåŸŸåæœåŠ¡å™¨





## é…ç½®

```go
const (
	AuditPolicyYml = "audit-policy.yml"
	KubeadmFileYml = "/etc/kubernetes/kubeadm.yaml"
	AdminConf      = "admin.conf"
	ControllerConf = "controller-manager.conf"
	SchedulerConf  = "scheduler.conf"
	KubeletConf    = "kubelet.conf"

	// kube file
	KUBECONTROLLERCONFIGFILE = "/etc/kubernetes/controller-manager.conf"
	KUBESCHEDULERCONFIGFILE  = "/etc/kubernetes/scheduler.conf"
	AdminKubeConfPath        = "/etc/kubernetes/admin.conf"
	StaticPodDir             = "/etc/kubernetes/manifests"
	LvscarePodFileName       = "kube-lvscare.yaml"
)
```

**å¯¹åº”çš„ç›®å½•ï¼š**

```bash
[root@iZbp1evo5cnwagauz3w188Z kubernetes]# pwd;ls -al
/etc/kubernetes
total 48
drwxr-xr-x   4 root root 4096 Nov  9 16:19 .
drwxr-xr-x. 85 root root 4096 Nov 13 12:04 ..
-rw-------   1 root root 5583 Nov  9 16:19 admin.conf
-rw-r--r--   1 root root 3073 Nov  9 16:19 audit-policy.yml
-rw-------   1 root root 5623 Nov  9 16:19 controller-manager.conf
-rw-------   1 root root 1999 Nov  9 16:20 kubelet.conf
drwx------   2 root root 4096 Nov  9 16:19 manifests
drwxr-xr-x   3 root root 4096 Nov  9 16:19 pki
-rw-------   1 root root 5567 Nov  9 16:19 scheduler.conf
```







## END é“¾æ¥

<ul><li><div><a href = '17.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '19.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

