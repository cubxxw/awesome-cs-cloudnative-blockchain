+ [author](http://nsddd.top)

# ç¬¬33èŠ‚ sealos PR 

<div><a href = '32.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '34.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>

> â¤ï¸ğŸ’•ğŸ’•è®°å½•[sealos](https://github.com/cubxxw/sealos)å¼€æºé¡¹ç›®çš„å­¦ä¹ è¿‡ç¨‹ã€‚[k8s,dockerå’Œäº‘åŸç”Ÿçš„å­¦ä¹ ](https://github.com/cubxxw/sealos)ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)

---
[TOC]

# Planning Draft

## Problem Description

#2863

Sealos currently does not support the k3s runtime and requires the redesign of the runtime interface to avoid excessive coupling with the Processor and to add verification.

Here is a record of [testing various k3s installation methods](https://docker.nsddd.top/Cloud-Native-k8s/15.html). If you're curious about k3s, be sure to read [this note](https://docker.nsddd.top/Cloud-Native-k8s/14.html), as well as k3s â€¢ **[official](https://www.rancher.cn/k3s/) and [documentation](https://docs.rancher.cn/)**, and its GitHub â€¢ **[open source address](https://github.com/k3s-io/k3s/)**.

<br>

## Solution

#### Design a new runtime interface

Redesign the runtime interface to avoid excessive coupling with the Processor and add verification.

#### Design ideas for the k3s runtime module

To support the k3s runtime, we need to add a new runtime module. This module needs to support the following functions:

+ Execute k3s installation commands
+ Execute k3s upgrade commands
+ Execute k3s uninstall commands

#### Design the k3s directory and filesystem distribution using Sealos' image distribution logic

To support the k3s runtime, we need to use Sealos' image distribution logic to design the k3s directory and filesystem distribution of the k3s image.

#### Optimize the packaging of kubeadm and k3s binaries

To support the k3s runtime, we need to optimize the packaging of kubeadm and k3s binaries.

#### Provide unit test and CI flow to ensure code quality

To ensure code quality, we need to provide unit testing and CI flow.



<br>

## Tasks

| Type          | Improvements                                                 | Issue        | PR    | Status |
| ------------- | ------------------------------------------------------------ | ------------ | ----- | ------ |
| ğŸš€ Feature     | Design a new runtime interface to avoid excessive coupling with the Processor and add verification | #1943, #2037 |       | âœ…      |
| ğŸ”¨ Enhancement | Implement the k3s runtime module to support k3s installation, upgrade, and uninstall commands |              |       | âŒ      |
| ğŸ”§ Maintenance | Design the k3s directory and filesystem distribution using Sealos' image distribution logic |              |       | âŒ      |
| ğŸ‘Œ Refactoring | Optimize the packaging of kubeadm and k3s binaries           |              |       | âŒ      |
| ğŸ§ª Testing     | Provide unit testing and CI flow to ensure code quality      |              |       | âŒ      |
| ğŸ“ˆ Metrics     | Compare k3s and k0s, as well as Kubernetes for various changes in sealos, for users to choose according to their scenarios |              |       | âŒ      |
| ğŸ¯ Fix         | The current logic of sealos run will parse the environment variable $, which inevitably needs to be fixed. | #2861        | #2862 | âœ…      |







## END é“¾æ¥
<ul><li><div><a href = '32.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '34.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 
