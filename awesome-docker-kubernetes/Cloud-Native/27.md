+ [author](http://nsddd.top)

# ç¬¬27èŠ‚ unshare å’Œ newuidmap 

<div><a href = '26.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '28.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>

> â¤ï¸ğŸ’•ğŸ’•è®°å½•[sealos](https://github.com/3293172751/sealos)å¼€æºé¡¹ç›®çš„å­¦ä¹ è¿‡ç¨‹ã€‚[k8s,dockerå’Œäº‘åŸç”Ÿçš„å­¦ä¹ ](https://github.com/3293172751/sealos)ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)

---
[TOC]

## å¯¹æ¯”

unshare å’Œ newuidmap æ˜¯ Linux çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå®ƒä»¬ä¸»è¦ç”¨äºå®ç°å‘½åç©ºé—´éš”ç¦»ã€‚

+ `unshare`: unshare å…è®¸è¿›ç¨‹åœ¨è¿è¡Œæ—¶åˆ›å»ºå’Œéš”ç¦»æ–°çš„å‘½åç©ºé—´ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ unshare åˆ›å»ºä¸€ä¸ªæ–°çš„ PID å‘½åç©ºé—´ï¼Œä»è€Œä½¿ä¸€ä¸ªè¿›ç¨‹åœ¨æ–°çš„å‘½åç©ºé—´ä¸­è¿è¡Œï¼Œå¹¶ä¸”ä¸åŸæ¥çš„å‘½åç©ºé—´éš”ç¦»ã€‚

+ `newuidmap`: newuidmap å·¥å…·ç”¨äºåœ¨å®¹å™¨ä¸­æ§åˆ¶ç”¨æˆ· ID æ˜ å°„ï¼Œè¿™æ˜¯å®ç°å®¹å™¨çš„å¿…è¦æ­¥éª¤ã€‚åœ¨å®¹å™¨ä¸­ï¼Œéœ€è¦åœ¨ä¸»æœºå’Œå®¹å™¨é—´è¿›è¡Œç”¨æˆ· ID çš„æ˜ å°„ï¼Œä»¥ä¾¿ä½¿å®¹å™¨ä¸­çš„è¿›ç¨‹å…·æœ‰è®¿é—®æ–‡ä»¶ç³»ç»Ÿçš„æƒé™ã€‚

æ€»ä½“æ¥è¯´ï¼Œunshare å¯ä»¥åˆ›å»ºå‘½åç©ºé—´éš”ç¦»ï¼Œè€Œ newuidmap åˆ™ç”¨äºå®ç°å®¹å™¨éš”ç¦»ä¸­çš„ç”¨æˆ· ID æ˜ å°„ã€‚

> **å®ç° sealer å¯¹ buildah å¾—è°ƒç”¨ï¼Œsealer åœ¨ root less æ¨¡å¼ä¸‹çš„æ­£å¸¸æŒ‚è½½ï¼›buildahæ˜¯å¦‚ä½•å¯åŠ¨rootlesså®¹å™¨çš„ã€‚**



## about newuidmap

```bash
 newuidmap - è®¾ç½®ç”¨æˆ·å‘½åç©ºé—´çš„ uid æ˜ å°„
```



## about unshare

**create a new PID:**

```bash
unshare -U bash
```





## runuseer

**runuser - ä½¿ç”¨æ›¿ä»£ç”¨æˆ·å’Œç»„ ID è¿è¡Œå‘½ä»¤**

```bash
 runuser [é€‰é¡¹] -uç”¨æˆ·[[--]å‘½ä»¤[å‚æ•°...]]
 runuser [é€‰é¡¹] [ - ] [ç”¨æˆ·[å‚æ•°...]]
```

å‘½ä»¤*runuser*æ›´æ”¹è¿è¡Œå‘½ä»¤çš„ç”¨æˆ·ã€‚*runuser*ç±»ä¼¼äº[*su*å‘½ä»¤](https://www.baeldung.com/linux/run-as-another-user#using-su)ï¼Œä½†ç•¥æœ‰ä¸åŒã€‚

åªæœ‰*root*ç”¨æˆ·å¯ä»¥è°ƒç”¨*runuser*ã€‚å› æ­¤ï¼Œå®ƒä¸ä¼šæç¤ºè¾“å…¥å¯†ç ã€‚è¿™ç§è¡Œä¸ºéå¸¸é€‚åˆè„šæœ¬ç¼–å†™ï¼Œåœ¨æœ¬æ–‡çš„åé¢éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†ç ”ç©¶å¦‚ä½•å°†å®ƒä¸[*sudo*](https://man7.org/linux/man-pages/man8/sudo.8.html)ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ä¾¿ä¸ºéç‰¹æƒç”¨æˆ·æä¾›å¯¹ç‰¹å®šå‘½ä»¤çš„è®¿é—®æƒé™ã€‚

```bash
[sealer@iZuf68xky083mr0yy6q37lZ ~]$ runuser 
runuser: may not be used by non-root users
```



### æƒé™ç®¡ç†

å°† *runuser*ä¸ [*sudo*](https://www.baeldung.com/linux/sudo-privileges-user)ç»“åˆå¯ä»¥æä¾›å¯¹ç”¨æˆ·æƒé™çš„æ›´ç²¾ç»†æ§åˆ¶ã€‚

æ¥ä¸‹æ¥ï¼Œè®©*baeldung*ä»¥*root*èº«ä»½è¿è¡Œè„šæœ¬ã€‚æˆ‘ä»¬å°†ä½¿ç”¨*sudo*ï¼Œä½†æˆ‘ä»¬ä¹Ÿ[å¯ä»¥ä½¿ç”¨*su*](https://www.baeldung.com/linux/run-as-another-user)ã€‚è®©æˆ‘ä»¬é€šè¿‡ä½¿ç”¨[*visudo*å‘½ä»¤](https://www.baeldung.com/linux/sudo-privileges-user#giving-limited-sudo-access-to-a-user)å°†æ­¤è¡Œæ·»åŠ åˆ°*sudoers*æ–‡ä»¶æ¥æ·»åŠ æƒé™ï¼š

```bash
baeldung ALL=(root) NOPASSWD: /home/baeldung/script.sh
```



### å…³äº rootless çš„é…ç½®é—®é¢˜







## END é“¾æ¥

<ul><li><div><a href = '26.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '28.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

