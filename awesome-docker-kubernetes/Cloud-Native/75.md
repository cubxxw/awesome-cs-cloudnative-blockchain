+ [author](http://nsddd.top)

# ç¬¬75èŠ‚ OpenIM ç¦»çº¿å®‰è£…è®¾è®¡

<div><a href = '74.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '76.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>

> â¤ï¸ğŸ’•ğŸ’•è®°å½•[sealos](https://github.com/cubxxw/sealos)å¼€æºé¡¹ç›®çš„å­¦ä¹ è¿‡ç¨‹ã€‚[k8s,dockerå’Œäº‘åŸç”Ÿçš„å­¦ä¹ ](https://github.com/cubxxw/sealos)ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)

---
[TOC]

# ç¦»çº¿å®‰è£…

### æµ‹è¯•ç¯å¢ƒ

éªŒè¯ç¦»çº¿å®‰è£…çš„ç¯å¢ƒæ˜¯å¦æ­£ç¡®ï¼š

```bash
ubuntu@VM-0-14-ubuntu:~/workspaces$ docker version
Client: Docker Engine - Community
 Version:           20.10.14
 API version:       1.41
 Go version:        go1.16.15
 Git commit:        a224086
 Built:             Thu Mar 24 01:47:57 2022
 OS/Arch:           linux/amd64
 Context:           default
 Experimental:      true

Server: Docker Engine - Community
 Engine:
  Version:          20.10.14
  API version:      1.41 (minimum version 1.12)
  Go version:       go1.16.15
  Git commit:       87a90dc
  Built:            Thu Mar 24 01:45:46 2022
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.5.11
  GitCommit:        3df54a852345ae127d1fa3092b95168e4a88e2f8
 runc:
  Version:          1.0.3
  GitCommit:        v1.0.3-0-gf46b6ba
 docker-init:
  Version:          0.19.0
  GitCommit:        de40ad0
ubuntu@VM-0-14-ubuntu:~/workspaces$ docker-compose version
docker-compose version 1.24.1, build 4667896b
docker-py version: 3.7.3
CPython version: 3.6.8
OpenSSL version: OpenSSL 1.1.0j  20 Nov 2018
```

### å®‰è£…åŒ…å‡†å¤‡

é•œåƒä¸‹è½½ï¼š

```bash
wget <http://59.36.173.89:9090/api/v1/buckets/app/objects/download?prefix=ZG9ja2Vy56a757q/5a6J6KOFLnJhcg==>
```

**å®‰è£…çš„é€»è¾‘ï¼š** 1. å¯ä»¥ä½¿ç”¨ docker å®‰è£… 2. ä½¿ç”¨ docker-compopse

### docker-compose

1. å…ˆæŠŠimçš„docker-composeé…ç½®æ³¨é‡Šæ‰ï¼Œç”¨dockerå®‰è£…ç»„ä»¶ã€‚
2. å†æºç ç¼–è¯‘im serverï¼Œå¯åŠ¨im

## ç¯å¢ƒå‡†å¤‡

### mysql

> åœ¨çº¿çš„ç¯å¢ƒå‡†å¤‡

```bash
docker run -p 3306:3306 --name mysql -v /my/own/datadir:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=password -d mysql:5.7
```

### å®‰è£…MongoDB

```bash
docker run -p 27017:27017 --name mongo -v /my/own/datadir:/data/db -e MONGO_INITDB_ROOT_USERNAME=root -e MONGO_INITDB_ROOT_PASSWORD=password \\-d mongo:4.0
```

### å®‰è£… redis

```bash
docker run -p 6379:6379 --name redis -v /my/own/datadir:/data -e REDIS_PASSWORD=password -d redis:5
```

### å®‰è£…Zookeeper:

```bash
docker run  -p 2181:2181 --name zookeeper -d wombat/zookeeper
```

### å®‰è£…Kafka:

```bash
docker run -p 9092:9092 --name kafka --link zookeeper -e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://:9092 -e KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181 -e KAFKA_LISTENERS=PLAINTEXT://:9092 -d wurstmeister/kafka
```

### å®‰è£…Etcd:

```bash
docker run -p 2379:2379 -p 2380:2380 --name etcd -d quay.io/coreos/etcd
```

### å®‰è£…MinIO:

```bash
docker run -p 9000:9000 --name minio -v /mnt/data:/data -e "MINIO_ROOT_USER=${USER}" -e "MINIO_ROOT_PASSWORD=${PASSWORD}" -d minio/minio server /data
```

## **ç¦»çº¿å®‰è£…ä¸­é—´ä»¶**

1. scp images.tar.gzåˆ°æœåŠ¡å™¨ï¼Œ å¹¶ä¸”è§£å‹æ–‡ä»¶

```bash
 tar -zxvf ./images.tar.gz
```

1. åŠ è½½æ¯ä¸ªé•œåƒåˆ°dockeré‡Œé¢

```bash
 etcd.tar  grafana.tar  kafka.tar  minio.tar  mongo.tar  mysql.tar  node-exporter.tar  promethues.tar  redis.tar  zookeeper.tar
```

**docker æœ¬åœ°é•œåƒå¯¼å…¥ï¼š**

```bash
 docker load -i ./etcd.tar;
 docker load -i ./grafana.tar;
 docker load -i ./kafka.tar;
 docker load -i ./minio.tar;
 docker load -i ./mongo.tar;
 docker load -i ./mysql.tar;
 docker load -i ./node-exporter.tar;
 docker load -i ./promethues.tar;
 docker load -i ./redis.tar;
 docker load -i ./zookeeper.tar;
# ---
# OR -
for img in etcd.tar grafana.tar kafka.tar minio.tar mongo.tar mysql.tar node-exporter.tar promethues.tar redis.tar zookeeper.tar; 
do
    docker load -i ./$img
done
```

1. éªŒè¯å¯¼å…¥

```bash
for image in etcd grafana kafka minio mongo mysql node-exporter prometheus redis zookeeper; do
    docker images | grep $image > /dev/null
    if [ $? -ne 0 ]; then
        echo "$image é•œåƒå¯¼å…¥å¤±è´¥!"
    else
        echo "$image é•œåƒå¯¼å…¥æˆåŠŸ!"
    fi
done
```

## ç¼–è¯‘

https://github.com/OpenIMSDK/Open-IM-Server-Enterprise.git

**ä¸­é—´ä»¶æ•°æ®åº“å¯åŠ¨**

1. è¿›å…¥ `Open-IM-Server-Enterprise` ç›®å½•ä¸‹æŠŠ `docker-compose.yaml` æ›¿æ¢æˆè¯¥æ–‡æ¡£ç›®å½•ä¸‹çš„ `docker-compose.yaml`

   ```jsx
   git clone -b v2.3.0release <https://github.com/OpenIMSDK/Open-IM-Server-Enterprise>
   ```

2. å¯åŠ¨ä¸­é—´ä»¶æ•°æ®åº“

```bash
 docker-compose up -d;
```

### **å¯åŠ¨IMæœ¬ä½“**

1. å¯åŠ¨

```bash
 ./start_all.sh
```

1. æ£€æŸ¥æ˜¯å¦æˆåŠŸ

```bash
 ./check_all.sh
```

### **å¯åŠ¨å…¶ä»–ç»„ä»¶**

1. å¯åŠ¨å…¶ä»–ç»„ä»¶å¦‚åŠ å¯†ï¼Œopen-im-enterpriseï¼ŒæŒ‰ä¹‹å‰æ–‡æ¡£æ¥å¯åœã€‚

## éŸ³è§†é¢‘äºŒè¿›åˆ¶



## demo å®‰è£…ä¸‹è½½

**Edit on github**

### **[ç›´æ¥ä¸‹è½½app](https://doc.rentsoft.cn/#/flutter_v2/sdk_integrate/development?id=ç›´æ¥ä¸‹è½½app)**

https://www.pgyer.com/app/qrcode/OpenIM

å¯é€‰æ‹©æ›¿æ¢æœåŠ¡å™¨åœ°å€ä¸ºè‡ªå·±æ­å»ºçš„æœåŠ¡å™¨åœ°å€ï¼Œé»˜è®¤åœ°å€ä¸ºå®˜æ–¹æœåŠ¡å™¨åœ°å€



## END é“¾æ¥

<ul><li><div><a href = '74.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '76.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 
