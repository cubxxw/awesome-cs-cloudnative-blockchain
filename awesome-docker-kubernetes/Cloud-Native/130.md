# é‡æ–°æ­å»ºæˆ‘çš„åšå®¢ï¼ˆé™æ€ï¼‰

å†¤å¤§å¤´å›æ¥äº† â€¦

å¤ªéš¾äº†è¿™æ¬¡ï¼Œå‡†å¤‡ç®€å†çš„æ—¶å€™ï¼Œå‘ç°æˆ‘çš„åšå®¢æ²¡äº†ï¼Œæˆ‘æœ€äº²çˆ±çš„ï¼Œé™ªä¼´äº†ä¸€å¹´çš„ï¼Œå¤‡å—å¥½è¯„çš„åšå®¢ [nsddd.top](nsddd.top) ç‰ºç‰²äº† å‘œå‘œå‘œå‘œ

åˆ«æ€¥åˆ«æ€¥ï¼Œå¸å–æ•™è®­ï¼Œç¬¬ä¸€ä»¶äº‹æ˜¯ä»€ä¹ˆï¼Œåšå†³ä¸ç”¨åŠ¨æ€åšå®¢äº†ï¼Œä»å¤§ä¸€çš„ç¬¬ä¸€ä»£åšå®¢ä½¿ç”¨ workpressï¼Œ é‚£æ—¶å€™ç”¨çš„æœåŠ¡å™¨ç®¡ç†å·¥å…·æ˜¯ è‘—åé¡¶é¡¶çš„ å®å¡” ï¼Œ è™½ç„¶ç°åœ¨æˆ‘è¿˜åœ¨ç”¨ï¼Œå“ˆå“ˆå“ˆï¼Œä¸è¿‡ä»¥åç»å¯¹ç»å¯¹ä¸ä¼šå†ç”¨äº† ã€‚ç¬¬äºŒä»£åšå®¢è¿˜è®°å¾—å— ï¼Œç¬¬äºŒä»£åšå®¢å°±æ˜¯æˆ‘åˆšåˆšç‰ºç‰²æ‰çš„åšå®¢ï¼Œä½¿ç”¨ docker æ­å»ºï¼Œå­˜æ´»äº†ä¸¤å¹´ï¼ˆå¤§äºŒåˆ°å¤§ä¸‰ï¼‰ï¼ŒæœåŠ¡å™¨ä¸­é€”éƒ½æ¢äº†ä¸€æ¬¡ï¼Œä¸è¿‡å¾—ç›Šäº Docker ä¼˜é›…çš„ç§»æ¤æ€§hahaï¼Œæ‰€ä»¥æˆ‘çš„åšå®¢å¾—ä»¥å­˜æ´»ã€‚

é‚£è¿™æ¬¡ä¸ºå•¥æŒ‚äº†ï¼Ÿï¼Ÿï¼Ÿ æŒ‚çš„æ—¶é—´æ˜¯ 2023 å¹´ 9 æœˆ 1 æ—¥ã€‚åŸå› æ˜¯ Java å‡ºç°æ•…éšœï¼Œå‘ç° swtich ç©ºé—´ä¸è¶³ï¼Œç„¶åï¼Œå‡†å¤‡ç§»æ¤çš„ï¼Œä¿®å¤çš„ï¼Œå®åœ¨æ˜¯è§‰å¾—æ— åŠ›ç»´æŠ¤ï¼Œæˆ‘å¸Œæœ›æˆ‘çš„åšå®¢å¯ä»¥é•¿ä¹…ç”Ÿå­˜å‡ å¹´ï¼Œåå‡ å¹´ï¼Œç”šè‡³æ˜¯å‡ åå¹´ä¸Šç™¾å¹´ã€‚

æ‰€ä»¥ï¼Œä»å¤´å¼€å§‹ !!! 



## é€‰æ‹©åˆé€‚çš„åšå®¢æ¨¡æ¿

ä¹‹å‰ç”¨è¿‡ vuepress åšç¬”è®°ï¼Œvuepress ç›¸å¯¹æ¥è¯´ä¸æ˜¯ç‰¹åˆ«åˆé€‚æˆ‘ç°åœ¨åšçš„ï¼Œå› ä¸ºå·²ç»æœ‰è§†è§‰ç–²æƒ«äº†å“ˆå“ˆå“ˆï¼Œçœ‹ç€å¾ˆä¸èˆ’æœï¼Œæ‰€ä»¥ç”¨æˆ‘å¾ˆå–œæ¬¢çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå¤§å®¶å¾ˆå¤šäººä¹Ÿè€³ç†Ÿèƒ½è¯¦çš„é¡¶çº§å¼€æºé¡¹ç›®ï¼šhugo ,  GitHub åœ°å€æ˜¯ï¼šhttps://github.com/gohugoio/hugo

æ¥ä¸‹æ¥å°±æ˜¯é€‰æ‹©åˆé€‚çš„ä¸»é¢˜äº†ï¼Œæˆ‘å‚è€ƒäº†å‡ ä¸ªçƒ­é—¨çš„ theme é€‰æ‹©äº† https://github.com/adityatelange/hugo-PaperMod

### å®‰è£… Hugo

æˆ‘çƒ­è¡·äºæºç ï¼Œå¯ä»¥éšæ—¶æ”¹ä»£ç ï¼Œæ PR ï¼Œäºæ˜¯ç”¨æºç æ„å»ºï¼š

```bash
â¯ git clone https://github.com/cubxxw/hugo.git
â¯ cd hugo 
â¯ go build
â¯ mv hugo /usr/bin
```

### éƒ¨ç½²ä¸»é¢˜

é€‰æ‹©æˆ‘ä»¬ä½¿ç”¨çš„ä¸»é¢˜ï¼š

```bash
â¯ git clone https://github.com/adityatelange/hugo-PaperMod themes/PaperMod --depth=1

# å¦‚æœå¸Œæœ›åé¢æ›´æ–°ä¸»é¢˜
â¯ cd themes/PaperMod
â¯ git pull
```

**ä½¿ç”¨ git [submodule](https://www.atlassian.com/git/tutorials/git-submodule) with**

> ä»£ç å¯èƒ½æ˜¯è¦æäº¤åˆ° Github çš„ï¼Œæ‰€ä»¥å¤–æ¨¡å—åŒ…å«å­é¡¹ç›®çš„ git å¯ä»¥ç”¨ git submodule æ¥ç®¡ç†ã€‚

```bash
â¯ git submodule add --depth=1 https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod
â¯ git submodule update --init --recursive # needed when you reclone your repo (submodules may not get cloned automatically)
```

> **Note**: You may use ` --branch v7.0` to end of above command if you want to stick to specific release.

**ç”¨æ–¹æ³•2æ›´æ–°ä¸»é¢˜**:

> ```bash
> â¯ git submodule update --remote --merge
> ```



**æ·»åŠ ä¸»é¢˜åˆ° hugo.toml ä¸­ï¼š**

æ¨èä½¿ç”¨ yaml æˆ–è€…æ˜¯ toml ï¼Œæˆ‘æ¯”è¾ƒå–œæ¬¢ç”¨ yaml å“ˆå“ˆï¼Œå½“ç„¶ï¼Œç”¨ https://tooltt.com/yaml2toml/ å·¥å…·å¯ä»¥éšä¾¿è½¬æ¢

```toml
baseURL = 'https://nsddd.top'
languageCode = 'en-us'
title = 'cubxxw is blog'
theme = "PaperMod"

enableRobotsTXT = true
buildDrafts = false
buildFuture = false
buildExpired = false
googleAnalytics = "UA-123-45"
pygmentsUseClasses = true

[minify]
disableXML = true
minifyOutput = true

[params]
env = "production"
title = "ExampleSite"
description = "ExampleSite description"
keywords = [ "Blog", "Portfolio", "PaperMod" ]
author = "Me"
images = [ "<link or path of image for opengraph, twitter-cards>" ]
DateFormat = "January 2, 2006"
defaultTheme = "auto"
disableThemeToggle = false
ShowReadingTime = true
ShowShareButtons = true
ShowPostNavLinks = true
ShowBreadCrumbs = true
ShowCodeCopyButtons = false
ShowWordCount = true
ShowRssButtonInSectionTermList = true
UseHugoToc = true
disableSpecial1stPost = false
disableScrollToTop = false
comments = false
hidemeta = false
hideSummary = false
showtoc = false
tocopen = false

  [params.assets]
  favicon = "<link / abs url>"
  favicon16x16 = "<link / abs url>"
  favicon32x32 = "<link / abs url>"
  apple_touch_icon = "<link / abs url>"
  safari_pinned_tab = "<link / abs url>"

  [params.label]
  text = "Home"
  icon = "/apple-touch-icon.png"
  iconHeight = 35

  [params.profileMode]
  enabled = false
  title = "ExampleSite"
  subtitle = "This is subtitle"
  imageUrl = "<img location>"
  imageWidth = 120
  imageHeight = 120
  imageTitle = "my image"

    [[params.profileMode.buttons]]
    name = "Posts"
    url = "posts"

    [[params.profileMode.buttons]]
    name = "Tags"
    url = "tags"

  [params.homeInfoParams]
  Title = "Hi there ğŸ‘‹"
  Content = "Welcome to my blog"

  [[params.socialIcons]]
  name = "twitter"
  url = "https://twitter.com/"

  [[params.socialIcons]]
  name = "stackoverflow"
  url = "https://stackoverflow.com"

  [[params.socialIcons]]
  name = "github"
  url = "https://github.com/"

[params.analytics.google]
SiteVerificationTag = "XYZabc"

[params.analytics.bing]
SiteVerificationTag = "XYZabc"

[params.analytics.yandex]
SiteVerificationTag = "XYZabc"

  [params.cover]
  hidden = true
  hiddenInList = true
  hiddenInSingle = true

  [params.editPost]
  URL = "https://github.com/<path_to_repo>/content"
  Text = "Suggest Changes"
  appendFilePath = true

  [params.fuseOpts]
  isCaseSensitive = false
  shouldSort = true
  location = 0
  distance = 1_000
  threshold = 0.4
  minMatchCharLength = 0
  keys = [ "title", "permalink", "summary", "content" ]

[[menu.main]]
identifier = "categories"
name = "categories"
url = "/categories/"
weight = 10

[[menu.main]]
identifier = "tags"
name = "tags"
url = "/tags/"
weight = 20

[[menu.main]]
identifier = "example"
name = "example.org"
url = "https://example.org"
weight = 30

[markup.highlight]
noClasses = false
```



**ç„¶åå°±æ˜¯åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼š**

>  æ ·æœ¬`Page.md`

```markdown
---
title: "My 1st post"
date: 2020-09-15T11:30:03+00:00
# weight: 1
# aliases: ["/first"]
tags: ["first"]
author: "Me"
# author: ["Me", "You"] # multiple authors
showToc: true
TocOpen: false
draft: false
hidemeta: false
comments: false
description: "Desc Text."
canonicalURL: "https://canonical.url/to/page"
disableHLJS: true # to disable highlightjs
disableShare: false
disableHLJS: false
hideSummary: false
searchHidden: true
ShowReadingTime: true
ShowBreadCrumbs: true
ShowPostNavLinks: true
ShowWordCount: true
ShowRssButtonInSectionTermList: true
UseHugoToc: true
cover:
    image: "<image path/url>" # image path/url
    alt: "<alt text>" # alt text
    caption: "<text>" # display caption under cover
    relative: false # when using page bundles set this to true
    hidden: true # only hide on current single page
editPost:
    URL: "https://github.com/<path_to_repo>/content"
    Text: "Suggest Changes" # edit text
    appendFilePath: true # to append file path to Edit link
---
```

å¯ä»¥é€šè¿‡åˆ›å»ºæ¥ä½¿ç”¨å®ƒ`archetypes/post.md`

```bash
â¯ hugo new --kind post archetypes/Page.md
```



**ä¸‹é¢çš„æ‰€æœ‰ä¾‹å­éƒ½ä½¿ç”¨ `yml/yaml` æ ¼å¼ï¼Œæˆ‘å»ºè®®ä½¿ç”¨ `yml` è€Œä¸æ˜¯ `toml` ï¼Œå› ä¸ºå®ƒæ›´å®¹æ˜“é˜…è¯»ã€‚**

å½“ç„¶ï¼Œä½œä¸ºäº‘åŸç”Ÿçš„é…ç½®æ–‡ä»¶ï¼Œ yaml æ¯” toml æ›´åŠ å—åˆ°æˆ‘çš„ love :love_letter:



### hugo çš„åŸºç¡€å‘½ä»¤

**æ·»åŠ å†…å®¹ï¼š**

ä½ å¯ä»¥ä½¿ç”¨ `hugo new` å‘½ä»¤æ¥æ·»åŠ æ–°çš„å†…å®¹ï¼Œä¾‹å¦‚ï¼š

```bash
â¯ hugo new posts/my-first-post.md
```

è¿™ä¸ªå‘½ä»¤ä¼šåœ¨ç”Ÿæˆ `content/posts/my-first-post.md` æ–‡ä»¶ï¼Œ

ç„¶åï¼Œç¼–è¾‘ `content/posts/my-first-post.md` æ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„å†…å®¹ã€‚



**ç”Ÿæˆæ‰€æœ‰çš„å†…å®¹ï¼š**

```
â¯ hugo
```

> ä¸Šè¿°å‘½ä»¤ä¼šç”Ÿæˆæ‰€æœ‰çš„é¡µé¢ï¼Œå¹¶æŠŠå®ƒä»¬æ”¾åœ¨ `public/` ç›®å½•ä¸­ã€‚



**ä½ å¯ä»¥ä½¿ç”¨ `hugo server` å‘½ä»¤æ¥æœ¬åœ°é¢„è§ˆä½ çš„ç½‘ç«™ï¼š**

```bash
â¯ hugo server -D
```

`-D` å‚æ•°æ„å‘³ç€åŒ…æ‹¬è‰ç¨¿å†…å®¹ã€‚ç„¶åï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® `http://localhost:1313` æ¥æŸ¥çœ‹ä½ çš„ç«™ç‚¹ã€‚



**å®šä¹‰è·¯å¾„**

é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œè·¯å¾„æ˜¯å¼ºç›¸å…³çš„ï¼Œæ¯”å¦‚è¯´ä½ åœ¨å“ªä¸ªç›®å½•ä¸­å®šä¹‰ï¼Œé‚£ä¹ˆè·¯å¾„å°±æ˜¯è¿™ä¸ªç›®å½•çš„è·¯å¾„ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯ç»å¯¹çš„ã€‚

æ¯”å¦‚è¯´ä¸Šé¢ï¼š

```bash
â¯ hugo new posts/my-first-post.md
```

è¯¥å¸–å­çš„é»˜è®¤è®¿é—®URLé€šå¸¸ä¼šæ˜¯ï¼š

+ http://localhost:1313/posts/my-first-post/

æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š

1. **æœ«å°¾çš„æ–œæ **ï¼šHugoé»˜è®¤ç”Ÿæˆçš„æ˜¯"pretty URLs"ï¼Œè¿™æ„å‘³ç€å®ƒä»¬ä¼šä»¥æ–œæ ç»“å°¾ã€‚ä½ å¯ä»¥åœ¨Hugoçš„é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹è¿™ä¸€è¡Œä¸ºã€‚
2. **è‰ç¨¿å’Œå‘å¸ƒ**ï¼šæ–°åˆ›å»ºçš„å¸–å­é»˜è®¤æ˜¯è‰ç¨¿çŠ¶æ€ï¼ˆåœ¨å¸–å­çš„å¤´éƒ¨ä¿¡æ¯ä¸­ï¼Œ`draft: true`ï¼‰ã€‚å¦‚æœä½ ä½¿ç”¨`hugo server`æ¥é¢„è§ˆä½ çš„ç«™ç‚¹ï¼Œå¹¶æ²¡æœ‰åŠ `-D`å‚æ•°ï¼Œä½ æ˜¯çœ‹ä¸åˆ°è‰ç¨¿çš„ã€‚ä¸ºäº†é¢„è§ˆè‰ç¨¿å†…å®¹ï¼Œä½ éœ€è¦ä½¿ç”¨`hugo server -D`ã€‚
3. **è‡ªå®šä¹‰è·¯å¾„**ï¼šå¦‚æœä½ æƒ³è¦ä¸ºç‰¹å®šçš„å¸–å­å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çš„è·¯å¾„ï¼Œä½ å¯ä»¥åœ¨è¯¥å¸–å­çš„å¤´éƒ¨ä¿¡æ¯ï¼ˆfront matterï¼‰ä¸­ä½¿ç”¨`url`å±æ€§æ¥æŒ‡å®šã€‚



## ä¸»é¢˜é…ç½®

æ¥ä¸‹æ¥çš„ç¯å¢ƒï¼Œå¼€å§‹æˆ‘ä»¬çš„ä¸»é¢˜é…ç½®ï¼Œä¸»é¢˜çš„é…ç½®ä½¿å¾— hugo çš„ä¸»é¢˜å¾—ä»¥ä¸°å¯Œ



### é»˜è®¤ä¸»é¢˜ æš—/äº®

```yaml
params:
    # defaultTheme: light
    # defaultTheme: dark
    defaultTheme: auto # to switch between dark or light according to browser theme
```



### Archives å¸ƒå±€

åœ¨ `content` ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ `archive.md` çš„é¡µé¢ï¼Œå†…å®¹å¦‚ä¸‹

```bash
.
â”œâ”€â”€ config.yml
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ archives.md   <--- Create archive.md here
â”‚   â””â”€â”€ posts/
â”œâ”€â”€ static/
â””â”€â”€ themes/
    â””â”€â”€ PaperMod/
```

å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹:

```bash
---
title: "Archive"
layout: "archives"
url: "/archives/"
summary: archives
---
```

æ³¨æ„ï¼š**Archives** å¸ƒå±€ä¸æ”¯æŒå¤šè¯­è¨€æœˆä»½ç¿»è¯‘ã€‚



### å¯åŠ¨

**ä½¿ç”¨ `hugo server` å¯åŠ¨ï¼š**

```bash
â¯ hugo server
```

ç„¶åè®¿é—®ï¼šhttp://localhost:1313/ 

![image-20230913222054387](http://sm.nsddd.top/sm202309132220842.png)

ç‚¹å‡» **æœˆäº®** ï¼Œæ”¯æŒè®¾ç½® **æ˜æš—** ã€‚



### å¸¸è§„æ¨¡å¼ï¼ˆé»˜è®¤æ¨¡å¼ï¼‰

ä½¿ç”¨ç¬¬1ä¸ªæ¡ç›®ä½œä¸ºæŸäº›ä¿¡æ¯:

```yaml
  homeInfoParams:
    Title: Hi there ğŸ‘‹
    Content: My name is Xinwei(bear) Xiong. My loyalty is to adventure ğŸ¤–
  socialIcons:
    - name: twitter
      url: https://twitter.com/xxw3293172751
    - name: stackoverflow
      url: https://stackoverflow.com/users/17393425/xinwei-xiong
    - name: github
      url: https://github.com/cubxxw
    - name: zhihu
      url: https://www.zhihu.com/people/3293172751
    - name: linkedin
      url: https://www.linkedin.com/in/cubxxw
    - name: bilibili
      url: https://space.bilibili.com/1233089591
    - name: youtube
      url: https://https//www.youtube.com/channel/UCd3qbRbMwYlh5uKneo_2m_w
    - name: liberapay
      url: https://liberapay.com/xiongxinwei/donate
    - name: email
      url: https://mail.google.com/mail/u/0/?fs=1&tf=cm&to=3293172751nss@gmail.com
    - name: weibo
      url: https://weibo.com/u/6248930985
```

 

### Profileæ¨¡å¼

å°† Index/Home æ˜¾ç¤ºä¸ºå¸¦æœ‰ç¤¾äº¤é“¾æ¥å’Œå›¾åƒçš„å®Œæ•´é¡µé¢

åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹:

```go
params:
    profileMode:
        enabled: true
        title: "<Title>" # optional default will be site title
        subtitle: "This is subtitle"
        imageUrl: "<image link>" # optional
        imageTitle: "<title of image as alt>" # optional
        imageWidth: 120 # custom size
        imageHeight: 120 # custom size
        buttons:
            - name: Archive
            url: "/archive"
            - name: Github
            url: "https://github.com/"

    socialIcons: # optional
        - name: "<platform>"
            url: "<link>"
        - name: "<platform 2>"
            url: "<link2>"
```



### BreadCrumb å¯¼èˆª

åœ¨æ–‡ç« æ ‡é¢˜ä¸Šæ–¹æ·»åŠ  BreadCrumb å¯¼èˆªï¼Œä»¥æ˜¾ç¤ºå­ç« èŠ‚å’Œä¸»é¡µå¯¼èˆª

```yaml
params:
    ShowBreadCrumbs: true
```

å¯ä»¥ç¦ç”¨ç‰¹å®šé¡µé¢çš„å°é¢:

```yaml
---
ShowBreadCrumbs: false
---
```



### ç¼–è¾‘å¸–å­é“¾æ¥

æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œé€šè¿‡ä½¿ç”¨æ–‡ç« çš„æ–‡ä»¶è·¯å¾„é“¾æ¥åˆ°ç¼–è¾‘ç›®çš„åœ°æ¥å»ºè®®æ›´æ”¹ã€‚

å¯¹äºç«™ç‚¹é…ç½®ç”¨é€”ï¼š

```yaml
Params:
    editPost:
        URL: "https://github.com/<gitlab user>/<repo name>/tree/<branch name>/<path to content>/"
        Text: "Suggest Changes" # edit text
        appendFilePath: true # to append file path to Edit link
```

å¯é’ˆå¯¹å•ä¸ªé¡µé¢è¿›è¡Œä¿®æ”¹:

```yaml
---
editPost:
    URL: "https://github.com/<path_to_repo>/content"
    Text: "Suggest Changes" # edit text
    appendFilePath: true # to append file path to Edit link
---
```



### Icons è¡¨æƒ… & å›¾æ ‡

+ https://github.com/adityatelange/hugo-PaperMod/wiki/Icons



### é…ç½®æ–‡ä»¶å˜é‡

+ https://github.com/adityatelange/hugo-PaperMod/wiki/Variables



## éƒ¨ç½²

ä½¿ç”¨ GitHub actions è¿›è¡Œéƒ¨ç½²ï¼Œåœ¨ Makefile ä¸­é›†æˆä¸€äº›é«˜çº§çš„å‘½ä»¤

ä¸‹é¢æ˜¯ Makefile çš„é…ç½®ï¼š

```makefile
###################################=> common commands <=#############################################
# ========================== Capture Environment ===============================
# get the repo root and output path
ROOT_PACKAGE=github.com/cubxxw/blog
OUT_DIR=$(REPO_ROOT)/_output
# ==============================================================================

# define the default goal
#

SHELL := /bin/bash
DIRS=$(shell ls)
GO=go

.DEFAULT_GOAL := help

# include the common makefile
COMMON_SELF_DIR := $(dir $(lastword $(MAKEFILE_LIST)))
# ROOT_DIR: root directory of the code base
ifeq ($(origin ROOT_DIR),undefined)
ROOT_DIR := $(abspath $(shell cd $(COMMON_SELF_DIR)/. && pwd -P))
endif
# OUTPUT_DIR: The directory where the build output is stored.
ifeq ($(origin OUTPUT_DIR),undefined)
OUTPUT_DIR := $(ROOT_DIR)/_output
$(shell mkdir -p $(OUTPUT_DIR))
endif

# BIN_DIR: The directory where the build output is stored.
ifeq ($(origin BIN_DIR),undefined)
BIN_DIR := $(OUTPUT_DIR)/bin
$(shell mkdir -p $(BIN_DIR))
endif

ifeq ($(origin TOOLS_DIR),undefined)
TOOLS_DIR := $(OUTPUT_DIR)/tools
$(shell mkdir -p $(TOOLS_DIR))
endif

ifeq ($(origin TMP_DIR),undefined)
TMP_DIR := $(OUTPUT_DIR)/tmp
$(shell mkdir -p $(TMP_DIR))
endif

ifeq ($(origin VERSION), undefined)
VERSION := $(shell git describe --tags --always --match="v*" --dirty | sed 's/-/./g')	#v2.3.3.631.g00abdc9b.dirty
endif

# Check if the tree is dirty. default to dirty(maybe u should commit?)
GIT_TREE_STATE:="dirty"
ifeq (, $(shell git status --porcelain 2>/dev/null))
	GIT_TREE_STATE="clean"
endif
GIT_COMMIT:=$(shell git rev-parse HEAD)

# COMMA: Concatenate multiple strings to form a list of strings
COMMA := ,
# SPACE: Used to separate strings
SPACE :=
# SPACE: Replace multiple consecutive Spaces with a single space
SPACE +=

## run-default: Run hugo server with default mode.
run-default:
	@$(TOOLS_DIR)/hugo server -D --gc -p 13132 --config config.default.yml

## run-profile-mode: Run hugo server with profile mode.
run-profile-mode:
	@$(TOOLS_DIR)/hugo server -D --gc -p 13133 --config config.profileMode.yml

## chroma-css: Generate chroma css.
chroma-css:
	@$(TOOLS_DIR)/hugo gen chromastyles --style=dracula > assets/css/lib/chroma-dark.css
	@$(TOOLS_DIR)/hugo gen chromastyles --style=github > assets/css/lib/chroma-light.css

## run: Run hugo server.
.PHONY: run
run: tools.verify.hugo
	@$(TOOLS_DIR)/hugo
	@$(TOOLS_DIR)/hugo server -D --gc -p 13131 --config config.yml

## build: Build site with non-production settings and put deliverables in ./public
.PHONY: build
build: tools.verify.hugo module-check
	@$(TOOLS_DIR)/hugo --cleanDestinationDir --minify --environment development

## module-check: Check if all of the required submodules are correctly initialized.
.PHONY: module-check
module-check:
	@git submodule status --recursive | awk '/^[+-]/ {err = 1; printf "\033[31mWARNING\033[0m Submodule not initialized: \033[34m%s\033[0m\n",$$2} END { if (err != 0) print "You need to run \033[32mmake module-init\033[0m to initialize missing modules first"; exit err }' 1>&2

## module-update: Updating themes
module-update: tools.verify.hugo
	@git submodule update --remote --merge

## clean: Clean all builds.
.PHONY: clean
clean:
	@echo "===========> Cleaning all builds TMP_DIR($(TMP_DIR)) AND BIN_DIR($(BIN_DIR))"
	@-rm -vrf $(TMP_DIR) $(BIN_DIR)
	@echo "===========> End clean..."

## help: Show this help info.
.PHONY: help
help: Makefile
	@printf "\n\033[1mUsage: make <TARGETS> ...\033[0m\n\n\\033[1mTargets:\\033[0m\n\n"
	@sed -n 's/^##//p' $< | awk -F':' '{printf "\033[36m%-28s\033[0m %s\n", $$1, $$2}' | sed -e 's/^/ /'

################################### Tools #####################################

BUILD_TOOLS ?= hugo

## tools.verify.%: Check if a tool is installed and install it
.PHONY: tools.verify.%
tools.verify.%:
	@echo "===========> Verifying $* is installed"
	@if [ ! -f $(TOOLS_DIR)/$* ]; then GOBIN=$(TOOLS_DIR) $(MAKE) tools.install.$*; fi
	@echo "===========> $* is install in $(TOOLS_DIR)/$*"

## tools: Install a must tools
.PHONY: tools
tools: $(addprefix tools.verify., $(BUILD_TOOLS))

## tools.install.%: Install a single tool in $GOBIN/
.PHONY: tools.install.%
tools.install.%:
	@echo "===========> Installing $,The default installation path is $(GOBIN)/$*"
	@$(MAKE) install.$*

.PHONY: install.addlicense
install.addlicense:
	@$(GO) install github.com/google/addlicense@latest

.PHONY: install.hugo
install.hugo:
	@$(GO) install github.com/gohugoio/hugo@latest
```

å½“ç„¶ Makefile æ˜¯é’ˆå¯¹æœ¬åœ°çš„ï¼Œå¦‚æœæ˜¯è¿œç¨‹æœåŠ¡å™¨å°±éœ€è¦ä¾é  github actions:

``` bash
# Sample workflow for building and deploying a Hugo site to GitHub Pages
name: Deploy Hugo site to Pages

on:
  # Runs on pushes targeting the default branch
  push:
    branches: ["main"]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages
permissions:
  contents: read
  pages: write
  id-token: write

# Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued.
# However, do NOT cancel in-progress runs as we want to allow these production deployments to complete.
concurrency:
  group: "pages"
  cancel-in-progress: false

# Default to bash
defaults:
  run:
    shell: bash

jobs:
  # Build job
  build:
    runs-on: ubuntu-latest
    env:
      HUGO_VERSION: 0.114.0
    steps:
      - name: Install Hugo CLI
        run: |
          wget -O ${{ runner.temp }}/hugo.deb https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_extended_${HUGO_VERSION}_linux-amd64.deb \
          && sudo dpkg -i ${{ runner.temp }}/hugo.deb
      - name: Install Dart Sass
        run: sudo snap install dart-sass
      - name: Checkout
        uses: actions/checkout@v3
        with:
          submodules: recursive
      - name: Setup Pages
        id: pages
        uses: actions/configure-pages@v3
      - name: Install Node.js dependencies
        run: "[[ -f package-lock.json || -f npm-shrinkwrap.json ]] && npm ci || true"
      - name: Build with Hugo
        env:
          # For maximum backward compatibility with Hugo modules
          HUGO_ENVIRONMENT: production
          HUGO_ENV: production
        run: |
          hugo \
            --minify \
            --baseURL "${{ steps.pages.outputs.base_url }}/"
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v2
        with:
          path: ./public

  # Deployment job
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v2

```



## è¯„è®ºæ’ä»¶

è¦æ·»åŠ è¯„è®ºï¼Œè¯·åˆ›å»ºä¸€ä¸ª html æ–‡ä»¶

```bash
layouts/partials/comments.html
```

å¹¶ç²˜è´´æ‚¨çš„è¯„è®ºæä¾›å•†æä¾›çš„ä»£ç 

ä¹Ÿåœ¨é…ç½®ä¸­æ·»åŠ è¿™ä¸ª

```yaml
params:
    comments: true
```

æˆ‘ä½¿ç”¨ ï¼šhttps://utteranc.es/ è¿™æ˜¯ä¸€ä¸ªåŸºäº GitHub çš„è¯„è®ºçš„æ’ä»¶



## å¤šè¯­è¨€

+ https://gohugo.io/content-management/multilingual/#menus

Hugo æ”¯æŒåŒæ—¶åˆ›å»ºå¤šç§è¯­è¨€çš„ç½‘ç«™ã€‚

`languages`åº”è¯¥åœ¨ç«™ç‚¹é…ç½®çš„ä¸€ä¸ªéƒ¨åˆ†ä¸­å®šä¹‰å¯ç”¨çš„è¯­è¨€ã€‚

**æŒ‰æ–‡ä»¶åç¿»è¯‘**

1. `/content/about.en.md`
2. `/content/about.fr.md`

ç¬¬ä¸€ä¸ªæ–‡ä»¶è¢«æŒ‡å®šä¸ºè‹±è¯­ï¼Œå¹¶é“¾æ¥åˆ°ç¬¬äºŒä¸ªæ–‡ä»¶ã€‚ç¬¬äºŒä¸ªæ–‡ä»¶è¢«æŒ‡å®šä¸ºæ³•è¯­å¹¶é“¾æ¥åˆ°ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚

å®ƒä»¬çš„è¯­è¨€æ˜¯æ ¹æ®ä½œä¸ºåç¼€æ·»åŠ åˆ°æ–‡ä»¶åçš„è¯­è¨€ä»£ç æŒ‡å®šçš„ã€‚

é€šè¿‡å…·æœ‰ç›¸åŒçš„è·¯å¾„å’ŒåŸºæœ¬æ–‡ä»¶åï¼Œå†…å®¹ç‰‡æ®µè¢«é“¾æ¥åœ¨ä¸€èµ·ä½œä¸ºç¿»è¯‘çš„é¡µé¢ã€‚

> å¦‚æœæ–‡ä»¶æ²¡æœ‰è¯­è¨€ä»£ç ï¼Œåˆ™å°†ä¸ºå…¶åˆ†é…é»˜è®¤è¯­è¨€ã€‚



**æŒ‰å†…å®¹ç›®å½•ç¿»è¯‘**

å½“ç„¶ä¹Ÿå¯ä»¥æ ¹æ®æ–‡ä»¶ç›®å½•å»ç¿»è¯‘ï¼Œè¯¥ç³»ç»Ÿå¯¹æ¯ç§è¯­è¨€ä½¿ç”¨ä¸åŒçš„å†…å®¹ç›®å½•ã€‚æ¯ç§è¯­è¨€çš„å†…å®¹ç›®å½•éƒ½ä½¿ç”¨ `contentDir` å‚æ•°è®¾ç½®ã€‚

```yaml
languages:
  en:
    contentDir: content/english
    languageName: English
    weight: 10
  fr:
    contentDir: content/french
    languageName: FranÃ§ais
    weight: 20
```

`contentDir` çš„å€¼å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆè·¯å¾„-ç”šè‡³æ˜¯ç»å¯¹è·¯å¾„å¼•ç”¨ã€‚å”¯ä¸€çš„é™åˆ¶æ˜¯å†…å®¹ç›®å½•ä¸èƒ½é‡å ã€‚

æœ€åçš„ç¤ºä¾‹å¦‚ä¸‹ï¼š

1. `/content/english/about.md`
2. `/content/french/about.md`

ç¬¬ä¸€ä¸ªæ–‡ä»¶è¢«æŒ‡å®šä¸ºè‹±è¯­ï¼Œå¹¶é“¾æ¥åˆ°ç¬¬äºŒä¸ªæ–‡ä»¶ã€‚ç¬¬äºŒä¸ªæ–‡ä»¶è¢«æŒ‡å®šä¸ºæ³•è¯­å¹¶é“¾æ¥åˆ°ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚

å®ƒä»¬çš„è¯­è¨€æ˜¯æ ¹æ®å®ƒä»¬æ‰€åœ¨çš„å†…å®¹ç›®å½•æŒ‡å®šçš„ã€‚

é€šè¿‡å…·æœ‰ç›¸åŒçš„è·¯å¾„å’ŒåŸºæœ¬åç§°ï¼ˆç›¸å¯¹äºå…¶è¯­è¨€å†…å®¹ç›®å½•ï¼‰ï¼Œå†…å®¹ç‰‡æ®µè¢«é“¾æ¥åœ¨ä¸€èµ·ä½œä¸ºç¿»è¯‘é¡µé¢ã€‚



**ç»•è¿‡é»˜è®¤é“¾æ¥**

ä»»ä½•é¡µé¢å…±äº«ç›¸åŒçš„ `translationKey` é›†åœ¨å°é¢å°†è¢«é“¾æ¥ä¸ºç¿»è¯‘çš„ç½‘é¡µï¼Œæ— è®ºåŸºåœ°åç§°æˆ–ä½ç½®ã€‚

è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š

1. `/content/about-us.en.md`
2. `/content/om.nn.md`
3. `/content/presentation/a-propos.fr.md`

```yaml
translationKey: about
```

é€šè¿‡åœ¨æ‰€æœ‰ä¸‰ä¸ªé¡µé¢ä¸­å°† `translationKey` front matterå‚æ•°è®¾ç½®ä¸º `about` ï¼Œå®ƒä»¬å°†è¢«é“¾æ¥ä¸ºç¿»è¯‘é¡µé¢ã€‚



### ä½¿ç”¨ `hugo new content` ç”Ÿæˆå¤šè¯­è¨€å†…å®¹ 

**ä¸‹é¢ç»™å®šçš„æ˜¯ç¿»è¯‘çš„æ–‡ä»¶**ï¼š

é’ˆå¯¹åŒä¸€ç›®å½•ï¼š

```bash
hugo new content posts/my-hugo.en.md
hugo new content posts/my-hugo.de.md
```

é’ˆå¯¹ä¸åŒç›®å½•ï¼š

```bash
hugo new content content/en/posts/test.md
hugo new content content/de/posts/test.md
hugo new content content/zh/posts/test.md
hugo new content content/fr/posts/test.md
hugo new content content/es/posts/test.md
hugo new content content/zh-tw/posts/test.md
```



æˆ‘ä»¬å°†ä»¥ä¸‹å‚æ•°æ·»åŠ åˆ°æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ä¸­:

```yaml
# config.yaml
languages:
  en:
    languageName: English
    weight: 1
  fr:
    languageName: FranÃ§ais
    weight: 2
  es:
    languageName: Spanish
    weight: 3
```

ç°åœ¨ï¼Œæˆ‘ä»¬çš„è¯­è¨€å°†å¯ä»¥ä½¿ç”¨`site.Languages`å¹¶æŒ‰ æ’åº`Weight`ã€‚è¶Šä½â€¦â€¦è¶Šä¼˜å…ˆã€‚æ­£å¦‚æˆ‘ä»¬ç¨åå°†ä»‹ç»çš„ï¼Œå¼ºçƒˆå»ºè®®å°†é»˜è®¤è¯­è¨€æ”¾åœ¨ç¬¬ä¸€ä½ã€‚



