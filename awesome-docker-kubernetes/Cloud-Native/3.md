+ [author](http://nsddd.top)

# ç¬¬3èŠ‚ å­¦ä¹  sealos çš„é¡¹ç›®ç»“æ„

<br>

<div><a href = '2.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '4.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>

> â¤ï¸ğŸ’•ğŸ’•è®°å½•[sealos](https://github.com/cubxxw/sealos)å¼€æºé¡¹ç›®çš„å­¦ä¹ è¿‡ç¨‹ã€‚[k8s,dockerå’Œäº‘åŸç”Ÿçš„å­¦ä¹ ](https://github.com/cubxxw/sealos)ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)

---
[TOC]

## ç›®å½•ç»“æ„

### [controllers](https://github.com/labring/sealos/tree/main/controllers)

::: details ç›®å½•æŠ˜å 

```bash
PS C:\Users\smile\Desktop\my\sealos\controllers> tree      
å· ç³»ç»Ÿ çš„æ–‡ä»¶å¤¹ PATH åˆ—è¡¨
å·åºåˆ—å·ä¸º DE95-1D97
C:.
â”œâ”€app  # æˆ‘ä»¬æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸ
â”‚  â”œâ”€api
â”‚  â”‚  â””â”€v1
â”‚  â”œâ”€config  
â”‚  â”‚  â”œâ”€crd
â”‚  â”‚  â”‚  â”œâ”€bases
â”‚  â”‚  â”‚  â””â”€patches
â”‚  â”‚  â”œâ”€default
â”‚  â”‚  â”œâ”€manager
â”‚  â”‚  â”œâ”€prometheus
â”‚  â”‚  â”œâ”€rbac
â”‚  â”‚  â””â”€samples
â”‚  â”œâ”€controllers
â”‚  â”œâ”€deploy
â”‚  â”‚  â””â”€manifests
â”‚  â””â”€hack
â”œâ”€cluster # ä¸“é—¨ç®¡ç†awsä¸Šk8sç”Ÿå‘½å‘¨æœŸ
â”‚  â”œâ”€api
â”‚  â”‚  â””â”€v1
â”‚  â”œâ”€applier
â”‚  â”œâ”€config
â”‚  â”‚  â”œâ”€crd
â”‚  â”‚  â”‚  â”œâ”€bases
â”‚  â”‚  â”‚  â””â”€patches
â”‚  â”‚  â”œâ”€default
â”‚  â”‚  â”œâ”€manager
â”‚  â”‚  â”œâ”€prometheus
â”‚  â”‚  â”œâ”€rbac
â”‚  â”‚  â””â”€samples
â”‚  â”œâ”€controllers
â”‚  â”œâ”€deploy
â”‚  â”‚  â””â”€manifests
â”‚  â””â”€hack
â”œâ”€infra  # ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œç®¡ç†è™šæ‹Ÿæœºã€å®¹å™¨æˆ–è€…ç½‘ç»œã€ç£ç›˜
â”‚  â”œâ”€api
â”‚  â”‚  â””â”€v1
â”‚  â”œâ”€common
â”‚  â”œâ”€config
â”‚  â”‚  â”œâ”€crd
â”‚  â”‚  â”‚  â”œâ”€bases
â”‚  â”‚  â”‚  â””â”€patches
â”‚  â”‚  â”œâ”€default
â”‚  â”‚  â”œâ”€manager
â”‚  â”‚  â”œâ”€prometheus
â”‚  â”‚  â”œâ”€rbac
â”‚  â”‚  â””â”€samples
â”‚  â”œâ”€controllers
â”‚  â”œâ”€deploy
â”‚  â”‚  â””â”€manifests
â”‚  â”œâ”€drivers
â”‚  â”‚  â””â”€aws
â”‚  â””â”€hack
â”œâ”€metering  # è‡ªå®šä¹‰è®¡é‡ï¼Œè®¡è´¹èµ„æº
â”‚  â”œâ”€api
â”‚  â”‚  â””â”€v1
â”‚  â”œâ”€config
â”‚  â”‚  â”œâ”€crd
â”‚  â”‚  â”‚  â”œâ”€bases
â”‚  â”‚  â”‚  â””â”€patches
â”‚  â”‚  â”œâ”€default
â”‚  â”‚  â”œâ”€manager
â”‚  â”‚  â”œâ”€prometheus
â”‚  â”‚  â”œâ”€rbac
â”‚  â”‚  â””â”€samples
â”‚  â”œâ”€controllers
â”‚  â”œâ”€deploy
â”‚  â”‚  â””â”€manifests
â”‚  â””â”€hack
â”œâ”€terminal  # cmd
â”‚  â”œâ”€api
â”‚  â”‚  â””â”€v1
â”‚  â”œâ”€config
â”‚  â”‚  â”œâ”€crd
â”‚  â”‚  â”‚  â”œâ”€bases
â”‚  â”‚  â”‚  â””â”€patches
â”‚  â”‚  â”œâ”€default
â”‚  â”‚  â”œâ”€manager
â”‚  â”‚  â”œâ”€prometheus
â”‚  â”‚  â”œâ”€rbac
â”‚  â”‚  â””â”€samples
â”‚  â”œâ”€controllers
â”‚  â”œâ”€deploy
â”‚  â”‚  â””â”€manifests
â”‚  â”œâ”€hack
â”‚  â””â”€scripts
â””â”€user  
    â”œâ”€api
    â”‚  â””â”€v1
    â”œâ”€config
    â”‚  â”œâ”€certmanager
    â”‚  â”œâ”€crd
    â”‚  â”‚  â”œâ”€bases
    â”‚  â”‚  â””â”€patches
    â”‚  â”œâ”€default
    â”‚  â”œâ”€manager
    â”‚  â”œâ”€prometheus
    â”‚  â”œâ”€rbac
    â”‚  â”œâ”€samples
    â”‚  â””â”€webhook
    â”œâ”€controllers
    â”‚  â”œâ”€cache
    â”‚  â””â”€helper
    â”œâ”€deploy
    â”‚  â””â”€manifests
    â””â”€hack
```

:::



[controllers](https://github.com/labring/sealos/tree/main/controllers) æ§åˆ¶å™¨ç”¨æ¥ç®¡ç†é›†ç¾¤ï¼ˆk8s æœ‰ä¸€äº›å†…ç½®çš„åŠŸèƒ½ `pod`ï¼Œdeloymentè¿™äº›ï¼ŒåŒæ ·å¯ä»¥controllersæ‰©å±•ï¼‰ï¼š

> è¿™äº›åŠŸèƒ½éƒ½æ˜¯ `k8s` æ²¡æœ‰çš„åŠŸèƒ½~

æˆ‘ä»¬è·‘äº†å¾ˆå¤šæœåŠ¡å™¨éƒ½æ˜¯é€šè¿‡`infra`ç®¡ç†ä»–ä»¬

`metering`æ˜¯ç”¨ä½œè®¡é‡ï¼Œæˆ‘ä»¬ç”¨è¿‡å¤šå°‘èµ„æº

`terminal`å°±æ˜¯æ¡Œé¢ä¸Šçš„ç»ˆç«¯åº”ç”¨

`user`å°±æ˜¯ç”¨æˆ·çš„ç®¡ç†ï¼Œå› ä¸º`cloud.sealos`æ˜¯ä¸€ä¸ªå¤šç§Ÿæˆ·çš„é›†ç¾¤



### cmd

ä»£ç çš„å…¥å£å°±æ˜¯åœ¨cmdä¸­

```bash
[root@VM-4-6-centos cmd]# tree -d
.
â”œâ”€â”€ image-cri-shim  # é•œåƒä»£ç† 
â”‚Â Â  â””â”€â”€ cmd  
â”œâ”€â”€ lvscare  # è´Ÿè½½å‡è¡¡
â”‚Â Â  â””â”€â”€ cmd
â”œâ”€â”€ sealctl  # å°è£…äº†ä¸€äº›shellï¼Œåœ¨æœåŠ¡å™¨ä¸Šæ²¡æœ‰shellå·¥å…·ï¼Œå°è£…å†…æ ¸æ‰“äº¤é“å‘½ä»¤
â”‚Â Â  â””â”€â”€ cmd
â””â”€â”€ sealos  # æ ¸å¿ƒå…¥å£â¬‡ï¸
    â””â”€â”€ cmd
```



**è¯¦ç»†ä»‹ç»ï¼š**

+ `image-cri-shim`ï¼šæ‹¦æˆªé€šä¿¡ï¼Œæ£€æµ‹å·²ç»æœ‰çš„é•œåƒï¼Œæ›¿æ¢
+ `lvscare`ï¼šè´Ÿè½½å‡è¡¡å™¨ï¼Œæ¯ä¸ªç»“ç‚¹éƒ½ä¼šè·‘`lvscare`ï¼Œéƒ½å»è·‘ä¸‰ä¸ª`master`ï¼Œåšè´Ÿè½½å‡è¡¡ï¼Œ`master` æŒ‚æ‰å°±ä¼šæ¸…æ‰ç»“ç‚¹ã€‚
+ `sealctl`ï¼šå°è£…äº†ä¸€äº› `shell` ï¼Œåœ¨æœåŠ¡å™¨ä¸Šæ²¡æœ‰ `shell` å·¥å…·ï¼Œå°è£…å†…æ ¸æ‰“äº¤é“å‘½ä»¤ï¼Œsealosä¾èµ–çš„å‘½ä»¤è¡Œã€‚
+ `sealos`ï¼š`sealos run` ç±»ä¼¼äº `k8s` å®ç°



::: details k8sæŒ‡ä»¤å¼å’Œå£°æ˜å¼ï¼š
`K8S`çš„æ¶æ„ï¼Œå…¶ä¸­æœ‰ä¸€ç‚¹å¾ˆé‡è¦çš„æ˜¯æ•´ä½“æ¶æ„é‡‡ç”¨çš„æ˜¯ `å£°æ˜å¼ç¼–ç¨‹`ï¼Œä¸»è¦çš„ç¼–ç¨‹èŒƒå¼æœ‰ä¸‰ç§ï¼š`å‘½ä»¤å¼ç¼–ç¨‹`ï¼Œ`å£°æ˜å¼ç¼–ç¨‹` å’Œ `å‡½æ•°å¼ç¼–ç¨‹`ã€‚

**å‘½ä»¤å¼ç¼–ç¨‹ï¼š**

å‘½ä»¤å¼ç¼–ç¨‹çš„ä¸»è¦æ€æƒ³æ˜¯å…³æ³¨ `è®¡ç®—æœºæ‰§è¡Œçš„æ­¥éª¤`ï¼Œå³ä¸€æ­¥ä¸€æ­¥å‘Šè¯‰è®¡ç®—æœºå…ˆåšä»€ä¹ˆå†åšä»€ä¹ˆã€‚ æ¯”å¦‚ï¼šå¦‚æœä½ æƒ³åœ¨ä¸€ä¸ªæ•°å­—é›†åˆ `collection`(å˜é‡å) ä¸­ç­›é€‰å¤§äº 5 çš„æ•°å­—ï¼Œä½ éœ€è¦è¿™æ ·å‘Šè¯‰è®¡ç®—æœºï¼š ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºä¸€ä¸ªå­˜å‚¨ç»“æœçš„é›†åˆå˜é‡ `results`ï¼› ç¬¬äºŒæ­¥ï¼Œéå†è¿™ä¸ªæ•°å­—é›†åˆ `collection`ï¼› ç¬¬ä¸‰æ­¥ï¼šä¸€ä¸ªä¸€ä¸ªåœ°åˆ¤æ–­æ¯ä¸ªæ•°å­—æ˜¯ä¸æ˜¯å¤§äº 5ï¼Œå¦‚æœæ˜¯å°±å°†è¿™ä¸ªæ•°å­—æ·»åŠ åˆ°ç»“æœé›†åˆå˜é‡ `results`ä¸­ã€‚

ä»£ç å®ç°å¦‚ä¸‹ï¼š

```go
//åˆ›å»ºä¸€ä¸ªå­˜å‚¨ç»“æœçš„é›†åˆå˜é‡ï¼Œç”¨äºå­˜å‚¨æ‰€æœ‰çš„èŠ‚ç‚¹çš„ç»“æœ
var results = make(map[string]string)
//éå†è¿™ä¸ªé›†åˆï¼Œæ‰“å°å‡ºæ‰€æœ‰èŠ‚ç‚¹çš„ç»“æœ
for k, v := range results {
	//åˆ¤æ–­æ¯ä¸ªæ•°å­—æ—¶å€™å¤§äº5
	if v > 5 {
		//æ·»åŠ åˆ°é›†åˆresultsä¸­
		results[k] = v
	}
}
```

å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªæ ·å­çš„ä»£ç æ˜¯å¾ˆå¸¸è§çš„ä¸€ç§ï¼Œä¸ç®¡ä½ ç”¨çš„æ˜¯`C`,`C++`è¿˜æ˜¯`C#`,`Java`,`Javascript`,`BASIC`,`Python`,`Ruby`ç­‰ç­‰ï¼Œä½ éƒ½å¯ä»¥ä»¥è¿™ä¸ªæ–¹å¼å†™ã€‚

**å£°æ˜å¼ç¼–ç¨‹ï¼š**

å£°æ˜å¼ç¼–ç¨‹æ˜¯ä»¥æ•°æ®ç»“æ„çš„å½¢å¼æ¥è¡¨è¾¾ç¨‹åºæ‰§è¡Œçš„é€»è¾‘ã€‚å®ƒçš„ä¸»è¦æ€æƒ³æ˜¯å‘Šè¯‰è®¡ç®—æœº`åº”è¯¥åšä»€ä¹ˆï¼Œä½†ä¸æŒ‡å®šå…·ä½“è¦æ€ä¹ˆåš`ã€‚ SQL è¯­å¥å°±æ˜¯æœ€æ˜æ˜¾çš„ä¸€ç§å£°æ˜å¼ç¼–ç¨‹çš„ä¾‹å­ï¼Œä¾‹å¦‚ï¼š

```sql
 SELECT * FROM collection WHERE num > 5
```

é™¤äº†`SQL`ï¼Œç½‘é¡µç¼–ç¨‹ä¸­ç”¨åˆ°çš„`HTML`å’Œ`CSS`ä¹Ÿéƒ½å±äºå£°æ˜å¼ç¼–ç¨‹ã€‚

é€šè¿‡è§‚å¯Ÿå£°æ˜å¼ç¼–ç¨‹çš„ä»£ç æˆ‘ä»¬å¯ä»¥å‘ç°å®ƒæœ‰ä¸€ä¸ªç‰¹ç‚¹æ˜¯å®ƒä¸éœ€è¦åˆ›å»ºå˜é‡ç”¨æ¥å­˜å‚¨æ•°æ®ã€‚ å¦ä¸€ä¸ªç‰¹ç‚¹æ˜¯å®ƒä¸åŒ…å«å¾ªç¯æ§åˆ¶çš„ä»£ç å¦‚`for`ï¼Œ`while`ã€‚

**å‡½æ•°å¼ç¼–ç¨‹ï¼š**

å‡½æ•°å¼ç¼–ç¨‹å’Œå£°æ˜å¼ç¼–ç¨‹æ˜¯æœ‰æ‰€å…³è”çš„ï¼Œå› ä¸ºä»–ä»¬æ€æƒ³æ˜¯ä¸€è‡´çš„ï¼šå³åªå…³æ³¨åšä»€ä¹ˆè€Œä¸æ˜¯æ€ä¹ˆåšã€‚ä½†å‡½æ•°å¼ç¼–ç¨‹ä¸ä»…ä»…å±€é™äºå£°æ˜å¼ç¼–ç¨‹ã€‚ å‡½æ•°å¼ç¼–ç¨‹æœ€é‡è¦çš„ç‰¹ç‚¹æ˜¯**â€œå‡½æ•°ç¬¬ä¸€ä½â€**ï¼Œå³å‡½æ•°å¯ä»¥å‡ºç°åœ¨ä»»ä½•åœ°æ–¹ï¼Œæ¯”å¦‚ä½ å¯ä»¥æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œä¸ä»…å¦‚æ­¤ä½ è¿˜å¯ä»¥å°†å‡½æ•°ä½œä¸ºè¿”å›å€¼ã€‚å¤§éƒ¨åˆ†å¸¸è§çš„ç¼–ç¨‹è¯­è¨€ä¸€åŠéƒ½å·²ç»æä¾›äº†å¯¹è¿™ç§ç¼–ç¨‹æ–¹å¼çš„æ”¯æŒï¼Œæ¯”å¦‚ JavaScriptï¼Œå†æœ‰ C# ä¸­çš„ LINQ å’Œ Java ä¸­çš„ `Lambda` å’Œé—­åŒ…çš„æ¦‚å¿µã€‚`Java 8`æœ€å¤§çš„ä¸€ä¸ªå¯¹å‡½æ•°å¼ç¼–ç¨‹æ”¯æŒçš„æ›´æ–°å°±æ˜¯`Stream API`ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥äº†è§£ä¸‹ï¼Œå®˜æ–¹æ–‡æ¡£åœ°å€ï¼š[https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html](https://link.zhihu.com/?target=https%3A//link.jianshu.com%3Ft%3Dhttps%3A%2F%2Fdocs.oracle.com%2Fjavase%2F8%2Fdocs%2Fapi%2Fjava%2Futil%2Fstream%2Fpackage-summary.html)

ç›¸æ¯”äºä»¥å‰çš„å‘½ä»¤å¼ç¼–ç¨‹ï¼Œåœ¨ Java ä¸­æˆ‘ä¸ªäººç°åœ¨æ›´å€¾å‘äºå‡½æ•°å¼ç¼–ç¨‹çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥è®©ä»£ç çš„é€»è¾‘æ›´æ¸…æ™°æ›´ä¼˜é›…ï¼Œæ¯”å¦‚åŒæ ·çš„é€»è¾‘ç”¨`Java 8`çš„`Stream`æ–¹å¼å†™å°±æ˜¯ï¼š

```bash
List<Number> results = collection.stream()
                                 .filter(n -> n > 5)
                                 .collect(Collectors.toList());
```

:::



**sealosï¼šæ ¸å¿ƒå…¥å£ï¼š**

```bash
[root@VM-4-6-centos cmd]# cd sealos/cmd/ && tree 
.
â”œâ”€â”€ add.go
â”œâ”€â”€ apply.go
â”œâ”€â”€ delete.go
â”œâ”€â”€ docs.go
â”œâ”€â”€ exec.go
â”œâ”€â”€ gen.go
â”œâ”€â”€ images.go
â”œâ”€â”€ reset.go
â”œâ”€â”€ root.go
â”œâ”€â”€ run.go  # æ•´ä¸ªsealoså…¥å£
â”œâ”€â”€ scp.go
â””â”€â”€ version.go
```



## [desktop](https://github.com/labring/sealos/tree/main/desktop) å‰ç«¯éƒ¨åˆ†

## cloudæ˜¯ä»¥å‰å†™çš„ä¸€äº›ä¸œè¥¿ â€“ ä¸é‡è¦

## [scripts](https://github.com/labring/sealos/tree/main/scripts) ä¸€äº›è„šæœ¬



## [service](https://github.com/labring/sealos/tree/main/service)

æœ‰ä¸€äº› `http` æœåŠ¡ï¼Œ`test` å°±æ˜¯é›†ç¾¤æµ‹è¯•ã€‚

`GitHub` ç¬¬ä¸‰æ–¹ç™»é™†å›è°ƒ~



## [pkg](https://github.com/labring/sealos/tree/main/pkg) å¤§é‡çš„å®ç°éƒ¨åˆ†

**åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦å’Œ`cluster.go`ç»“åˆèµ·æ¥äº†ï¼Œè¿™ä¸ªè´¯ç©¿å§‹ç»ˆçš„ï¼Œ`cluster.go`æè¿°æ•´ä¸ªé›†ç¾¤æœŸæœ›çŠ¶æ€ -- å‡ ä¸ª`master`ï¼Œå‡ ä¸ª`node`ï¼Œ`ssh`å¯†ç ã€ç«¯å£å·ã€é›†ç¾¤é•œåƒã€è´¯ç©¿å§‹ç»ˆï¼Œç‰¹åˆ«ç‰¹åˆ«é‡è¦  -- `sealos run` ä¹Ÿæ˜¯æ¸²æŸ“æˆç»“æ„ä½“ä¼ é€’ç»™å…¶ä»–æ¨¡å—~**

> ä¹Ÿæ˜¯æˆ‘éœ€è¦åšçš„ä¸»è¦éƒ¨åˆ†ï¼š
>
> + `apply`ï¼šæœŸæœ›çŠ¶æ€å’Œå®é™…çŠ¶æ€ä¸€è‡´   åˆ›å»ºçš„æ—¶å€™ï¼š
> + `ssh`ï¼šè¿œç¨‹è®¿é—®
> + `types`ï¼šå¾ˆé‡è¦ï¼Œæ•´ä¸ªpkgç»“æ„ä½“çš„å®šä¹‰ï¼ˆè´¯ç©¿å§‹ç»ˆï¼‰
> + `rountime`ï¼šç»“ç‚¹çš„å®ç° â€” å®ç°å¦‚ä½•å»è£… `k8s`
>
> ```bash
> buildimage   #é•œåƒæ„å»º
> cert k8s  #è¯ä¹¦ç®¡ç†
> checker   #é¢„å¤„ç†--æ£€æŸ¥é›†ç¾¤èƒ½å¦è£…ä¸Š
> client-go   #è°ƒç”¨k8sæ¥å£
> cloud   #æ˜¯ç”¨rustå†™çš„å‰ç«¯æ¨¡å—ï¼Œå†™äº†ä¸€åŠ
> config   #é…ç½®æ–‡ä»¶
> filesystem   #åˆ†å‘åˆ°æ¯ä¸ªç»“ç‚¹
> guest   #æ‰§è¡Œé•œåƒçš„cmd
> ```
>



## types ç±»å‹

```bash
[root@VM-4-6-centos pkg]# cd types/
[root@VM-4-6-centos types]# tree  
â”œâ”€â”€ v1beta1
â”‚Â Â  â”œâ”€â”€ cluster_args.go
â”‚Â Â  â”œâ”€â”€ cluster.go  
# cluster.goæè¿°æ•´ä¸ªé›†ç¾¤æœŸæœ›çŠ¶æ€ -- å‡ ä¸ªmasterï¼Œå‡ ä¸ªnodeï¼Œsshå¯†ç ã€ç«¯å£å·ã€é›†ç¾¤é•œåƒã€è´¯ç©¿å§‹ç»ˆï¼Œç‰¹åˆ«ç‰¹åˆ«é‡è¦  -- sealos runä¹Ÿæ˜¯æ¸²æŸ“æˆç»“æ„ä½“ä¼ é€’ç»™å…¶ä»–æ¨¡å—~
â”‚Â Â  â”œâ”€â”€ config.go  
â”‚Â Â  â”œâ”€â”€ constants.go
â”‚Â Â  â”œâ”€â”€ defaults_cluster.go
â”‚Â Â  â”œâ”€â”€ defaults.go
â”‚Â Â  â”œâ”€â”€ defaults_infra.go
â”‚Â Â  â”œâ”€â”€ doc.go
â”‚Â Â  â”œâ”€â”€ helper.go
â”‚Â Â  â”œâ”€â”€ infra.go															
â”‚Â Â  â”œâ”€â”€ register.go 
â”‚Â Â  â””â”€â”€ zz_generated.deepcopy.go
â””â”€â”€ validation
    â””â”€â”€ validation_infra.go

2 directories, 13 files
```

> `cluster.go`æè¿°æ•´ä¸ªé›†ç¾¤æœŸæœ›çŠ¶æ€ï¼ˆä½¿ç”¨çš„æ˜¯å‘½ä»¤å¼ï¼‰ -- å‡ ä¸ª`master`ï¼Œå‡ ä¸ª`node`ï¼Œ`ssh`å¯†ç ã€ç«¯å£å·ã€é›†ç¾¤é•œåƒã€è´¯ç©¿å§‹ç»ˆï¼Œç‰¹åˆ«ç‰¹åˆ«é‡è¦  -- `sealos run`ä¹Ÿæ˜¯æ¸²æŸ“æˆç»“æ„ä½“ä¼ é€’ç»™å…¶ä»–æ¨¡å—~ 
>
> + é›†ç¾¤æ²¡æœ‰ï¼Œåˆ›å»ºã€‚
> + é›†ç¾¤æœ‰ï¼Œå­—æ®µæŒ¨ç€æ¯”å¯¹ã€‚
>
> **ç°åœ¨çš„å†™æ³•ä¸æ˜¯å¾ˆæ»¡æ„~ï¼Œå¯¹äºå‡çº§ç­‰å…¶ä»–æ“ä½œéœ€è¦ä¼˜åŒ–ã€‚**



### rountime

+ [runtime.go](https://github.com/labring/sealos/blob/main/pkg/runtime/runtime.go)

**æˆ‘ä»¬çœ‹ä¸‹ interfaceï¼š**

> å„ä¸ªç»“ç‚¹åšäº†ä»€ä¹ˆï¼Œæˆ‘ä»¬å†™äº† `*KubeadmRuntime` å®ç°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å†™ä¸€ä¸ªäºŒè¿›åˆ¶çš„å®ç°ï¼Œä¹Ÿå¯ä»¥å†™ä¸€ä¸ª `k3s` æˆ–è€… `k0s` å®ç°ã€‚

```go
type Interface interface {
	Init() error
	Reset() error
	JoinNodes(newNodesIPList []string) error
	DeleteNodes(nodeIPList []string) error
	JoinMasters(newMastersIPList []string) error
	DeleteMasters(mastersIPList []string) error
	SyncNodeIPVS(mastersIPList, nodeIPList []string) error
}
```



### sshåº“

`copy` æ¨¡å—åˆ°æŸä¸€ä¸ªç»“ç‚¹ï¼Œåšä¸€äº›è¿œç¨‹æ‰§è¡Œå‘½ä»¤



## ç›®çš„

+ [ä½¿ç”¨k0sæˆ–è€…k3så®ç°](https://github.com/labring/sealos/issues/1943)

```bash
sealos run k0s:latest --masters xxx --nodes xxxx --passwd xxxx
```



::: details å†åˆ›å»ºä¸€ä¸ªk0sæˆ–è€…k3sï¼Œç°æœ‰ä¸€ä¸ªk8s
![image-20221023230147303](http://sm.nsddd.top/smimage-20221023230147303.png)



**å°±æ¯”å¦‚è¯´ä¸‹é¢çš„æ‹‰å–å‘½ä»¤ï¼š**

```bash
# Download and install sealos. sealos is a golang binary so you can just download and copy to bin. You may also download it from release page.
$ wget  https://github.com/labring/sealos/releases/download/v4.1.3/sealos_4.1.3_linux_amd64.tar.gz  && \
    tar -zxvf sealos_4.1.3_linux_amd64.tar.gz sealos &&  chmod +x sealos && mv sealos /usr/bin 
# Create a cluster	
$ sealos run labring/kubernetes:v1.25.0 labring/helm:v3.8.2 labring/calico:v3.24.1 \
     --masters 192.168.64.2,192.168.64.22,192.168.64.20 \
     --nodes 192.168.64.21,192.168.64.19 -p [your-ssh-passwd]
```

:::

> æ³¨æ„ï¼šæˆ‘ä»¬è¿˜éœ€è¦åˆ¤æ–­è¾“å…¥çš„æ˜¯k0sè¿˜æ˜¯k8sï¼Œç„¶åæ ¹æ®è¿™ä¸ªæ¥é€‰æ‹©åˆé€‚çš„æ¥å£æ¥å…¥~



## test

æµ‹è¯•ï¼Œå…³äº makefile

```bash
root@cubmaster01:/workspces/sealos# make help

Usage: make <TARGETS> <OPTIONS> ...

Targets:
  build                Build source code for host platform.
  build.multiarch      Build source code for multiple platforms. See option PLATFORMS.
  lint                 Check syntax and styling of go sources.
  format               Gofmt (reformat) package sources.
  coverage             Run unit tests and output test coverage.
  compress             Compress the binaries using upx for host platform.
  compress.multiarch   Compress the binaries using upx for multiple platforms. See option PLATFORMS.
  verify-license       Verify the license headers for all files.
  add-license          Ensure source code files have license headers.
  gen                  Generate all necessary files.
  tools                Install dependent tools.
  clean                Remove all files that are created by building.
  update-contrib       Update list of contributors.
  help                 Show this help info.

Options:
  DEBUG            Whether or not to generate debug symbols. Default is 0.

  BINS             Binaries to build. Default is all binaries under cmd.
                   This option is available when using: make {build/compress}(.multiarch)
                   Example: make build BINS="sealos sealctl"

  PLATFORMS        Platform to build for. Default is linux_arm64 and linux_amd64.
                   This option is available when using: make {build/compress}.multiarch
                   Example: make build.multiarch PLATFORMS="linux_arm64 linux_amd64"

  V                Set to 1 enable verbose build. Default is 0.
```





## END é“¾æ¥

<ul><li><div><a href = '2.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '4.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 
