+ [author](https://github.com/3293172751)

# ç¬¬12èŠ‚ LoopæŒ‡ä»¤

+ [å›åˆ°ç›®å½•](../README.md)
+ [å›åˆ°é¡¹ç›®é¦–é¡µ](../../README.md)
+ [ä¸Šä¸€èŠ‚](11.md)
> â¤ï¸ğŸ’•ğŸ’•æ±‡ç¼–è¯­è¨€ç›®å‰ä»åœ¨å‘æŒ¥ç€ä¸å¯æ›¿ä»£çš„ä½œç”¨ï¼Œåœ¨æ•ˆç‡ä¸Šæ— å¯æ›¿ä»£ï¼Œåœ¨åº•å±‚ï¼Œå­¦ä¹ linuxå†…æ ¸ï¼Œè®¡ç®—æœºå¤–å›´è®¾å¤‡å’Œé©±åŠ¨ï¼Œéƒ½ç¦»ä¸å¼€æ±‡ç¼–ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)
---
[TOC]

## loopæŒ‡ä»¤

```assembly
assume cs:code
code segment
	mov ax,2
	mov cx,11	;cxè®¾ç½®ä¸º11   å¾ªç¯11æ¬¡
s:  
	add ax,ax   ; 2,4,8,16 .... 
	loop s
	
	mov ax, 4c00h
	int 21h
code ends
end
```

+ **åŠŸèƒ½ï¼šå®ç°å¾ªç¯ï¼ˆè®¡æ•°å‹å¾ªç¯ï¼‰**

+ æŒ‡ä»¤çš„æ ¼å¼ï¼š

  ```
  loop æ ‡å·
  ```

> CPUæ‰§è¡ŒloopæŒ‡ä»¤è¦è¿›è¡Œçš„æ“ä½œï¼š
>
> + (cx) = (cx) - 1;
> + åˆ¤æ–­cxçš„å€¼
>   + ä¸ä¸º`0`è½¬åˆ°æ ‡å·`s`å¤„
>   + ä¸º`0`åˆ™å‘ä¸‹æ‰§è¡Œ

**è¦æ±‚ï¼š**

1. CXä¸­è¦æå‰å­˜æ”¾å¾ªç¯æ¬¡æ•°
2. è¦å®šä¹‰ä¸€ä¸ªæ ‡å·
3. åœ¨æ ‡å·`s`å’Œ`loop`æŒ‡ä»¤ä¸­é—´çš„éƒ¨åˆ†ï¼Œå†™å¾ªç¯æ‰§è¡Œçš„ç¨‹åºæ®µï¼ˆå¾ªç¯ä½“ï¼‰



## debugè°ƒè¯•ç¨‹åº

> <img src="assets/image-20220805141519564.png" alt="image-20220805141519564" style="zoom:67%;" />

> æˆ‘ä»¬å¯ä»¥çœ‹åˆ°`loop`æŒ‡ä»¤åçš„`0006`æ˜¯`add`çš„åç§»åœ°å€ï¼Œè¯´æ˜`s`æ ‡å¿—æ˜¯ä¸€ä¸ªåœ°å€

**å•æ­¥è°ƒè¯•**

<img src="assets/image-20220805141642832.png" alt="image-20220805141642832" style="zoom:67%;" />

> å¾ˆæ˜æ˜¾çš„çœ‹å‡º
>
> + åœ¨`loop`å`ip`å˜å›äº†`0006`,å¯ä»¥æ‰€loopæ”¹å˜çš„æ˜¯IPå€¼
>
> + `CS`åœ¨ä¸æ–­åœ°å‡å°‘ï¼Œå½“`CS`å‡å°‘ä¸º`0000`åï¼Œ`loop`å°±ä¸ä¼šå†è·³è½¬ï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œåé¢æŒ‡ä»¤
>
>   <img src="assets/image-20220805142026838.png" alt="image-20220805142026838" style="zoom:67%;" />



## æ¡ˆä¾‹

### ç”¨123Ã—236

```assembly
assume cs:code
code segment
	mov ax,0
	mov cx,236	;cxè®¾ç½®ä¸º236
s:  
	add ax,123   ; 2,4,8,16 .... 
	loop s
	
	mov ax, 4c00h
	int 21h
code ends
end
```

### ffff:0006å­—èŠ‚å•å…ƒæ•°Ã—3 ç»“æœå­˜å‚¨dx

1. å…ˆå°†å†…å­˜ä¸­çš„æ•°æ®å–å‡º  â€“ è®¾ç½®æ®µåœ°å€å’Œåç§»åœ°å€

```assembly
assume cs:code
code segment
	mov ax,0ffffh	;æ®µåœ°å€  -- æ±‡ç¼–è¯­è¨€ä¸­ï¼Œæ•°æ®ä¸èƒ½ä»¥å­—æ¯å¼€å¤´ï¼Œæ‰€ä»¥ + 0
	mov ds, ax
	mov bx, 6		;åç§»åœ°å€æ”¾å…¥bx
	mov al, [bx]	;æ”¾å…¥alå¯„å­˜å™¨ï¼ˆå­—èŠ‚ï¼‰
	mov ah, 0
	
	mov dx, 0	
	mov cs, 3     ;å¾ªç¯æ¬¡æ•°
s:  
	add dx,ax   ; 2,4,8,16 .... 
	loop s
	
	mov ax, 4c00h
	int 21h
code ends
end
```

> æŠŠdxæ¢æˆdlå¯ä»¥ä¸ï¼Ÿ  å¯èƒ½ä¼šäº§ç”Ÿæº¢å‡º



## æ®µå‰ç¼€

**å¯¹ç­–ï¼šåœ¨[idata]å‰æ˜¾ç¤ºåœ°å†™ä¸Šæ®µå¯„å­˜å™¨**

```assembly
mov ax, 2000h
mov ds,ax
mov bx,0
mov al, ds:[bx]
```

**å¸¸é‡ä½œä¸ºåç§»åœ°å€æ—¶åœ¨ç¨‹åºä¸­**

```assembly
mov al, [0]   	;åŒ  mov al, 0
mov al,ds:[0]	;åŒ  mov al, ds * 16 +0  
```

**å˜é‡ä½œä¸ºåç§»åœ°å€æ—¶åœ¨ç¨‹åºä¸­**

```assembly
mov al, [bx]  	;åŒmov al,ds:[bx]
mov al,ds:[bx]	
```



## è®¿é—®è¿ç»­åœ°å†…å­˜å•å…ƒ â€“ loopå’Œ[bx]è”æ‰‹

é—®é¢˜ï¼šè®¡ç®—`ffff:0 ~ ffff:b`å­—èŠ‚å•å…ƒä¸­çš„æ•°æ®å’Œï¼Œç»“æœå­˜å‚¨åœ¨`dx`ä¸­

**å–å‡º8ä½æ•°æ®ï¼ŒåŠ åˆ°16ä½å¯„å­˜å™¨ä¸­**

```assembly
mov al,ds:[addr]
mov ah,0   ;å–æ•°
add ds,ax

.....
```



**ä½¿ç”¨loopå¾ªç¯æ”¹è¿›**

```assembly
assume cs:code
code segment
	
	mov ax,0ffffh
	mov ds,ax
	mov ax,0020h
	mov es,ax
	
	mov bx,0
	mov cx,12
	
	s: mov dl,[bx]
	mov es:[bx],dl
	int bx
	loop s
	
	mov ax, 4c00h 
	int 21h
code ends
end
```

**é—®é¢˜**

+ ç¨‹åºä¸­ç›´æ¥å†™å…¥æ•°æ®å¾ˆå±é™©ï¼

  æœ‰äº›åœ°æ–¹ä¸åº”è¯¥æ”¾æ•°æ®éƒ¨åˆ†ï¼Œå¦‚ä½•å®‰å…¨çš„å­˜æ”¾ï¼Ÿ



## ä»£ç æ®µä¸­é—´ä½¿ç”¨æ•°æ®

**ç¼–ç¨‹è®¡ç®—ä¸‹é¢8ä¸ªæ•°æ®çš„å’Œï¼Œç»“æœæ”¾åœ¨axå¯„å­˜å™¨ä¸­**

```assembly
assume cs:code
code segment
;ç¼–ç¨‹è®¡ç®—ä¸‹é¢8ä¸ªæ•°æ®çš„å’Œï¼Œç»“æœæ”¾åœ¨axå¯„å­˜å™¨ä¸­1,2,3,4,5,6,7,8
	dw 1,2,3,4,5,6,7,8	
start:
	mov bx,0	;å®šä¹‰å¼€å§‹çš„åç§»åœ°å€ä¸º0
	mov ax,0
	mov cx,8	;å¾ªç¯8æ¬¡
	
addNumber:
	add ax,cs:[bx]  
	add bx,2	;ä»¥2ä¸ªåç§»ä½ä½œä¸ºå•ä½ï¼Œæ¯æ¬¡+2
	loop addNumber
 
	mov ax,4c00h
	int 21h
	
code ends
end start
```

**dwï¼š`define word` å®šä¹‰å­—å‹æ•°æ®**

+ dwï¼šå®šä¹‰ä¸€ä¸ªå­—
+ dbï¼šå®šä¹‰ä¸€ä¸ªå­—èŠ‚
+ ddï¼šå®šä¹‰ä¸€ä¸ªåŒå­—

> æœ‰äº†è¿™ä¸ª`dw`ï¼Œæˆ‘ä»¬æŠŠåé¢çš„æ•°éƒ½åŠ èµ·æ¥ï¼Œå°±å¾ˆç®€å•äº†



**startï¼šå®šä¹‰ä¸€ä¸ªæ ‡å·ï¼ŒæŒ‡ç¤ºä»£ç å¼€å§‹çš„ä½ç½®**

> ç¨‹åºåŠ è½½åï¼Œ`CS:IP`æŒ‡å‘è¦æ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤åœ¨`start`å¤„

**end startï¼šå®šä¹‰æ ‡å·ï¼Œé™¤äº†é€šçŸ¥ç¼–è¯‘å™¨ç¨‹åºç»“æŸå¤–ï¼Œè¿˜å¯ä»¥é€šçŸ¥ç¼–è¯‘å™¨ç¨‹åºçš„å…¥å£åœ¨ä»€ä¹ˆåœ°æ–¹ã€‚**



## ä»£ç æ®µä½¿ç”¨æ ˆ â€“ æ•°æ®é€†åºå­˜æ”¾

```assembly
assume cs:code
code segment
;ç¼–ç¨‹è®¡ç®—ä¸‹é¢8ä¸ªæ•°æ®çš„å’Œï¼Œç»“æœæ”¾åœ¨axå¯„å­˜å™¨ä¸­1,2,3,4,5,6,7,8
	dw 1,2,3,4,5,6,7,8	
start: 
	mov ax,cs	;å®šä¹‰å¼€å§‹çš„åç§»åœ°å€ä¸º0
	mov ss,ax	;æ ˆæ®µå¼€å§‹çš„ä½ç½®æ˜¯CS çš„ä½ç½®
	mov sp,30h	;spæŒ‡å‘æ ˆé¡¶æŒ‡é’ˆ
	
	;å…¥æ ˆ
	mov bx,0
	mov cx,8
addNumber:
	push cs:[bx]
	add bx,2
	loop addNumber
 
 	;å‡ºæ ˆ
 	mov bx,0
 	mov cx,8
 s:
 	pop cs:[bx]
 	add bx,2
 	loop s
 	
	mov ax,4c00h
	int 21h
	
code ends
end start
```



## (BOSS)æ•°æ®ã€ä»£ç ã€æ ˆæ”¾å…¥ä¸åŒæ®µ

> åœ¨ä¸Šä¸€ä¸ªç”¨æ®µé€†åºå­˜æ”¾ï¼Œæˆ‘ä»¬å‘ç°æ•°æ®ã€ä»£ç ã€æ ˆéƒ½åœ¨åŒä¸€ä¸ªæ®µï¼Œçœ‹èµ·æ¥æ¯”è¾ƒæ··ä¹±ï¼Œäºæ˜¯è¿›è¡Œä¿®æ”¹ï¼Œæ”¾å…¥ä¸åŒçš„æ®µ

```assembly
assume cs:code,ds:data,ss:stack
data segment
	dw 1,2,3,4,5,6,7,8
data ends
 	
stack segment
	dw 0,0,0,0,0,0,0,0,0,0
stack ends

code segment
start: 
	mov ax,stack ;å®šä¹‰å¼€å§‹çš„åç§»åœ°å€ä¸º0  ç¨‹åºå¼€å§‹çš„åœ°æ–¹
	mov ss,ax	;æ ˆæ®µå¼€å§‹çš„ä½ç½®æ˜¯CS çš„ä½ç½®
	mov sp,20h	;spæŒ‡å‘æ ˆé¡¶æŒ‡é’ˆ
	mov ax,data	;æ•°æ®æ®µ --> ax
	mov ds,ax
	
	;å…¥æ ˆ
	mov bx,0
	mov cx,8
s:
	push [bx]
	add bx,2
	loop s
 
 	;å‡ºæ ˆ
 	mov bx,0
 	mov cs,8
 s0:
 	pop [bx]
 	add bx,2
 	loop s0
 	
	mov ax,4c00h
	int 21h
	
code ends
end start
```



## END é“¾æ¥

+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](11.md)
+ [ä¸‹ä¸€èŠ‚](13.md)
---
+ [å‚ä¸è´¡çŒ®â¤ï¸ğŸ’•ğŸ’•](https://github.com/3293172751/Block_Chain/blob/master/Git/git-contributor.md)