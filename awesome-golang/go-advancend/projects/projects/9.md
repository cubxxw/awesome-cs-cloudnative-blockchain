+ [ğŸ”¥ å¼€æºåœ°å€](https://github.com/cubxxw/iam)

# ç¬¬9èŠ‚ é™æ€ä»£ç æ£€æµ‹

<br>
<div><a href = '8.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '10.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>

> â¤ï¸ğŸ’•ğŸ’•During the winter vacation, I followed up and learned two projects: tiktok project and IAM project, and summarized and practiced the CloudNative project and Go language. I learned a lot in the process.Myblog:[http://nsddd.top](http://nsddd.top/)

---
[[TOC]]
[TOC]

## é€‰æ‹© golangci-lint åšé™æ€ä»£ç æ£€æŸ¥

+ [åšå®¢æ–‡ç« åœ°å€ï¼š**golangci-lin: Fast linters Runner for Go**](https://nsddd.top/archives/golangci)

åœ¨åš Go é¡¹ç›®å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è‚¯å®šéœ€è¦å¯¹ Go ä»£ç åšé™æ€ä»£ç æ£€æŸ¥ã€‚è™½ç„¶ Go å‘½ä»¤æä¾›äº† go vet å’Œ go tool vetï¼Œä½†æ˜¯å®ƒä»¬æ£€æŸ¥çš„å†…å®¹è¿˜ä¸å¤Ÿå…¨é¢ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ›´åŠ å¼ºå¤§çš„é™æ€ä»£ç æ£€æŸ¥å·¥å…·ã€‚

`golangci-lint`ï¼Œæ˜¯ç›®å‰ä½¿ç”¨æœ€å¤šï¼Œä¹Ÿæœ€å—æ¬¢è¿çš„é™æ€ä»£ç æ£€æŸ¥å·¥å…·ã€‚

**ä¼˜ç‚¹ï¼š**

+ **é€Ÿåº¦éå¸¸å¿«**ï¼šgolangci-lint æ˜¯åŸºäº gometalinter å¼€å‘çš„ï¼Œä½†æ˜¯å¹³å‡é€Ÿåº¦è¦æ¯” gometalinter å¿« 5 å€ã€‚golangci-lint é€Ÿåº¦å¿«çš„åŸå› æœ‰ä¸‰ä¸ªï¼šå¯ä»¥å¹¶è¡Œæ£€æŸ¥ä»£ç ï¼›å¯ä»¥å¤ç”¨ go build ç¼“å­˜ï¼›ä¼šç¼“å­˜åˆ†æç»“æœã€‚
+ **å¯é…ç½®**ï¼šæ”¯æŒ YAML æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œè®©æ£€æŸ¥æ›´çµæ´»ï¼Œæ›´å¯æ§ã€‚
+ **IDE é›†æˆ**ï¼šå¯ä»¥é›†æˆè¿›å¤šä¸ªä¸»æµçš„ IDEï¼Œä¾‹å¦‚ VS Codeã€GNU Emacsã€Sublime Textã€Goland ç­‰ã€‚
+ **linter èšåˆå™¨**ï¼š1.41.1 ç‰ˆæœ¬çš„ golangci-lint é›†æˆäº† 76 ä¸ª linterï¼Œä¸éœ€è¦å†å•ç‹¬å®‰è£…è¿™ 76 ä¸ª linterã€‚å¹¶ä¸” golangci-lint è¿˜æ”¯æŒè‡ªå®šä¹‰ linterã€‚
+ **æœ€å°çš„è¯¯æŠ¥æ•°**ï¼šgolangci-lint è°ƒæ•´äº†æ‰€é›†æˆ linter çš„é»˜è®¤è®¾ç½®ï¼Œå¤§å¹…åº¦å‡å°‘äº†è¯¯æŠ¥ã€‚
+ **è‰¯å¥½çš„è¾“å‡º**ï¼šè¾“å‡ºçš„ç»“æœå¸¦æœ‰é¢œè‰²ã€ä»£ç è¡Œå·å’Œ linter æ ‡è¯†ï¼Œæ˜“äºæŸ¥çœ‹å’Œå®šä½ã€‚



**ä¸‹å›¾æ˜¯ä¸€ä¸ª golangci-lint çš„æ£€æŸ¥ç»“æœï¼š**

![image-20230221102053513](http://sm.nsddd.top/sm202302211020592.png)



**ä½ å¯ä»¥çœ‹åˆ°ï¼Œè¾“å‡ºçš„æ£€æŸ¥ç»“æœä¸­åŒ…æ‹¬å¦‚ä¸‹ä¿¡æ¯ï¼š**

+ æ£€æŸ¥å‡ºé—®é¢˜çš„æºç æ–‡ä»¶ã€è¡Œå·å’Œé”™è¯¯è¡Œå†…å®¹ã€‚
+ å‡ºé—®é¢˜çš„åŸå› ï¼Œä¹Ÿå°±æ˜¯æ‰“å°å‡ºä¸ç¬¦åˆæ£€æŸ¥è§„åˆ™çš„åŸå› ã€‚
+ æŠ¥é”™çš„ linterã€‚



é€šè¿‡æŸ¥çœ‹ golangci-lint çš„è¾“å‡ºç»“æœï¼Œå¯ä»¥å‡†ç¡®åœ°å®šä½åˆ°æŠ¥é”™çš„ä½ç½®ï¼Œå¿«é€Ÿå¼„æ˜ç™½æŠ¥é”™çš„åŸå› ï¼Œæ–¹ä¾¿å¼€å‘è€…ä¿®å¤ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œ**golangci-lint è¿˜æœ‰ä¸€ä¸ªéå¸¸å¤§çš„ä¼˜ç‚¹ï¼šå½“å‰æ›´æ–°è¿­ä»£é€Ÿåº¦å¾ˆå¿«ï¼Œä¸æ–­æœ‰æ–°çš„ linter è¢«é›†æˆåˆ° golangci-lint ä¸­ã€‚æœ‰è¿™ä¹ˆå…¨çš„ linter ä¸ºä½ çš„ä»£ç ä¿é©¾æŠ¤èˆªï¼Œä½ åœ¨äº¤ä»˜ä»£ç æ—¶è‚¯å®šä¼šæ›´æœ‰è‡ªä¿¡ã€‚**



## å‘½ä»¤

åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦å®‰è£… golangci-lintã€‚golangci-lint çš„å®‰è£…æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä½ åªéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°±å¯ä»¥å®‰è£…äº†ã€‚

```bash
$ go get github.com/golangci/golangci-lint/cmd/golangci-lint@v1.41.1
$ golangci-lint version # è¾“å‡º golangci-lint ç‰ˆæœ¬å·ï¼Œè¯´æ˜å®‰è£…æˆåŠŸ
golangci-lint has version v1.50.1 built from (unknown, mod sum: "h1:C829clMcZXEORakZlwpk7M4iDw2XiwxxKaG504SZ9zY=") on (unknown)
```

è¿™é‡Œæ³¨æ„ï¼Œä¸ºäº†é¿å…å®‰è£…å¤±è´¥ï¼Œå¼ºçƒˆå»ºè®®ä½ å®‰è£… `golangci-lint releases page` ä¸­çš„æŒ‡å®šç‰ˆæœ¬ï¼Œä¾‹å¦‚ v1.41.1ã€‚

**é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬åº”è¯¥å®šæœŸçš„æ£€æŸ¥ golangCI çš„ç‰ˆæœ¬ã€‚**



**`golangci-link` æ”¯æŒçš„å­å‘½ä»¤å¦‚ä¸‹ï¼š**

![image-20230221104642416](https://sm.nsddd.top/sm202302211046519.png)

æ­¤å¤–ï¼Œ`golangci-lint` è¿˜æ”¯æŒä¸€äº›å…¨å±€é€‰é¡¹ã€‚å…¨å±€é€‰é¡¹æ˜¯æŒ‡é€‚ç”¨äºæ‰€æœ‰å­å‘½ä»¤çš„é€‰é¡¹ï¼Œ`golangci-lint` æ”¯æŒçš„å…¨å±€é€‰é¡¹å¦‚ä¸‹ï¼š

![image-20230221104814768](http://sm.nsddd.top/sm202302211048863.png)



### run å‘½ä»¤

run å‘½ä»¤æ‰§è¡Œ `golangci-lint`ï¼Œå¯¹ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œæ˜¯ `golangci-lint` æœ€ä¸ºæ ¸å¿ƒçš„ä¸€ä¸ªå‘½ä»¤ã€‚run æ²¡æœ‰å­å‘½ä»¤ï¼Œä½†æœ‰å¾ˆå¤šé€‰é¡¹ã€‚run å‘½ä»¤çš„å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼Œæˆ‘ä¼šåœ¨è®²è§£å¦‚ä½•æ‰§è¡Œé™æ€ä»£ç æ£€æŸ¥çš„æ—¶å€™è¯¦ç»†ä»‹ç»ã€‚



### cache å‘½ä»¤

cache å‘½ä»¤ç”¨æ¥è¿›è¡Œç¼“å­˜æ§åˆ¶ï¼Œå¹¶æ‰“å°ç¼“å­˜çš„ä¿¡æ¯ã€‚å®ƒåŒ…å«ä¸¤ä¸ªå­å‘½ä»¤ï¼š

+ clean ç”¨æ¥æ¸…é™¤ cacheï¼Œå½“æˆ‘ä»¬è§‰å¾— cache çš„å†…å®¹å¼‚å¸¸ï¼Œæˆ–è€… cache å ç”¨ç©ºé—´è¿‡å¤§æ—¶ï¼Œå¯ä»¥é€šè¿‡ `golangci-lint cache clean` æ¸…é™¤ `cache`ã€‚

+ status ç”¨æ¥æ‰“å° cache çš„çŠ¶æ€ï¼Œæ¯”å¦‚ cache çš„å­˜æ”¾ç›®å½•å’Œ cache çš„å¤§å°ï¼Œä¾‹å¦‚ï¼š

  ```bash
  $ golangci-lint cache status
  Dir: /home/colin/.cache/golangci-lint
  Size: 773.4KiB
  ```



###  completion å‘½ä»¤

completion å‘½ä»¤åŒ…å« 4 ä¸ªå­å‘½ä»¤ bashã€fishã€powershell å’Œ zshï¼Œåˆ†åˆ«ç”¨æ¥è¾“å‡º bashã€fishã€powershell å’Œ zsh çš„è‡ªåŠ¨è¡¥å…¨è„šæœ¬ã€‚

**ä¸‹é¢æ˜¯ä¸€ä¸ªé…ç½® bash è‡ªåŠ¨è¡¥å…¨çš„ç¤ºä¾‹ï¼š**

```bash
$ golangci-lint completion bash > ~/.golangci-lint.bash
$ echo "source '$HOME/.golangci-lint.bash'" >> ~/.bashrc
$ source ~/.bashrc
```

æ‰§è¡Œå®Œä¸Šé¢çš„å‘½ä»¤ï¼Œé”®å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå³å¯è‡ªåŠ¨è¡¥å…¨å­å‘½ä»¤ï¼š

```bash
$ golangci-lint comp<TAB>
```

ä¸Šé¢çš„å‘½ä»¤è¡Œä¼šè‡ªåŠ¨è¡¥å…¨ä¸º `golangci-lint completion` ã€‚



**ä¸‹é¢æ˜¯ä¸€ä¸ª zsh è‡ªåŠ¨è¡¥å…¨çš„ç¤ºä¾‹ï¼š**

```
$ golangci-lint completion zsh > ~/.golangci-lint.zsh
$ echo "source '$HOME/.golangci-lint.zsh'" >> ~/.zshrc
$ source ~/.zshrc
```

![image-20230221111851509](http://sm.nsddd.top/sm202302211118569.png)





### config å‘½ä»¤

config å‘½ä»¤å¯ä»¥æ‰“å° golangci-lint å½“å‰ä½¿ç”¨çš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œä¾‹å¦‚ï¼š

```bash
$ golangci-lint config path
.golangci.yaml
```



### linters å‘½ä»¤

linters å‘½ä»¤å¯ä»¥æ‰“å°å‡º `golangci-lint` æ‰€æ”¯æŒçš„ linterï¼Œå¹¶å°†è¿™äº› linter åˆ†æˆä¸¤ç±»ï¼Œåˆ†åˆ«æ˜¯é…ç½®ä¸ºå¯ç”¨çš„ linter å’Œé…ç½®ä¸ºç¦ç”¨çš„ linterï¼Œä¾‹å¦‚ï¼š

```bash
$ golangci-lint linters
Enabled by your configuration linters:
...
deadcode: Finds unused code [fast: true, auto-fix: false]
...
Disabled by your configuration linters:
exportloopref: checks for pointers to enclosing loop variables [fast: true, auto-fix: false]
...
```



## golangci-lint é…ç½®

å’Œå…¶ä»– linter ç›¸æ¯”ï¼Œgolangci-lint ä¸€ä¸ªéå¸¸å¤§çš„ä¼˜ç‚¹æ˜¯ä½¿ç”¨èµ·æ¥éå¸¸çµæ´»ï¼Œè¿™è¦å¾—ç›Šäºå®ƒå¯¹è‡ªå®šä¹‰é…ç½®çš„æ”¯æŒã€‚

golangci-lint æ”¯æŒä¸¤ç§é…ç½®æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯å‘½ä»¤è¡Œé€‰é¡¹å’Œé…ç½®æ–‡ä»¶ã€‚å¦‚æœ bool/string/int çš„é€‰é¡¹åŒæ—¶åœ¨å‘½ä»¤è¡Œé€‰é¡¹å’Œé…ç½®æ–‡ä»¶ä¸­è¢«æŒ‡å®šï¼Œå‘½ä»¤è¡Œçš„é€‰é¡¹å°±ä¼šè¦†ç›–é…ç½®æ–‡ä»¶ä¸­çš„é€‰é¡¹ã€‚å¦‚æœæ˜¯ slice ç±»å‹çš„é€‰é¡¹ï¼Œåˆ™å‘½ä»¤è¡Œå’Œé…ç½®ä¸­çš„é…ç½®ä¼šè¿›è¡Œåˆå¹¶ã€‚

golangci-lint run æ”¯æŒå¾ˆå¤šå‘½ä»¤è¡Œé€‰é¡¹ï¼Œå¯é€šè¿‡golangci-lint run -hæŸ¥çœ‹ï¼Œè¿™é‡Œé€‰æ‹©ä¸€äº›æ¯”è¾ƒé‡è¦çš„é€‰é¡¹è¿›è¡Œä»‹ç»ï¼Œè§ä¸‹è¡¨ï¼š

| é€‰é¡¹                   | ç®€ä»‹                               |
| ---------------------- | ---------------------------------- |
| `--config`             | æŒ‡å®šgolangci-lintçš„é…ç½®æ–‡ä»¶è·¯å¾„    |
| `--deadline`           | æŒ‡å®šlintçš„æœ€å¤§æ‰§è¡Œæ—¶é—´ï¼Œè¶…æ—¶åˆ™é€€å‡º |
| `--disable`            | ç¦ç”¨æŒ‡å®šçš„lintæ£€æŸ¥                 |
| `--enable`             | å¯ç”¨æŒ‡å®šçš„lintæ£€æŸ¥                 |
| `--exclude`            | æ’é™¤æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•               |
| `--fix`                | ä¿®å¤lintèƒ½å¤Ÿè‡ªåŠ¨ä¿®å¤çš„é—®é¢˜         |
| `--issues-exit-code`   | æŒ‡å®šlintå­˜åœ¨é—®é¢˜æ—¶çš„é€€å‡ºç          |
| `--print-issued-lines` | æ‰“å°å…·ä½“å“ªä¸€è¡Œå­˜åœ¨é—®é¢˜             |
| `--skip-dirs`          | è·³è¿‡æŒ‡å®šçš„ç›®å½•                     |
| `--skip-files`         | è·³è¿‡æŒ‡å®šçš„æ–‡ä»¶                     |
| `--timeout`            | æŒ‡å®šlintçš„æœ€å¤§æ‰§è¡Œæ—¶é—´ï¼Œè¶…æ—¶åˆ™é€€å‡º |
| `--tests`              | åŒ…æ‹¬æµ‹è¯•æ–‡ä»¶                       |
| `--vendor`             | åŒ…æ‹¬vendorç›®å½•ä¸‹çš„ä»£ç              |
| `--verbose`            | æ˜¾ç¤ºè¯¦ç»†çš„è¾“å‡ºä¿¡æ¯                 |

> ä»¥ä¸Šæ˜¯ä¸€äº›å¸¸ç”¨çš„golangci-lintå‘½ä»¤è¡Œé€‰é¡¹ï¼ŒåŒ…æ‹¬æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„ã€æ§åˆ¶lintæ‰§è¡Œçš„æ—¶é—´å’ŒèŒƒå›´ã€ç¦ç”¨æˆ–å¯ç”¨æŸäº›æ£€æŸ¥ã€ä¿®å¤èƒ½å¤Ÿè‡ªåŠ¨ä¿®å¤çš„é—®é¢˜ç­‰ç­‰ã€‚è¿™äº›é€‰é¡¹å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°æ§åˆ¶lintçš„è¡Œä¸ºï¼Œæé«˜ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚

æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ `golangci-lint`é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œé»˜è®¤çš„é…ç½®æ–‡ä»¶åä¸º`.golangci.yaml`ã€`.golangci.toml`ã€`.golangci.json`ï¼Œå¯ä»¥é€šè¿‡`-c`é€‰é¡¹æŒ‡å®šé…ç½®æ–‡ä»¶åã€‚é€šè¿‡é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å®ç°ä¸‹é¢å‡ ç±»åŠŸèƒ½ï¼š

+ golangci-lint æœ¬èº«çš„ä¸€äº›é€‰é¡¹ï¼Œæ¯”å¦‚è¶…æ—¶ã€å¹¶å‘ï¼Œæ˜¯å¦æ£€æŸ¥*_test.goæ–‡ä»¶ç­‰ã€‚
+ é…ç½®éœ€è¦å¿½ç•¥çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚
+ é…ç½®å¯ç”¨å“ªäº› linterï¼Œç¦ç”¨å“ªäº› linterã€‚
+ é…ç½®è¾“å‡ºæ ¼å¼ã€‚
+ golangci-lint æ”¯æŒå¾ˆå¤š linterï¼Œå…¶ä¸­æœ‰äº› linter æ”¯æŒä¸€äº›é…ç½®é¡¹ï¼Œè¿™äº›é…ç½®é¡¹å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ã€‚
+ é…ç½®ç¬¦åˆæŒ‡å®šæ­£åˆ™è§„åˆ™çš„æ–‡ä»¶å¯ä»¥å¿½ç•¥çš„ linterã€‚
+ è®¾ç½®é”™è¯¯ä¸¥é‡çº§åˆ«ï¼Œåƒæ—¥å¿—ä¸€æ ·ï¼Œæ£€æŸ¥é”™è¯¯ä¹Ÿæ˜¯æœ‰ä¸¥é‡çº§åˆ«çš„ã€‚

æ›´è¯¦ç»†çš„é…ç½®å†…å®¹ï¼Œä½ å¯ä»¥å‚è€ƒ[Configuration](https://golangci-lint.run/usage/configuration/)ã€‚å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒ IAM é¡¹ç›®çš„ [golangci-lint](https://github.com/marmotedu/iam/blob/master/.golangci.yaml) é…ç½®`.golangci.yaml`ã€‚`.golangci.yaml` é‡Œé¢çš„ä¸€äº›é…ç½®ï¼Œæˆ‘å»ºè®®ä½ ä¸€å®šè¦è®¾ç½®ï¼Œå…·ä½“å¦‚ä¸‹ï¼š

```yaml
run:
  skip-dirs: # è®¾ç½®è¦å¿½ç•¥çš„ç›®å½•
    - util
    - .*~
    - api/swagger/docs
  skip-files: # è®¾ç½®ä¸éœ€è¦æ£€æŸ¥çš„goæºç æ–‡ä»¶ï¼Œæ”¯æŒæ­£åˆ™åŒ¹é…ï¼Œè¿™é‡Œå»ºè®®åŒ…æ‹¬ï¼š_test.go
    - ".*\\.my\\.go$"
    - _test.go
linters-settings:
  errcheck:
    check-type-assertions: true # è¿™é‡Œå»ºè®®è®¾ç½®ä¸ºtrueï¼Œå¦‚æœç¡®å®ä¸éœ€è¦æ£€æŸ¥ï¼Œå¯ä»¥å†™æˆ`num, _ := strconv.Atoi(numStr)`
    check-blank: false
  gci:
    # å°†ä»¥`github.com/marmotedu/iam`å¼€å¤´çš„åŒ…æ”¾åœ¨ç¬¬ä¸‰æ–¹åŒ…åé¢
    local-prefixes: github.com/marmotedu/iam
  godox:
    keywords: # å»ºè®®è®¾ç½®ä¸ºBUGã€FIXMEã€OPTIMIZEã€HACK
      - BUG
      - FIXME
      - OPTIMIZE
      - HACK
  goimports:
    # è®¾ç½®å“ªäº›åŒ…æ”¾åœ¨ç¬¬ä¸‰æ–¹åŒ…åé¢ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªåŒ…ï¼Œé€—å·éš”å¼€
    local-prefixes: github.com/marmotedu/iam
  gomoddirectives: # è®¾ç½®å…è®¸åœ¨go.modä¸­replaceçš„åŒ…
    replace-local: true
    replace-allow-list:
      - github.com/coreos/etcd
      - google.golang.org/grpc
      - github.com/marmotedu/api
      - github.com/marmotedu/component-base
      - github.com/marmotedu/marmotedu-sdk-go
  gomodguard: # ä¸‹é¢æ˜¯æ ¹æ®éœ€è¦é€‰æ‹©å¯ä»¥ä½¿ç”¨çš„åŒ…å’Œç‰ˆæœ¬ï¼Œå»ºè®®è®¾ç½®
    allowed:
      modules:
        - gorm.io/gorm
        - gorm.io/driver/mysql
        - k8s.io/klog
      domains: # List of allowed module domains
        - google.golang.org
        - gopkg.in
        - golang.org
        - github.com
        - go.uber.org
    blocked:
      modules:
        - github.com/pkg/errors:
            recommendations:
              - github.com/marmotedu/errors
            reason: "`github.com/marmotedu/errors` is the log package used by marmotedu projects."
      versions:
        - github.com/MakeNowJust/heredoc:
            version: "> 2.0.9"
            reason: "use the latest version"
      local_replace_directives: false
  lll:
    line-length: 240 # è¿™é‡Œå¯ä»¥è®¾ç½®ä¸º240ï¼Œ240ä¸€èˆ¬æ˜¯å¤Ÿç”¨çš„
  importas: # è®¾ç½®åŒ…çš„aliasï¼Œæ ¹æ®éœ€è¦è®¾ç½®
    jwt: github.com/appleboy/gin-jwt/v2         
    metav1: github.com/marmotedu/component-base/pkg/meta/v1
run:
  skip-dirs: # è®¾ç½®è¦å¿½ç•¥çš„ç›®å½•
    - util
    - .*~
    - api/swagger/docs
  skip-files: # è®¾ç½®ä¸éœ€è¦æ£€æŸ¥çš„goæºç æ–‡ä»¶ï¼Œæ”¯æŒæ­£åˆ™åŒ¹é…ï¼Œè¿™é‡Œå»ºè®®åŒ…æ‹¬ï¼š_test.go
    - ".*\\.my\\.go$"
    - _test.go
linters-settings:
  errcheck:
    check-type-assertions: true # è¿™é‡Œå»ºè®®è®¾ç½®ä¸ºtrueï¼Œå¦‚æœç¡®å®ä¸éœ€è¦æ£€æŸ¥ï¼Œå¯ä»¥å†™æˆ`num, _ := strconv.Atoi(numStr)`
    check-blank: false
  gci:
    # å°†ä»¥`github.com/marmotedu/iam`å¼€å¤´çš„åŒ…æ”¾åœ¨ç¬¬ä¸‰æ–¹åŒ…åé¢
    local-prefixes: github.com/marmotedu/iam
  godox:
    keywords: # å»ºè®®è®¾ç½®ä¸ºBUGã€FIXMEã€OPTIMIZEã€HACK
      - BUG
      - FIXME
      - OPTIMIZE
      - HACK
  goimports:
    # è®¾ç½®å“ªäº›åŒ…æ”¾åœ¨ç¬¬ä¸‰æ–¹åŒ…åé¢ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªåŒ…ï¼Œé€—å·éš”å¼€
    local-prefixes: github.com/marmotedu/iam
  gomoddirectives: # è®¾ç½®å…è®¸åœ¨go.modä¸­replaceçš„åŒ…
    replace-local: true
    replace-allow-list:
      - github.com/coreos/etcd
      - google.golang.org/grpc
      - github.com/marmotedu/api
      - github.com/marmotedu/component-base
      - github.com/marmotedu/marmotedu-sdk-go
  gomodguard: # ä¸‹é¢æ˜¯æ ¹æ®éœ€è¦é€‰æ‹©å¯ä»¥ä½¿ç”¨çš„åŒ…å’Œç‰ˆæœ¬ï¼Œå»ºè®®è®¾ç½®
    allowed:
      modules:
        - gorm.io/gorm
        - gorm.io/driver/mysql
        - k8s.io/klog
      domains: # List of allowed module domains
        - google.golang.org
        - gopkg.in
        - golang.org
        - github.com
        - go.uber.org
    blocked:
      modules:
        - github.com/pkg/errors:
            recommendations:
              - github.com/marmotedu/errors
            reason: "`github.com/marmotedu/errors` is the log package used by marmotedu projects."
      versions:
        - github.com/MakeNowJust/heredoc:
            version: "> 2.0.9"
            reason: "use the latest version"
      local_replace_directives: false
  lll:
    line-length: 240 # è¿™é‡Œå¯ä»¥è®¾ç½®ä¸º240ï¼Œ240ä¸€èˆ¬æ˜¯å¤Ÿç”¨çš„
  importas: # è®¾ç½®åŒ…çš„aliasï¼Œæ ¹æ®éœ€è¦è®¾ç½®
    jwt: github.com/appleboy/gin-jwt/v2         
    metav1: github.com/marmotedu/component-base/pkg/meta/v1
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œgolangci-lint ä¸å»ºè®®ä½¿ç”¨ `enable-all: true` é€‰é¡¹ï¼Œä¸ºäº†å°½å¯èƒ½ä½¿ç”¨æœ€å…¨çš„ lintersï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š

```yaml
linters: 
  disable-all: true  
  enable: # enableä¸‹åˆ—å‡º <æœŸæœ›çš„æ‰€æœ‰linters>
    - typecheck
    - ... 
```

`<æœŸæœ›çš„æ‰€æœ‰linters> = - <ä¸æœŸæœ›æ‰§è¡Œçš„linters>`ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥è·å–ï¼š

```bash

$ ./scripts/print_enable_linters.sh
    - asciicheck
    - bodyclose
    - cyclop
    - deadcode
    - ...
```

å°†ä»¥ä¸Šè¾“å‡ºç»“æœæ›¿æ¢æ‰`.golangci.yaml` é…ç½®æ–‡ä»¶ä¸­çš„ `linters.enable` éƒ¨åˆ†å³å¯ã€‚



## å¦‚ä½•ä½¿ç”¨ golangci-lint è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼Ÿ

è¦å¯¹ä»£ç è¿›è¡Œé™æ€æ£€æŸ¥ï¼Œåªéœ€è¦æ‰§è¡Œ `golangci-lint run` å‘½ä»¤å³å¯ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šå…ˆç»™ä½ ä»‹ç» 5 ç§å¸¸è§çš„ golangci-lint ä½¿ç”¨æ–¹æ³•ã€‚



**å¯¹å½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹çš„æ‰€æœ‰ Go æ–‡ä»¶è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼š**

```bash
$ golangci-lint run
```

å‘½ä»¤ç­‰æ•ˆäº`golangci-lint run ./...`ã€‚



**å¯¹æŒ‡å®šçš„ Go æ–‡ä»¶æˆ–è€…æŒ‡å®šç›®å½•ä¸‹çš„ Go æ–‡ä»¶è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼š**

```bash
$ golangci-lint run dir1 dir2/... dir3/file1.go
```

è¿™é‡Œéœ€è¦ä½ æ³¨æ„ï¼šä¸Šè¿°å‘½ä»¤ä¸ä¼šæ£€æŸ¥ dir1 ä¸‹å­ç›®å½•çš„ Go æ–‡ä»¶ï¼Œå¦‚æœæƒ³é€’å½’åœ°æ£€æŸ¥ä¸€ä¸ªç›®å½•ï¼Œéœ€è¦åœ¨ç›®å½•åé¢è¿½åŠ `/...`ï¼Œä¾‹å¦‚ï¼š`dir2/...`ã€‚



**æ ¹æ®æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œè¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼š**

```bash
$ golangci-lint run -c .golangci.yaml ./...
```



**è¿è¡ŒæŒ‡å®šçš„ linterï¼š**

golangci-lint å¯ä»¥åœ¨ä¸æŒ‡å®šä»»ä½•é…ç½®æ–‡ä»¶çš„æƒ…å†µä¸‹è¿è¡Œï¼Œè¿™ä¼šè¿è¡Œé»˜è®¤å¯ç”¨çš„ linterï¼Œä½ å¯ä»¥é€šè¿‡golangci-lint help lintersæŸ¥çœ‹å®ƒã€‚

ä½ å¯ä»¥ä¼ å…¥å‚æ•°`-E/--enable`æ¥ä½¿æŸä¸ª linter å¯ç”¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨`-D/--disable`å‚æ•°æ¥ä½¿æŸä¸ª linter ä¸å¯ç”¨ã€‚ä¸‹é¢çš„ç¤ºä¾‹ä»…ä»…å¯ç”¨äº† errcheck linterï¼š

```bash
$ golangci-lint run --no-config --disable-all -E errcheck ./...
```

è¿™é‡Œä½ éœ€è¦æ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ`golangci-lint` ä¼šä»å½“å‰ç›®å½•ä¸€å±‚å±‚å¾€ä¸Šå¯»æ‰¾é…ç½®æ–‡ä»¶å.golangci.yamlã€.golangci.tomlã€.golangci.jsonç›´åˆ°æ ¹ï¼ˆ/ï¼‰ç›®å½•ã€‚å¦‚æœæ‰¾åˆ°ï¼Œå°±ä»¥æ‰¾åˆ°çš„é…ç½®æ–‡ä»¶ä½œä¸ºæœ¬æ¬¡è¿è¡Œçš„é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸ºäº†é˜²æ­¢è¯»å–åˆ°æœªçŸ¥çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ `--no-config` å‚æ•°ä½¿ golangci-lint ä¸è¯»å–ä»»ä½•é…ç½®æ–‡ä»¶ã€‚



**ç¦æ­¢è¿è¡ŒæŒ‡å®šçš„ linerï¼š**

å¦‚æœæˆ‘ä»¬æƒ³ç¦ç”¨æŸäº› linterï¼Œå¯ä»¥ä½¿ç”¨-Dé€‰é¡¹ã€‚

```bash
$ golangci-lint run --no-config -D godot,errcheck
```

åœ¨ä½¿ç”¨ golangci-lint è¿›è¡Œä»£ç æ£€æŸ¥æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šè¯¯æŠ¥ã€‚æ‰€è°“çš„è¯¯æŠ¥ï¼Œå…¶å®æ˜¯æˆ‘ä»¬å¸Œæœ› golangci-lint çš„ä¸€äº› linter èƒ½å¤Ÿå®¹å¿æŸäº› issueã€‚é‚£ä¹ˆå¦‚ä½•å°½å¯èƒ½å‡å°‘è¯¯æŠ¥å‘¢ï¼Ÿgolangci-lint ä¹Ÿæä¾›äº†ä¸€äº›é€”å¾„ï¼Œæˆ‘å»ºè®®ä½ ä½¿ç”¨ä¸‹é¢è¿™ä¸‰ç§ï¼š

+ åœ¨å‘½ä»¤è¡Œä¸­æ·»åŠ -eå‚æ•°ï¼Œæˆ–è€…åœ¨é…ç½®æ–‡ä»¶çš„issues.excludeéƒ¨åˆ†è®¾ç½®è¦æ’é™¤çš„æ£€æŸ¥é”™è¯¯ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨issues.exclude-rulesæ¥é…ç½®å“ªäº›æ–‡ä»¶å¿½ç•¥å“ªäº› linterã€‚
+ é€šè¿‡run.skip-dirsã€run.skip-filesæˆ–è€…issues.exclude-rulesé…ç½®é¡¹ï¼Œæ¥å¿½ç•¥æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰ Go æ–‡ä»¶ï¼Œæˆ–è€…æŒ‡å®šçš„ Go æ–‡ä»¶ã€‚
+ é€šè¿‡åœ¨ Go æºç æ–‡ä»¶ä¸­æ·»åŠ `//nolint`æ³¨é‡Šï¼Œæ¥å¿½ç•¥æŒ‡å®šçš„ä»£ç è¡Œã€‚

å› ä¸º golangci-lint è®¾ç½®äº†å¾ˆå¤š lintersï¼Œå¯¹äºä¸€ä¸ªå¤§å‹é¡¹ç›®ï¼Œå¯ç”¨æ‰€æœ‰çš„ linter ä¼šæ£€æŸ¥å‡ºå¾ˆå¤šé—®é¢˜ï¼Œå¹¶ä¸”æ¯ä¸ªé¡¹ç›®å¯¹ linter æ£€æŸ¥çš„ç²’åº¦è¦æ±‚ä¹Ÿä¸ä¸€æ ·ï¼Œæ‰€ä»¥ glangci-lintä½¿ç”¨ nolint æ ‡è®°æ¥å¼€å…³æŸäº›æ£€æŸ¥é¡¹ï¼Œä¸åŒä½ç½®çš„ nolint æ ‡è®°æ•ˆæœä¹Ÿä¼šä¸ä¸€æ ·ã€‚æ¥ä¸‹æ¥æˆ‘æƒ³å‘ä½ ä»‹ç» nolint çš„å‡ ç§ç”¨æ³•ã€‚



**å¿½ç•¥æŸä¸€è¡Œæ‰€æœ‰ linter çš„æ£€æŸ¥ï¼š**

```go
var bad_name int //nolintvar bad_name int //nolint
```



**å¿½ç•¥æŸä¸€è¡ŒæŒ‡å®š linter çš„æ£€æŸ¥ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ª linterï¼Œç”¨é€—å· , éš”å¼€ã€‚**

```go
var bad_name int //nolint:golint,unused
```



**å¿½ç•¥æŸä¸ªä»£ç å—çš„æ£€æŸ¥:**

```go

//nolint
func allIssuesInThisFunctionAreExcluded() *string {
  // ...
}

//nolint:govet
var (
  a int
  b int
)
```



**å¿½ç•¥æŸä¸ªæ–‡ä»¶çš„æŒ‡å®š linter æ£€æŸ¥ã€‚**

åœ¨ package xx ä¸Šé¢ä¸€è¡Œæ·»åŠ //nolintæ³¨é‡Šã€‚

```bash
//nolint:unparam
package pkg
...
```

åœ¨ä½¿ç”¨ nolint çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ 3 ä¸ªåœ°æ–¹éœ€è¦ä½ æ³¨æ„ã€‚

+ é¦–å…ˆï¼Œå¦‚æœå¯ç”¨äº† nolintlintï¼Œä½ å°±éœ€è¦åœ¨//nolintåé¢æ·»åŠ  nolint çš„åŸå› // xxxxã€‚
+ å…¶æ¬¡ï¼Œä½ ä½¿ç”¨çš„åº”è¯¥æ˜¯//nolintè€Œä¸æ˜¯// nolintã€‚å› ä¸ºæ ¹æ® Go çš„è§„èŒƒï¼Œéœ€è¦ç¨‹åºè¯»å–çš„æ³¨é‡Š // åé¢ä¸åº”è¯¥æœ‰ç©ºæ ¼ã€‚
+ æœ€åï¼Œå¦‚æœè¦å¿½ç•¥æ‰€æœ‰ linterï¼Œå¯ä»¥ç”¨//nolintï¼›å¦‚æœè¦å¿½ç•¥æŸä¸ªæŒ‡å®šçš„ linterï¼Œå¯ä»¥ç”¨`//nolint:<linter1>,<linter2>`,ã€‚



## golangci-lint ä½¿ç”¨æŠ€å·§

**æŠ€å·§ 1ï¼šç¬¬ä¸€æ¬¡ä¿®æ”¹ï¼Œå¯ä»¥æŒ‰ç›®å½•ä¿®æ”¹ã€‚**

å¦‚æœä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨ golangci-lint æ£€æŸ¥ä½ çš„ä»£ç ï¼Œä¸€å®šä¼šæœ‰å¾ˆå¤šé”™è¯¯ã€‚ä¸ºäº†å‡è½»ä¿®æ”¹çš„å‹åŠ›ï¼Œå¯ä»¥æŒ‰ç›®å½•æ£€æŸ¥ä»£ç å¹¶ä¿®æ”¹ã€‚è¿™æ ·å¯ä»¥æœ‰æ•ˆå‡å°‘å¤±è´¥æ¡æ•°ï¼Œå‡è½»ä¿®æ”¹å‹åŠ›ã€‚

å½“ç„¶ï¼Œå¦‚æœé”™è¯¯å¤ªå¤šï¼Œä¸€æ—¶åŠä¼šå„¿æ”¹ä¸å®Œï¼Œæƒ³ä»¥åæ…¢æ…¢ä¿®æ”¹æˆ–è€…å¹²è„†ä¸ä¿®å¤å­˜é‡çš„ issuesï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ golangci-lint çš„ --new-from-rev é€‰é¡¹ï¼Œåªæ£€æŸ¥æ–°å¢çš„ codeï¼Œä¾‹å¦‚ï¼š

```bash
$ golangci-lint run --new-from-rev=HEAD~1
```



**æŠ€å·§ 2ï¼šæŒ‰æ–‡ä»¶ä¿®æ”¹ï¼Œå‡å°‘æ–‡ä»¶åˆ‡æ¢æ¬¡æ•°ï¼Œæé«˜ä¿®æ”¹æ•ˆç‡ã€‚**

å¦‚æœæœ‰å¾ˆå¤šæ£€æŸ¥é”™è¯¯ï¼Œæ¶‰åŠå¾ˆå¤šæ–‡ä»¶ï¼Œå»ºè®®å…ˆä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™æ ·å°±ä¸ç”¨æ¥å›åˆ‡æ¢æ–‡ä»¶ã€‚å¯ä»¥é€šè¿‡ grep è¿‡æ»¤å‡ºæŸä¸ªæ–‡ä»¶çš„æ£€æŸ¥å¤±è´¥é¡¹ï¼Œä¾‹å¦‚ï¼š

```bash
$ golangci-lint run ./...|grep pkg/storage/redis_cluster.go
pkg/storage/redis_cluster.go:16:2: "github.com/go-redis/redis/v7" imported but not used (typecheck)
pkg/storage/redis_cluster.go:82:28: undeclared name: `redis` (typecheck)
pkg/storage/redis_cluster.go:86:14: undeclared name: `redis` (typecheck)
...
```



**æŠ€å·§ 3ï¼šæŠŠ linters-setting.lll.line-length è®¾ç½®å¾—å¤§ä¸€äº›ã€‚**

åœ¨ Go é¡¹ç›®å¼€å‘ä¸­ï¼Œä¸ºäº†æ˜“äºé˜…è¯»ä»£ç ï¼Œé€šå¸¸ä¼šå°†å˜é‡å / å‡½æ•° / å¸¸é‡ç­‰å‘½åå¾—æœ‰æ„ä¹‰ï¼Œè¿™æ ·å¾ˆå¯èƒ½å¯¼è‡´æ¯è¡Œçš„ä»£ç é•¿åº¦è¿‡é•¿ï¼Œå¾ˆå®¹æ˜“è¶…è¿‡lll linter è®¾ç½®çš„é»˜è®¤æœ€å¤§é•¿åº¦ 80ã€‚è¿™é‡Œå»ºè®®å°†`linters-setting.lll.line-length`è®¾ç½®ä¸º 120/240ã€‚



**æŠ€å·§ 4ï¼šå°½å¯èƒ½å¤šåœ°ä½¿ç”¨ golangci-lint æä¾›çš„ linterã€‚**

golangci-lint é›†æˆäº†å¾ˆå¤š lintersï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š

```bash
$ golangci-lint linters
Enabled by your configuration linters:
deadcode: Finds unused code [fast: true, auto-fix: false]
...
varcheck: Finds unused global variables and constants [fast: true, auto-fix: false]

Disabled by your configuration linters:
asciicheck: Simple linter to check that your code does not contain non-ASCII identifiers [fast: true, auto-fix: false]
...
wsl: Whitespace Linter - Forces you to use empty lines! [fast: true, auto-fix: false]
```

è¿™äº› linter åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯é»˜è®¤å¯ç”¨çš„ï¼Œå¦ä¸€ç±»æ˜¯é»˜è®¤ç¦ç”¨çš„ã€‚æ¯ä¸ª linter éƒ½æœ‰ä¸¤ä¸ªå±æ€§ï¼š

+ fastï¼štrue/falseï¼Œå¦‚æœä¸º trueï¼Œè¯´æ˜è¯¥ linter å¯ä»¥ç¼“å­˜ç±»å‹ä¿¡æ¯ï¼Œæ”¯æŒå¿«é€Ÿæ£€æŸ¥ã€‚å› ä¸ºç¬¬ä¸€æ¬¡ç¼“å­˜äº†è¿™äº›ä¿¡æ¯ï¼Œæ‰€ä»¥åç»­çš„è¿è¡Œä¼šéå¸¸å¿«ã€‚
+ auto-fixï¼štrue/falseï¼Œå¦‚æœä¸º true è¯´æ˜è¯¥ linter æ”¯æŒè‡ªåŠ¨ä¿®å¤å‘ç°çš„é”™è¯¯ï¼›å¦‚æœä¸º false è¯´æ˜ä¸æ”¯æŒè‡ªåŠ¨ä¿®å¤ã€‚



å¦‚æœé…ç½®äº† golangci-lint é…ç½®æ–‡ä»¶ï¼Œåˆ™å¯ä»¥é€šè¿‡å‘½ä»¤golangci-lint help lintersæŸ¥çœ‹åœ¨å½“å‰é…ç½®ä¸‹å¯ç”¨å’Œç¦ç”¨äº†å“ªäº› linterã€‚golangci-lint ä¹Ÿæ”¯æŒè‡ªå®šä¹‰ linter æ’ä»¶

+ https://golangci-lint.run/contributing/new-linters/

åœ¨ä½¿ç”¨ golangci-lint çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦å°½å¯èƒ½å¤šçš„ä½¿ç”¨ linterã€‚ä½¿ç”¨çš„ linter è¶Šå¤šï¼Œè¯´æ˜æ£€æŸ¥è¶Šä¸¥æ ¼ï¼Œæ„å‘³ç€ä»£ç è¶Šè§„èŒƒï¼Œè´¨é‡è¶Šé«˜ã€‚å¦‚æœæ—¶é—´å’Œç²¾åŠ›å…è®¸ï¼Œå»ºè®®æ‰“å¼€ golangci-lint æä¾›çš„æ‰€æœ‰ linterã€‚



**æŠ€å·§ 5ï¼šæ¯æ¬¡ä¿®æ”¹ä»£ç åï¼Œéƒ½è¦æ‰§è¡Œ golangci-lintã€‚**

æ¯æ¬¡ä¿®æ”¹å®Œä»£ç åéƒ½è¦æ‰§è¡Œ golangci-lintï¼Œä¸€æ–¹é¢å¯ä»¥åŠæ—¶ä¿®æ”¹ä¸è§„èŒƒçš„åœ°æ–¹ï¼Œå¦ä¸€æ–¹é¢å¯ä»¥å‡å°‘é”™è¯¯å †ç§¯ï¼Œå‡è½»åé¢çš„ä¿®æ”¹å‹åŠ›ã€‚



**æŠ€å·§ 6ï¼šå»ºè®®åœ¨æ ¹ç›®å½•ä¸‹æ”¾ä¸€ä¸ªé€šç”¨çš„ golangci-lint é…ç½®æ–‡ä»¶ã€‚**

åœ¨/ç›®å½•ä¸‹å­˜æ”¾é€šç”¨çš„ golangci-lint é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥è®©ä½ ä¸ç”¨ä¸ºæ¯ä¸€ä¸ªé¡¹ç›®éƒ½é…ç½® golangci-lintã€‚å½“ä½ éœ€è¦ä¸ºæŸä¸ªé¡¹ç›®å•ç‹¬é…ç½® golangci-lint æ—¶ï¼Œåªéœ€åœ¨è¯¥é¡¹ç›®æ ¹ç›®å½•ä¸‹å¢åŠ ä¸€ä¸ªé¡¹ç›®çº§åˆ«çš„ golangci-lint é…ç½®æ–‡ä»¶å³å¯ã€‚



## æ€»ç»“

Go é¡¹ç›®å¼€å‘ä¸­ï¼Œå¯¹ä»£ç è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥æ˜¯å¿…è¦çš„æ“ä½œã€‚å½“å‰æœ‰å¾ˆå¤šä¼˜ç§€çš„é™æ€ä»£ç æ£€æŸ¥å·¥å…·ï¼Œä½† golangci-lint å› ä¸ºå…·æœ‰æ£€æŸ¥é€Ÿåº¦å¿«ã€å¯é…ç½®ã€å°‘è¯¯æŠ¥ã€å†…ç½®äº†å¤§é‡ linter ç­‰ä¼˜ç‚¹ï¼Œæˆä¸ºäº†ç›®å‰æœ€å—æ¬¢è¿çš„é™æ€ä»£ç æ£€æŸ¥å·¥å…·ã€‚

golangci-lint åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œæ”¯æŒè¯¸å¦‚ runã€cacheã€completionã€linters ç­‰å‘½ä»¤ã€‚å…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯ run å‘½ä»¤ï¼Œrun å‘½ä»¤å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼š

```bash

$ golangci-lint run #  å¯¹å½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹çš„æ‰€æœ‰Goæ–‡ä»¶è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥
$ golangci-lint run dir1 dir2/... dir3/file1.go # å¯¹æŒ‡å®šçš„Goæ–‡ä»¶æˆ–è€…æŒ‡å®šç›®å½•ä¸‹çš„Goæ–‡ä»¶è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥
$ golangci-lint run -c .golangci.yaml ./... # æ ¹æ®æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œè¿›è¡Œé™æ€ä»£ç æ£€æŸ¥
$ golangci-lint run --no-config --disable-all -E errcheck ./... # è¿è¡ŒæŒ‡å®šçš„ errcheck linter
$ golangci-lint run --no-config -D godot,errcheck # ç¦æ­¢è¿è¡ŒæŒ‡å®šçš„godot,errcheck liner
```

æ­¤å¤–ï¼Œgolangci-lint è¿˜æ”¯æŒ //nolint ã€//nolint:golint,unused ç­‰æ–¹å¼æ¥å‡å°‘è¯¯æŠ¥ã€‚





## END é“¾æ¥

<ul><li><div><a href = '8.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '10.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

