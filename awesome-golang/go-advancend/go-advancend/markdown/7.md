+ [author](https://github.com/3293172751)

# ç¬¬7èŠ‚ InfluxDBçš„æ¦‚å¿µå’Œå®‰è£…

+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](6.md)
> â¤ï¸ğŸ’•ğŸ’•Goè¯­è¨€é«˜çº§ç¯‡ç« ,åœ¨æ­¤ä¹‹å‰å»ºè®®æ‚¨å…ˆäº†è§£åŸºç¡€å’Œè¿›é˜¶ç¯‡ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)
###  **[Goè¯­è¨€åŸºç¡€ç¯‡](https://github.com/3293172751/Block_Chain/blob/master/TOC.md)**
###  **[Goè¯­è¨€100ç¯‡è¿›é˜¶](https://github.com/3293172751/Block_Chain/blob/master/Gomd_super/README.md)**
---
[TOC]

###  å†™å…¥æ¨¡å—çš„å®ç°

1. åˆå§‹åŒ–Influxdb cllient
2. ä»write channelä¸­è¯»å–åˆ°ç›‘æ§æ•°æ®
3. æ„é€ æ•°æ®å¹¶ä¸”å†™å…¥åˆ°influxdb



### ç›‘æ§éœ€æ±‚

+ æŸä¸ª**åè®®**ä¸‹çš„æŸä¸ªè¯·æ±‚åœ¨æŸä¸€ä¸ªè¯·æ±‚æ–¹æ³•çš„**QPS**&**å“åº”æ—¶é—´**&**æµé‡**



### influxdb

+ [influxdbå®˜ç½‘](https://www.influxdata.com/)

+ [å¼€æºä»“åº“GitHubåœ°å€](https://github.com/influxdata/influxdb)

InfluxDB æ˜¯ä¸€ä¸ªå¼€æºæ—¶é—´åºåˆ—å¹³å°ï¼Œä½¿ç”¨Golangç¼–å†™çš„å¼€æºçš„æ—¶åºå‹æ•°æ®åº“ã€‚è¿™åŒ…æ‹¬ç”¨äºå­˜å‚¨å’ŒæŸ¥è¯¢æ•°æ®ã€åœ¨åå°å¤„ç†æ•°æ®ä»¥ç”¨äº ETL æˆ–ç›‘æ§å’Œè­¦æŠ¥ç›®çš„ã€ç”¨æˆ·ä»ªè¡¨æ¿ä»¥åŠå¯è§†åŒ–å’Œæ¢ç´¢æ•°æ®ç­‰çš„ APIã€‚è¿™ä¸ª repo ä¸Šçš„ master åˆ†æ”¯ç°åœ¨ä»£è¡¨æœ€æ–°çš„ InfluxDBï¼Œå®ƒç°åœ¨åŒ…æ‹¬ Kapacitorï¼ˆåå°å¤„ç†ï¼‰å’Œ Chronografï¼ˆUIï¼‰çš„åŠŸèƒ½ï¼Œæ‰€æœ‰è¿™äº›éƒ½åœ¨ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚

**ç‰¹æ€§:**

+ éƒ¨ç½²ç®€å•ï¼Œæ— ä¾èµ–ï¼ˆGoè¯­è¨€ç‰¹æ€§ï¼‰
+ å†…ç½®httpæ”¯æŒï¼Œä½¿ç”¨httpè¯»å†™
+ ç±»sqlçš„çµæ´»æŸ¥è¯¢ï¼ˆmax,min,sumç­‰ï¼‰

 **influxdbçš„é‡è¦æ¦‚å¿µ**

+ datebaseï¼šæ•°æ®åº“
+ measurementï¼šæ•°æ®åº“ä¸­çš„è¡¨
+ pointsï¼šè¡¨é‡Œé¢çš„ä¸€è¡Œæ•°æ®
  + tagsï¼šå„ç§æœ‰ç´¢å¼•çš„å±æ€§
  + fieldsï¼šå„ç§è®°å½•çš„å€¼
  + timeï¼šæ•°æ®è®°å½•çš„æ—¶é—´æˆ³ï¼Œä¹Ÿæ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ä¸»ç´¢å¼•

### å®‰è£…influxdb

**æˆ‘ä½¿ç”¨çš„æ˜¯dockeré•œåƒè¿›è¡Œå®‰è£…**

+ [é•œåƒåœ°å€](https://hub.docker.com/_/influxdb)
+ [dockeræ•™ç¨‹åœ°å€](https://github.com/3293172751/Block_Chain/blob/master/docker/README.md)

**æŸ¥çœ‹é•œåƒ**

```
root@ubuntu:/home/smile# docker search -f stars=3 --limit 5 influxdb
NAME               DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
influxdb           InfluxDB is an open source time series databâ€¦   1582      [OK]       
telegraf           Telegraf is an agent for collecting metrics â€¦   575       [OK]       
chronograf         Chronograf is a visualization tool for time â€¦   313       [OK]       
bitnami/influxdb  
```

**å®‰è£…å‘½ä»¤**

```
docker pull influxdb   #æ‹‰å–åˆ°æœ¬åœ°
docker run -it influxdb #è¿è¡Œé•œåƒ
```

**æŸ¥çœ‹é•œåƒå’Œç»‘å®šçš„ç«¯å£**

```bash
root@ubuntu:/home/smile# docker ps
CONTAINER ID   IMAGE              COMMAND                  CREATED          STATUS          PORTS      NAMES
c5541213e802   influxdb           "/entrypoint.sh inflâ€¦"   20 seconds ago   Up 18 seconds   8086/tcp   elated_jepsen
f19e7fbc3d18   v2f
```



### influxdbä½¿ç”¨

æ˜¾ç¤ºæ•°æ®åº“

```
show databases
```

åˆ›å»ºæ•°æ®åº“

```
create database influxdb
```

åˆ é™¤æ•°æ®åº“

```
drop database influxdb
```

ä½¿ç”¨æ•°æ®åº“

```
use influxdb
```



### ä½¿ç”¨åˆ°çš„å­—æ®µ

```
type Message struct {
	//ä½¿ç”¨ç»“æ„ä½“æ¥å­˜å‚¨æå–å‡ºæ¥çš„ç›‘æ§æ•°æ®
	TimeLocal                    time.Time //æ—¶é—´
	BytesSent                    int       //æµé‡
	Path, Method, Scheme, Status string    //è¯·æ±‚è·¯å¾„
	UpstreamTime, RequestTime    float64   //ç›‘æ§æ•°æ®
}
```

+ Tagsï¼šPath, Method, Scheme, Status
+ Fieldsï¼šUpstreamTime, RequestTimeï¼ŒBytesSent 
+ Timeï¼šTimeLocal





## END é“¾æ¥

+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](6.md)
+ [ä¸‹ä¸€èŠ‚](8.md)
---
+ [å‚ä¸è´¡çŒ®â¤ï¸ğŸ’•ğŸ’•](https://github.com/3293172751/Block_Chain/blob/master/Git/git-contributor.md)