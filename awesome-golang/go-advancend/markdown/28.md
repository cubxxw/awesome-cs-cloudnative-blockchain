+ [author](https://github.com/3293172751)

# ç¬¬28èŠ‚ é«˜è´¨é‡ç¼–ç¨‹ç®€ä»‹åŠç¼–ç è§„èŒƒ

+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](27.md)
> â¤ï¸ğŸ’•ğŸ’•Goè¯­è¨€é«˜çº§ç¯‡ç« ,åœ¨æ­¤ä¹‹å‰å»ºè®®æ‚¨å…ˆäº†è§£åŸºç¡€å’Œè¿›é˜¶ç¯‡ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)
###  **[Goè¯­è¨€åŸºç¡€ç¯‡](https://github.com/3293172751/Block_Chain/blob/master/TOC.md)**
###  **[Goè¯­è¨€100ç¯‡è¿›é˜¶](https://github.com/3293172751/Block_Chain/blob/master/Gomd_super/README.md)**
---
[TOC]

## å‡†å¤‡

1. åœ¨è¯¾ç¨‹å¼€å§‹ä¹‹å‰ï¼Œå…‹éš†[ç½‘å€ä¸€](https://github.com/wolfogre/go-pprof-practice)åˆ°æœ¬åœ°ï¼Œä¿è¯èƒ½å¤Ÿç¼–è¯‘è¿è¡Œ
2. å°è¯•ä½¿ç”¨ test å‘½ä»¤ï¼Œç¼–å†™å¹¶è¿è¡Œç®€å•æµ‹è¯•[ç½‘å€äºŒ](https://go.dev/doc/tutorial/add-a-test)
3. å°è¯•ä½¿ç”¨ -bench å‚æ•°ï¼Œå¯¹ç¼–å†™çš„å‡½æ•°è¿›è¡Œæ€§èƒ½æµ‹è¯•[ç½‘å€ä¸‰](https://link.juejin.cn/?target=https%3A%2F%2Fpkg.go.dev%2Ftesting%23hdr-Benchmarks)



## é«˜è´¨é‡ä»£ç 

ç¼–å†™çš„ä»£ç è¾¾åˆ°æ­£ç¡®çš„ã€å¯é çš„ã€ç®€ä»‹æ¸…æ™°çš„ç›®æ ‡å¯ç§°ä¹‹ä¸ºé«˜è´¨é‡ä»£ç ã€‚

+ è¾¹ç•Œæ¡ä»¶ï¼ˆé”™è¯¯è°ƒç”¨å¤„ç†ï¼‰
+ å¼‚å¸¸æƒ…å†µå¤„ç†
+ æ˜“è¯»æ˜“ç»´æŠ¤

![image-20230117153307968](http://sm.nsddd.top/sm202301171533160.png)



### æ³¨é‡Š

+ æ³¨é‡Šè§£é‡Šä»£ç çš„ä½œç”¨
+ æ³¨é‡Šè§£é‡Šä»£ç å¦‚ä½•åšçš„
+ æ³¨é‡Šè§£é‡Šä»£ç å®ç°çš„åŸå› 
+ æ³¨é‡Šè§£é‡Šä»£ç åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºé”™

**å¥½çš„ä»£ç æœ‰å¾ˆå¤šæ³¨é‡Šï¼Œåçš„ä»£ç éœ€è¦å¾ˆå¤šæ³¨é‡Šã€‚**



## å‘½åè§„èŒƒ

**è§„èŒƒï¼š**

1. åŒ…ååº”è¯¥æ˜¯å°å†™å­—æ¯ï¼Œä¸èƒ½åŒ…å«ä¸‹åˆ’çº¿æˆ–è€…çŸ­æ¨ªçº¿ã€‚
2. å˜é‡åå’Œå‡½æ•°ååº”è¯¥æ˜¯å°å†™å­—æ¯ï¼Œå¦‚æœåå­—ç”±å¤šä¸ªå•è¯ç»„æˆï¼Œåˆ™æ¯ä¸ªå•è¯ä¹‹é—´åº”è¯¥ä½¿ç”¨é©¼å³°å¼å‘½åã€‚
3. ç±»å‹åå’Œæ¥å£ååº”è¯¥æ˜¯å¤§å†™å­—æ¯ï¼Œå¦‚æœåå­—ç”±å¤šä¸ªå•è¯ç»„æˆï¼Œåˆ™æ¯ä¸ªå•è¯ä¹‹é—´åº”è¯¥ä½¿ç”¨é©¼å³°å¼å‘½åã€‚
4. å¸¸é‡ååº”è¯¥å…¨éƒ¨å¤§å†™ï¼Œå¦‚æœåå­—ç”±å¤šä¸ªå•è¯ç»„æˆï¼Œåˆ™æ¯ä¸ªå•è¯ä¹‹é—´åº”è¯¥ä½¿ç”¨ä¸‹åˆ’çº¿è¿æ¥ã€‚
5. å˜é‡åå’Œå‡½æ•°åä¸èƒ½ä»¥ä¸‹åˆ’çº¿æˆ–çŸ­æ¨ªçº¿å¼€å¤´ã€‚
6. ä¸èƒ½ä½¿ç”¨ä¸Goè¯­è¨€å…³é”®å­—ç›¸åŒçš„åå­—ã€‚
7. æ³¨æ„ç¼©ç•¥è¯å…¨å¤§å†™ï¼Œä½äºå¼€å¤´çš„è¯å¯ä»¥å…¨å°å†™ï¼ˆHTTPã€XMLï¼‰

![image-20230117154947011](http://sm.nsddd.top/sm202301171549104.png)



### å‡½æ•°å‘½åè§„èŒƒ

åœ¨ Go è¯­è¨€ä¸­ï¼Œå‡½æ•°å‘½åè§„èŒƒå¦‚ä¸‹:

1. å‡½æ•°ååº”è¯¥æ˜¯å°å†™å­—æ¯ï¼Œå¦‚æœåå­—ç”±å¤šä¸ªå•è¯ç»„æˆï¼Œåˆ™æ¯ä¸ªå•è¯ä¹‹é—´åº”è¯¥ä½¿ç”¨é©¼å³°å¼å‘½åï¼Œé¦–å­—æ¯å°å†™ã€‚
2. å‡½æ•°åä¸èƒ½ä»¥ä¸‹åˆ’çº¿æˆ–çŸ­æ¨ªçº¿å¼€å¤´ã€‚
3. ä¸èƒ½ä½¿ç”¨ä¸Goè¯­è¨€å…³é”®å­—ç›¸åŒçš„åå­—ã€‚
4. å‡½æ•°åä¸èƒ½ç¼©å†™ï¼Œåº”è¯¥ä½¿ç”¨å…¨ç§°ã€‚
5. å‡½æ•°ååº”è¯¥èƒ½å¤Ÿæ¸…æ¥šåœ°æè¿°å‡½æ•°çš„åŠŸèƒ½ã€‚

![image-20230117155415454](http://sm.nsddd.top/sm202301171554556.png)



### åŒ…çš„è§„èŒƒ

åœ¨ Go è¯­è¨€ä¸­ï¼ŒåŒ…åå‘½åè§„èŒƒå¦‚ä¸‹:

1. åŒ…ååº”è¯¥æ˜¯å°å†™å­—æ¯ï¼Œä¸èƒ½åŒ…å«ä¸‹åˆ’çº¿æˆ–è€…çŸ­æ¨ªçº¿ã€‚
2. åŒ…ååº”è¯¥èƒ½å¤Ÿæ¸…æ¥šåœ°æè¿°è¯¥åŒ…çš„åŠŸèƒ½ã€‚
3. åŒ…ååº”è¯¥å°½é‡çŸ­ï¼Œå¹¶ä¸”é¿å…ä½¿ç”¨ç¼©å†™ã€‚
4. åŒ…ååº”è¯¥å°½é‡é¿å…å’Œå…¶ä»–åŒ…åç›¸åŒã€‚
5. åŒ…ååº”è¯¥æ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œ ä¸èƒ½å’Œå…¶ä»–ä»»ä½•å·²ç»å‘å¸ƒçš„åŒ…æˆ–è€…å…¶ä»–é¡¹ç›®é‡åã€‚
6. åŒ…åä¸èƒ½ä¸Goè¯­è¨€å…³é”®å­—ç›¸åŒã€‚
7. åŒ…åä¸èƒ½ä»¥ä¸‹åˆ’çº¿æˆ–çŸ­æ¨ªçº¿å¼€å¤´ã€‚

æ³¨æ„ï¼šGoè¯­è¨€é»˜è®¤æ”¯æŒåœ¨çº¿å®‰è£…åŒ…ï¼Œæ‰€ä»¥åŒ…åå¿…é¡»æ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œ å»ºè®®ä½¿ç”¨å…¬å¸æˆ–è€…ç»„ç»‡åç§°ä½œä¸ºåŒ…åçš„å‰ç¼€ã€‚

![image-20230117155500912](http://sm.nsddd.top/sm202301171555035.png)



## é”™è¯¯å’Œå¼‚å¸¸å¤„ç†

![image-20230117160247843](http://sm.nsddd.top/sm202301171602992.png)

`errors.New` å‡½æ•°æ˜¯ Go è¯­è¨€æ ‡å‡†åº“ä¸­å®šä¹‰çš„ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„é”™è¯¯ã€‚è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œè¯¥å­—ç¬¦ä¸²æè¿°äº†é”™è¯¯çš„åŸå› ã€‚è¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå®ç°äº† `error` æ¥å£çš„å¯¹è±¡ï¼Œå¯ä»¥åœ¨ç¨‹åºä¸­ä½¿ç”¨è¿™ä¸ªå¯¹è±¡æ¥æŠ¥å‘Šé”™è¯¯ã€‚

```go
package main

import (
    "fmt"
    "errors"
)

func main() {
    _, err := divide(10, 0)
    if err != nil {
        fmt.Println(err)
    }
}

func divide(a, b int) (int, error) {
    if b == 0 {
        return 0, errors.New("cannot divide by zero")
    }
    return a / b, nil
}

```

ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š

```
cannot divide by zero
```

åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œdivideå‡½æ•°æ£€æŸ¥åˆ†æ¯æ˜¯å¦ä¸º0ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä½¿ç”¨errors.Newå‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„é”™è¯¯ï¼Œæè¿°äº†é”™è¯¯åŸå› ä¸ºâ€œcannot divide by zeroâ€.åœ¨mainå‡½æ•°ä¸­ï¼Œä½¿ç”¨ifè¯­å¥åˆ¤æ–­è¿”å›å€¼æ˜¯å¦ä¸ºé”™è¯¯ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¾“å‡ºé”™è¯¯ä¿¡æ¯.

è®°ä½ï¼Œ`errors.New` ä¸ä¼šæ·»åŠ é¢å¤–çš„è°ƒè¯•ä¿¡æ¯åˆ°é”™è¯¯ä¸­,å¦‚æœéœ€è¦æ·»åŠ æ›´å¤šçš„ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ fmt.Errorf å‡½æ•°.

![image-20230117160650790](http://sm.nsddd.top/sm202301171606958.png)

`fmt.Errorf` å‡½æ•°æ˜¯ Go è¯­è¨€æ ‡å‡†åº“ä¸­å®šä¹‰çš„ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒç”¨äºæ ¼å¼åŒ–é”™è¯¯ä¿¡æ¯å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„é”™è¯¯ã€‚è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªæ ¼å¼å­—ç¬¦ä¸²å’Œä¸€äº›å‚æ•°ä½œä¸ºå‚æ•°ï¼Œæ ¼å¼å­—ç¬¦ä¸²æè¿°äº†é”™è¯¯çš„åŸå› ï¼Œå‚æ•°ç”¨äºæ›¿æ¢æ ¼å¼å­—ç¬¦ä¸²ä¸­çš„å ä½ç¬¦ã€‚è¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå®ç°äº† `error` æ¥å£çš„å¯¹è±¡ï¼Œå¯ä»¥åœ¨ç¨‹åºä¸­ä½¿ç”¨è¿™ä¸ªå¯¹è±¡æ¥æŠ¥å‘Šé”™è¯¯ã€‚

```go
package main

import (
    "fmt"
)

func main() {
    _, err := divide(10, 0)
    if err != nil {
        fmt.Println(err)
    }
}

func divide(a, b int) (int, error) {
    if b == 0 {
        return 0, fmt.Errorf("cannot divide %d by %d", a, b)
    }
    return
}
```

ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š

```
PS D:\æ–‡æ¡£\my\go-pprof-practice> go run .\test.go
cannot divide 10 by 0
```



## æ€§èƒ½ä¼˜åŒ–

**å¦‚ä½•è¯„ä¼°ï¼š**

+ æ€§èƒ½è¡¨ç°éœ€è¦å®é™…æ•°æ®è¯´æ˜
+ Goè¯­è¨€æä¾›äº†æ”¯æŒåŸºå‡†æ€§èƒ½æµ‹è¯•benchmarkå·¥å…·

```
go test -bench=. -benchmen
```

![image-20230117163103118](http://sm.nsddd.top/sm202301171631293.png)

**ç¨‹åºåœ¨åˆå§‹åŒ–çš„æ—¶å€™æŒ‡å®šå¤§å°ï¼Œå¯ä»¥çœ‹åˆ°æ‰§è¡Œæ—¶é—´æ˜¯ä¹‹å‰çš„ 1/3 å¤§å°ã€‚**

![image-20230117163132940](http://sm.nsddd.top/sm202301171631051.png)

**è¿™ä¸ªå’Œåº•å±‚æ•°æ®ç»“æ„ç›¸å…³çš„ã€‚**

ğŸ¤” å¯ä»¥çœ‹åˆ°å½“å®¹é‡ä¸å¤Ÿçš„æ—¶å€™ï¼Œåº•å±‚æ˜¯å…ˆæœ‰ä¸€æ¬¡æ‰©å®¹ ï¼ˆâœ–2ï¼‰æ“ä½œï¼Œç„¶åå†æ·»åŠ ï¼Œæ¶ˆè€—æ—¶é—´~

![image-20230117163410113](http://sm.nsddd.top/sm202301171634233.png)



### å¤§å†…å­˜æœªé‡Šæ”¾

åˆ‡ç‰‡æ˜¯å¼•ç”¨çš„ä¸€æ®µç©ºé—´ï¼Œæ‰€ä»¥åŸåº•å±‚å†å†…å­˜ä¸­çš„å¼•ç”¨å¾—ä¸åˆ°é‡Šæ”¾ã€‚

åœ¨ Go è¯­è¨€ä¸­ï¼Œä½¿ç”¨ `copy` å‡½æ•°å¯ä»¥é¿å…é‡æ–°åˆ‡ç‰‡ (re-slice) é€ æˆçš„æ€§èƒ½é—®é¢˜ã€‚

é‡æ–°åˆ‡ç‰‡æ˜¯æŒ‡å¯¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„åˆ‡ç‰‡è¿›è¡Œåˆ‡ç‰‡æ“ä½œï¼Œè¿™æ ·ä¼šå¯¼è‡´æ–°çš„å†…å­˜åˆ†é…ï¼Œä»è€Œé™ä½ç¨‹åºçš„æ€§èƒ½ã€‚

> å½“æˆ‘ä»¬é‡æ–°åˆ‡ç‰‡ä¸€ä¸ªå·²ç»å­˜åœ¨çš„åˆ‡ç‰‡æ—¶ï¼Œå¦‚æœæ–°åˆ‡ç‰‡çš„é•¿åº¦æˆ–å®¹é‡è¶…è¿‡äº†åŸåˆ‡ç‰‡çš„é•¿åº¦æˆ–å®¹é‡ï¼Œåˆ™éœ€è¦é‡æ–°åˆ†é…å†…å­˜æ¥å®¹çº³æ–°åˆ‡ç‰‡ã€‚è¿™æ ·ä¼šå¯¼è‡´æ–°çš„å†…å­˜åˆ†é…ï¼Œä»è€Œé™ä½ç¨‹åºçš„æ€§èƒ½ã€‚
>
> éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“é‡æ–°åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡å°äºç­‰äºåŸåˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡æ—¶ï¼Œåˆ™ä¸ä¼šè¿›è¡Œé‡æ–°åˆ†é…å†…å­˜çš„æ“ä½œã€‚
>
> è€Œä½¿ç”¨copyå‡½æ•°å¤åˆ¶æ•°æ®å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒåªæ˜¯å°†æ•°æ®ä»ä¸€ä¸ªåˆ‡ç‰‡å¤åˆ¶åˆ°å¦ä¸€ä¸ªåˆ‡ç‰‡ï¼Œä¸ä¼šå¯¼è‡´å†…å­˜çš„é‡æ–°åˆ†é….

ä½¿ç”¨ `copy` å‡½æ•°å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚ `copy` å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ç›®æ ‡åˆ‡ç‰‡å’Œæºåˆ‡ç‰‡ï¼Œå®ƒä¼šå°†æºåˆ‡ç‰‡ä¸­çš„æ•°æ®å¤åˆ¶åˆ°ç›®æ ‡åˆ‡ç‰‡ä¸­ï¼Œè€Œä¸æ˜¯æ–°åˆ†é…å†…å­˜ã€‚

![image-20230117163610901](http://sm.nsddd.top/sm202301171636018.png)

```go
package main

import (
    "fmt"
)

func main() {
    // å®šä¹‰ä¸€ä¸ªåˆ‡ç‰‡
    s := []int{1, 2, 3, 4, 5}

    // ä½¿ç”¨é‡æ–°åˆ‡ç‰‡æ“ä½œ,å¤åˆ¶sçš„å‰3ä¸ªå…ƒç´ åˆ°s1
    s1 := s[:3]

    //ä½¿ç”¨copyå‡½æ•°,å¤åˆ¶sçš„å‰3ä¸ªå…ƒç´ åˆ°s2
    s2 := make([]int, 3)
    copy(s2, s[:3])

    fmt.Println(s1)
    fmt.Println(s2)
}
```

ä½¿ç”¨ copy å‡½æ•°å¤åˆ¶æ•°æ®å¯ä»¥èŠ‚çœå†…å­˜çš„åˆ†é…å’Œåƒåœ¾å›æ”¶çš„æ—¶é—´,æé«˜æ€§èƒ½ã€‚

æ³¨æ„ï¼Œcopy å‡½æ•°åªèƒ½å¤åˆ¶åˆ‡ç‰‡çš„æ•°æ®ï¼Œä¸èƒ½å¤åˆ¶åˆ‡ç‰‡çš„åº•å±‚æ•°ç»„ã€‚å¦‚æœéœ€è¦å¤åˆ¶åº•å±‚æ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–æ–¹æ³•å¦‚ `append` å‡½æ•°æ¥å®ç°ã€‚



## mapä¼˜åŒ–å»ºè®®

å’Œ`slice` ç±»ä¼¼ï¼š

![image-20230117164516197](http://sm.nsddd.top/sm202301171645393.png)

**åˆ†é…å†…å­˜å»ºè®®ï¼š**

![image-20230117164529754](http://sm.nsddd.top/sm202301171645873.png)



## å­—ç¬¦ä¸²å¤„ç†ï¼Œä¼˜åŒ–

**ä¸åŒæ‹¼æ¥å­—ç¬¦ä¸²çš„æ–¹æ³•å¯¹åº”çš„æ€§èƒ½æœ‰å·®å¼‚ï¼š**

![image-20230117165018556](http://sm.nsddd.top/sm202301171650729.png)

![image-20230117165024292](http://sm.nsddd.top/sm202301171650473.png)

Goè¯­è¨€ä¸­å¸¸è§çš„æ‹¼æ¥å­—ç¬¦ä¸²çš„æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§:



ä½¿ç”¨ `+` è¿ç®—ç¬¦:

```go
s1 := "Hello"
s2 := "World"
s3 := s1 + " " + s2
fmt.Println(s3) // "Hello World"
```



ä½¿ç”¨ `fmt.Sprintf` å‡½æ•°:

```go
Copy codes1 := "Hello"
s2 := "World"
s3 := fmt.Sprintf("%s %s", s1, s2)
fmt.Println(s3) // "Hello World"
```



ä½¿ç”¨ `strings.Join` å‡½æ•°:

```go
s := []string{"Hello", "World"}
s3 := strings.Join(s, " ")
fmt.Println(s3) // "Hello World"
```



ä½¿ç”¨ `bytes.Buffer`:

```go
var buffer bytes.Buffer
buffer.WriteString("Hello")
buffer.WriteString(" ")
buffer.WriteString("World")
s3 := buffer.String()
fmt.Println(s3) // "Hello World"
```

åœ¨ç»“åˆä½ çš„å…·ä½“éœ€æ±‚æ¥é€‰æ‹©åˆé€‚çš„æ–¹å¼æ¥æ‹¼æ¥å­—ç¬¦ä¸²ã€‚

åœ¨æ‹¼æ¥å­—ç¬¦ä¸²æ•°é‡è¾ƒå¤šæ—¶ï¼Œä½¿ç”¨ `fmt.Sprintf`, `strings.Join` ä»¥åŠ bytes.Buffer æ˜¯æ›´ä¼˜ç§€çš„é€‰æ‹©ã€‚ è€Œåœ¨æ‹¼æ¥å­—ç¬¦ä¸²æ•°é‡è¾ƒå°‘æ—¶ï¼Œä½¿ç”¨ `+` è¿ç®—ç¬¦æ˜¯æ¯”è¾ƒç®€å•ç›´æ¥çš„é€‰æ‹©ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨ `+` è¿ç®—ç¬¦æ‹¼æ¥å­—ç¬¦ä¸²æ—¶ï¼Œå¦‚æœå­—ç¬¦ä¸²æ•°é‡è¾ƒå¤šï¼Œä¼šäº§ç”Ÿå¤§é‡çš„ä¸´æ—¶å¯¹è±¡ï¼Œå¯¼è‡´é¢‘ç¹çš„å†…å­˜åˆ†é…å’Œåƒåœ¾å›æ”¶ï¼Œå½±å“æ€§èƒ½ã€‚è€Œä½¿ç”¨ `fmt.Sprintf`, `strings.Join` ä»¥åŠ `bytes.Buffer` ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚

å¦å¤–ï¼Œåœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶ï¼Œä½¿ç”¨ bytes.Buffer æ•ˆç‡æ›´é«˜ï¼Œå› ä¸ºå®ƒæ˜¯åŸºäºå­—èŠ‚çš„ï¼Œè€Œä¸æ˜¯åŸºäºå­—ç¬¦çš„ã€‚

æ€»ä¹‹,åœ¨é€‰æ‹©å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼æ—¶ï¼Œè¦è€ƒè™‘åˆ°å­—ç¬¦ä¸²çš„æ•°é‡ã€æ€§èƒ½å’Œå¯è¯»æ€§ç­‰å› ç´ ã€‚

![image-20230117165239305](http://sm.nsddd.top/sm202301171652457.png)

**ä½†æ˜¯bytes.Bufferå’Œstrings.builderåº•å±‚åŒºåˆ«ä¹Ÿå½±å“äº†å®ƒä»¬çš„æ€§èƒ½ï¼š**

1. bytes.Bufferæ˜¯åŸºäºå­—èŠ‚çš„ï¼Œå†…éƒ¨ä½¿ç”¨ä¸€ä¸ªåŠ¨æ€æ•°ç»„æ¥å­˜å‚¨å­—èŠ‚ã€‚å®ƒæä¾›äº†ä¸€äº›æ–¹æ³•æ¥æ“ä½œå­—èŠ‚ï¼Œå¦‚ Write, WriteString, WriteByte ç­‰ã€‚
2. strings.Builder æ˜¯åŸºäºå­—ç¬¦çš„ï¼Œå†…éƒ¨ä½¿ç”¨ä¸€ä¸ªåŠ¨æ€æ•°ç»„æ¥å­˜å‚¨å­—ç¬¦ã€‚å®ƒæä¾›äº†ä¸€äº›æ–¹æ³•æ¥æ“ä½œå­—ç¬¦ï¼Œå¦‚ Write, WriteString, WriteByte ç­‰ã€‚
3. åœ¨æ€§èƒ½ä¸Šï¼Œbytes.Buffer å’Œ strings.Builder çš„æ€§èƒ½å·®å¼‚ä¸å¤§ï¼Œä½†æ˜¯åœ¨å¤„ç†å¤§é‡å­—èŠ‚æ•°æ®æ—¶ï¼Œbytes.Buffer ä¼šæ›´å¿«ä¸€äº›ï¼Œå› ä¸ºå®ƒæ˜¯åŸºäºå­—èŠ‚çš„ã€‚ è€Œstrings.Builder æ›´é€‚åˆå¤„ç†å­—ç¬¦æ•°æ®ã€‚
4. åœ¨é€‰æ‹©ä½¿ç”¨bytes.Buffer å’Œ strings.Builder æ—¶ï¼Œè¦æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚ï¼Œå¦‚æœä½ éœ€è¦å¤„ç†å¤§é‡å­—èŠ‚æ•°æ®ï¼Œä½¿ç”¨ bytes.Buffer æ›´åŠ åˆé€‚ã€‚å¦‚æœå¤„ç†çš„æ˜¯å­—ç¬¦ä¸²ï¼Œä½¿ç”¨strings.Builder æ›´åŠ åˆé€‚ã€‚
5. éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Go 1.13ç‰ˆæœ¬ä¹‹å,strings.Builder å·²ç»æˆä¸ºäº†æ ‡å‡†åº“ä¸­çš„æ ‡å‡†å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ã€‚



## ç©ºç»“æ„ä½“ å ä½ç¬¦

åœ¨ Go è¯­è¨€ä¸­ï¼Œç©ºç»“æ„ä½“ (empty struct) å¯ä»¥è¢«ç”¨ä½œå ä½ç¬¦ã€‚ç©ºç»“æ„ä½“æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç»“æ„ä½“ï¼Œå®ƒæ²¡æœ‰ä»»ä½•å­—æ®µï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ²¡æœ‰ä»»ä½•å†…å­˜å ç”¨ã€‚

è¿™ç§ç”¨é€”å¸¸ç”¨åœ¨ channel ä¸Š, å› ä¸ºç©ºç»“æ„ä½“å ç”¨å†…å­˜æœ€å°ï¼Œå¯ä»¥é«˜æ•ˆåœ°åœ¨ channel ä¸Šä¼ é€’ä¿¡å·ã€‚

ğŸ’¡ç®€å•çš„ä¸€ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼š

```go
package main

import "fmt"

func main() {
	done := make(chan struct{})

	go func() {
		fmt.Println("Doing some work...")
		close(done)
	}()
	fmt.Println("Waiting for work to be done...")
	<-done
	fmt.Println("Work done!")
}
```

ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š

```bash
PS D:\æ–‡æ¡£\my\go-pprof-practice> go run .\test.go
Waiting for work to be done...
Doing some work...
Work done!
```

ğŸ“œ å¯¹ä¸Šé¢çš„è§£é‡Šï¼š

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªç©ºç»“æ„ä½“ç±»å‹çš„ channel æ¥ä¼ é€’ä¿¡å·ï¼Œå½“ goroutine å®Œæˆäº†å·¥ä½œä¹‹åå°±ä¼šå‘ channel ä¸­å‘é€ä¸€ä¸ªç©ºç»“æ„ä½“ï¼Œä¸» goroutine é€šè¿‡è¯»å– channel ä¸­çš„æ•°æ®æ¥åˆ¤æ–­å·¥ä½œæ˜¯å¦å®Œæˆã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºç©ºç»“æ„ä½“ä¸å ç”¨ä»»ä½•å†…å­˜ï¼Œæ‰€ä»¥å®ƒåœ¨ channel ä¸­ä¼ é€’çš„æ˜¯ä¸€ä¸ªç©ºæ¶ˆæ¯ï¼Œä¸èƒ½åœ¨ channel ä¸­ä¼ é€’æ•°æ®ã€‚

ç©ºç»“æ„ä½“è¿˜æœ‰å…¶å®ƒç”¨é€”ï¼Œä¾‹å¦‚ä½œä¸ºå ä½ç¬¦åœ¨ map ä¸­ä½¿ç”¨ã€ä½œä¸ºé”çš„å®ç°ç­‰ã€‚

![image-20230117165629098](http://sm.nsddd.top/sm202301171656299.png)



### ä½œä¸ºå ä½ç¬¦åœ¨ map ä¸­ä½¿ç”¨

ä½œä¸ºå ä½ç¬¦åœ¨ map ä¸­ä½¿ç”¨ï¼Œç”¨æ¥æ£€æŸ¥ä¸€ä¸ªé”®æ˜¯å¦å­˜åœ¨ï¼š

```go
m := make(map[string]struct{})
m["key1"] = struct{}{}

_, ok := m["key1"]
fmt.Println(ok) // true

_, ok = m["key2"]
fmt.Println(ok) // false
```



### ä½œä¸ºé”çš„å®ç°ï¼Œç”¨æ¥å®ç°äº’æ–¥æ“ä½œ

```go
var lock struct{}

func myFunc() {
    fmt.Println("Acquiring lock...")
    lock = struct{}{}
    fmt.Println("Lock acquired.")
    // do some work
    fmt.Println("Releasing lock...")
    lock = struct{}{}
    fmt.Println("Lock released.")
}
```



### ä½œä¸ºå ä½ç¬¦åœ¨ç»“æ„ä½“ä¸­ä½¿ç”¨

**ç”¨æ¥å‡å°‘ç»“æ„ä½“çš„å†…å­˜å ç”¨ã€‚**

ğŸ’¡ç®€å•çš„ä¸€ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼š

```go
package main

import (
	"fmt"
	"unsafe"
)

type myStruct struct {
	name string
	data []byte
	_    struct{}
}

type myStruct2 struct {
	name string
	data []byte
}

func main() {
	s := myStruct{
		name: "example",
		data: []byte{1, 2, 3, 4, 5},
	}
	fmt.Println(s)
	fmt.Printf("Size of myStruct: %d bytes\n\n", unsafe.Sizeof(s))

	s2 := myStruct2{
		name: "example2",
		data: []byte{1, 2, 3, 4, 5, 6, 7, 8, 9, 10},
	}
	fmt.Println(s2)
	fmt.Printf("Size of myStruct2: %d bytes\n", unsafe.Sizeof(s2))
}
```

ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š

```go
{example [1 2 3 4 5] {}}
Size of myStruct: 48 bytes

{example2 [1 2 3 4 5 6 7 8 9 10]}
Size of myStruct2: 40 bytes
```

è¿™é‡Œä½¿ç”¨äº†ç©ºç»“æ„ä½“ä½œä¸ºå ä½ç¬¦ï¼Œå‡å°‘äº†ç»“æ„ä½“çš„å†…å­˜å ç”¨ã€‚

**è¿˜æœ‰å°±æ˜¯å®ƒå¯ä»¥ç”¨æ¥æ ‡è®°æŸç§ç±»å‹, ä¾‹å¦‚ï¼š**

```go
type MyType struct{}

func (t MyType)DoSomething(){
    // do something
}

var _ MyInterface = MyType{}
```

è¿™æ ·å°±å¯ä»¥é¿å…ç¼–è¯‘é”™è¯¯ã€‚

æ€»ä¹‹, ç©ºç»“æ„ä½“ä½œä¸ºå ä½ç¬¦æ˜¯ä¸€ç§é«˜æ•ˆçš„æ–¹å¼ï¼Œåœ¨å¾ˆå¤šåœºæ™¯ä¸‹éƒ½å¯ä»¥ä½¿ç”¨ã€‚



## atomicåŒ…

Goè¯­è¨€çš„atomicåŒ…æä¾›äº†ä¸€ç»„åŸå­æ“ä½œå‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯ä»¥åœ¨å¹¶å‘ç¯å¢ƒä¸­å®‰å…¨åœ°æ›´æ–°åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚æ•´å‹å’Œæµ®ç‚¹æ•°ã€‚**è¿™äº›å‡½æ•°åœ¨åº•å±‚ä½¿ç”¨äº†CPUçš„åŸå­æŒ‡ä»¤ï¼Œå¯ä»¥ä¿è¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­æ›´æ–°æ“ä½œçš„åŸå­æ€§ã€‚**

atomicåŒ…ä¸­æä¾›äº†ä»¥ä¸‹å¸¸ç”¨å‡½æ•°ï¼š

+ AddInt32ã€AddInt64ç­‰ï¼šå¯¹æŒ‡å®šçš„æ•´å‹å˜é‡æ‰§è¡ŒåŠ æ³•æ“ä½œã€‚
+ CompareAndSwapInt32ã€CompareAndSwapInt64ç­‰ï¼šå¦‚æœå½“å‰å˜é‡çš„å€¼ç­‰äºé¢„æœŸå€¼ï¼Œåˆ™å°†å…¶è®¾ç½®ä¸ºæ–°å€¼ã€‚
+ LoadInt32ã€LoadInt64ç­‰ï¼šè¯»å–æŒ‡å®šå˜é‡çš„å€¼ã€‚
+ StoreInt32ã€StoreInt64ç­‰ï¼šå°†æŒ‡å®šå˜é‡è®¾ç½®ä¸ºæŒ‡å®šå€¼ã€‚

è¯·æ³¨æ„ï¼ŒatomicåŒ…ä¸­çš„å‡½æ•°ä»…é€‚ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¦‚æœéœ€è¦å¯¹å¤æ‚æ•°æ®ç±»å‹è¿›è¡ŒåŸå­æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨sync/atomicåŒ…ä¸­çš„å‡½æ•°ã€‚

å®ä¾‹ï¼š

```go
package main

import (
    "fmt"
    "sync/atomic"
)

func main() {
    var i int32 = 0
    atomic.AddInt32(&i, 1)
    fmt.Println(i) // 1
}
```

### æ€§èƒ½å¯¹æ¯”

![image-20230117171344626](http://sm.nsddd.top/sm202301171713805.png)



### ä½¿ç”¨actomicåŒ…

![image-20230117171535814](http://sm.nsddd.top/sm202301171715939.png)



### actomicä¿æŒçº¿ç¨‹å®‰å…¨

```go
package main

import (
    "fmt"
    "sync"
    "sync/atomic"
)

func main() {
    var counter int64
    var wg sync.WaitGroup

    for i := 0; i < 100; i++ {
        wg.Add(1)
        go func() {
            defer wg.Done()
            atomic.AddInt64(&counter, 1)
        }()
    }

    wg.Wait()
    fmt.Println(counter)
}

```

ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š

```go
100
```

è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªint64ç±»å‹çš„å˜é‡counterï¼Œå¹¶åœ¨100ä¸ªgoroutineä¸­å¹¶å‘åœ°æ‰§è¡ŒAddInt64å‡½æ•°å¯¹å…¶è¿›è¡Œè‡ªå¢æ“ä½œã€‚ç”±äº AddInt64å‡½æ•°æ˜¯åŸå­çš„ï¼Œæ‰€ä»¥ä¸ä¼šå‘ç”Ÿç«æ€æ¡ä»¶ã€‚åœ¨æ‰€æœ‰goroutineæ‰§è¡Œå®Œæ¯•åï¼Œcounterçš„å€¼åº”è¯¥ä¸º100ï¼Œå¹¶ä¸”ä¸ä¼šå—åˆ°å…¶å®ƒçº¿ç¨‹çš„å½±å“ã€‚



## æ€§èƒ½ä¼˜åŒ–åˆ†æå·¥å…·

### ä¼˜åŒ–å»ºè®®

**Goè¯­è¨€æ€§èƒ½è°ƒä¼˜æœ‰ä»¥ä¸‹å‡ ç‚¹å»ºè®®:**

1. ä½¿ç”¨ Go çš„å†…ç½®æ€§èƒ½åˆ†æå·¥å…·ï¼Œå¦‚ pprofï¼Œå¯ä»¥å¸®åŠ©è¯Šæ–­ç¨‹åºä¸­çš„æ€§èƒ½ç“¶é¢ˆã€‚
2. é¿å…ä½¿ç”¨é«˜å¼€é”€çš„æ“ä½œï¼Œä¾‹å¦‚è¿‡å¤šçš„å†…å­˜åˆ†é…å’Œå­—ç¬¦ä¸²è¿æ¥ã€‚
3. ä½¿ç”¨ Go åç¨‹ï¼Œå¯ä»¥æé«˜ç¨‹åºçš„å¹¶å‘æ€§èƒ½ã€‚
4. ä½¿ç”¨ Go çš„ç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œä¾‹å¦‚ç¦ç”¨å†…è”ï¼ˆ-gcflags=-lï¼‰å’Œä¼˜åŒ–çº§åˆ«ï¼ˆ-Oï¼‰ã€‚
5. ä½¿ç”¨ Go çš„åŸç”Ÿå¹¶å‘ç±»å‹ï¼Œå¦‚ channelï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ã€‚
6. ä½¿ç”¨ Go çš„åƒåœ¾å›æ”¶å™¨ï¼Œå¯ä»¥å‡å°‘å†…å­˜åˆ†é…å’Œå›æ”¶çš„å¼€é”€ã€‚
7. å°½é‡é¿å…ä½¿ç”¨åå°„ã€‚
8. å¯ä»¥ä½¿ç”¨ cgoè°ƒç”¨Cè¯­è¨€ä»£ç æ¥æå‡æ€§èƒ½



**ä¼˜åŒ–åŸåˆ™ï¼š**

1. ä¼˜åŒ–æœ€çƒ­ç‚¹çš„ä»£ç : é€šè¿‡æ€§èƒ½åˆ†æå·¥å…·ï¼ˆä¾‹å¦‚ pprofï¼‰æ¥è¯†åˆ«ç¨‹åºä¸­çš„æ€§èƒ½ç“¶é¢ˆå¹¶ä¼˜åŒ–ã€‚
2. å°½é‡å‡å°‘ä¸å¿…è¦çš„æ“ä½œ: æ¯”å¦‚å†…å­˜åˆ†é…ã€å­—ç¬¦ä¸²è¿æ¥ç­‰é«˜å¼€é”€æ“ä½œã€‚
3. ä½¿ç”¨åˆé€‚çš„æ•°æ®ç»“æ„å’Œç®—æ³•: ä¾‹å¦‚ä½¿ç”¨ hash è¡¨ä»£æ›¿æš´åŠ›æŸ¥æ‰¾ï¼Œä½¿ç”¨ä¼˜åŒ–åçš„ç®—æ³•ç­‰ã€‚
4. ä½¿ç”¨å¹¶å‘å’Œå¹¶è¡ŒæŠ€æœ¯: ä¾‹å¦‚ä½¿ç”¨ Go åç¨‹ã€channel æ¥æé«˜ç¨‹åºçš„å¹¶å‘æ€§èƒ½ã€‚
5. å°½é‡é¿å…ä½¿ç”¨åå°„: ä½¿ç”¨åå°„ä¼šå¸¦æ¥æ€§èƒ½ä¸Šçš„ä»£ä»·ã€‚
6. ä½¿ç”¨ç¼–è¯‘å™¨ä¼˜åŒ–: ä¾‹å¦‚ç¦ç”¨å†…è”ã€ä½¿ç”¨ä¼˜åŒ–çº§åˆ«ç­‰ã€‚
7. åˆ©ç”¨ç¡¬ä»¶åŠ é€Ÿ: ä¾‹å¦‚ä½¿ç”¨ GPU åŠ é€Ÿç­‰ã€‚
8. ä¼˜å…ˆä½¿ç”¨é«˜æ•ˆçš„ç¬¬ä¸‰æ–¹åº“: ä½¿ç”¨é«˜æ•ˆçš„ç¬¬ä¸‰æ–¹åº“å¯ä»¥å‡å°‘ä»£ç é‡å¹¶æé«˜æ€§èƒ½ã€‚
9. ç»å¸¸è¿›è¡Œæ€§èƒ½æµ‹è¯•å’Œç›‘æ§: æ€§èƒ½ä¼˜åŒ–ä¸æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œéœ€è¦ç»å¸¸è¿›è¡Œæ€§èƒ½æµ‹è¯•å’Œç›‘æ§ï¼ŒåŠæ—¶å‘ç°å¹¶è§£å†³æ€§èƒ½é—®é¢˜ã€‚



### æ€§èƒ½åˆ†æå·¥å…· pprof

pprofæ˜¯ Go è¯­è¨€çš„æ€§èƒ½åˆ†æå·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©è¯Šæ–­ç¨‹åºä¸­çš„æ€§èƒ½ç“¶é¢ˆã€‚

ä½¿ç”¨æ–¹æ³•:

1. åœ¨ç¨‹åºä¸­å¯¼å…¥ "net/http/pprof" åŒ…
2. å¯åŠ¨ pprof HTTP æœåŠ¡å™¨ï¼Œé€šå¸¸æ˜¯åœ¨ main å‡½æ•°ä¸­è°ƒç”¨ `go func() { log.Println(http.ListenAndServe("localhost:6060", nil)) }()`
3. ä½¿ç”¨æµè§ˆå™¨æˆ–å‘½ä»¤è¡Œå·¥å…·è®¿é—® pprof çš„ HTTP æœåŠ¡å™¨ï¼Œä¾‹å¦‚ï¼š `http://localhost:6060/debug/pprof/`
4. é€šè¿‡ pprof æä¾›çš„ä¸åŒçš„ webé¡µé¢ æˆ– å‘½ä»¤è¡Œå·¥å…· æŸ¥çœ‹æ€§èƒ½ç»Ÿè®¡ä¿¡æ¯

pprof æ”¯æŒå¤šç§ç±»å‹çš„æ€§èƒ½åˆ†æï¼ŒåŒ…æ‹¬ CPU profileã€memory profileã€block profileã€goroutine profileã€threadcreate profileã€heap profileç­‰.

![image-20230118153922625](http://sm.nsddd.top/sm202301181539789.png)



### pprofé¡¹ç›®å®æˆ˜

å°†æœ€å¼€å§‹çš„é¡¹ç›® clone åˆ°æœ¬åœ°ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œå†™äº†ä¸€äº›é€ æˆæ€§èƒ½é—®é¢˜çš„ä»£ç ç‚¸å¼¹ã€‚



**ç¼–è¯‘å¹¶ä¿æŒé“¾æ¥ï¼š**

```
go run main.go
```



**æµè§ˆå™¨æŸ¥çœ‹æŒ‡æ ‡ï¼š**

+ http://localhost:6060/debug/pprof/

 

**pprofå‘½ä»¤æ’æŸ¥ï¼š**

> ä¿æŒè¿æ¥ï¼Œå¦å¼€ç»ˆç«¯ï¼š

```bash
go tool pprof "http://localhost:6060/debug/pprof/profile?seconds=10"
```



#### topN â€” æŸ¥çœ‹å ç”¨èµ„æºæœ€å¤šçš„å‡½æ•°ï¼š

![image-20230118162256355](http://sm.nsddd.top/sm202301181622460.png)



ğŸ“œ å¯¹ä¸Šé¢çš„è§£é‡Šï¼š

+ flat = cumï¼Œå‡½æ•°ä¸­æ²¡æœ‰è°ƒç”¨å…¶ä»–çš„å‡½æ•°
+ flat = 0ï¼Œå‡½æ•°ä¸­åªæœ‰å…¶ä»–å‡½æ•°çš„è°ƒç”¨



#### listå‘½ä»¤

```bash
(pprof) list Eat
Total: 2.77s
ROUTINE ======================== github.com/wolfogre/go-pprof-practice/animal/felidae/tiger.(*Tiger).Eat in D:\æ–‡æ¡£\my\go-pprof-practice\animal\felidae\tiger\tiger.go
     2.73s      2.74s (flat, cum) 98.92% of Total
         .          .     19:}
         .          .     20:
         .          .     21:func (t *Tiger) Eat() {
         .          .     22:   log.Println(t.Name(), "eat")
         .          .     23:   loop := 10000000000
     2.73s      2.74s     24:   for i := 0; i < loop; i++ {
         .          .     25:           // do nothing
         .          .     26:   }
         .          .     27:}
         .          .     28:
         .          .     29:func (t *Tiger) Drink() {
(pprof)
```



**é—®é¢˜å‡ºåœ¨ç¬¬ 24 L**





#### è°ƒç”¨å…³ç³»å¯è§†åŒ–

![image-20230118163659804](http://sm.nsddd.top/sm202301181636935.png)



**è§£å†³åï¼Œå‘ç°åç¨‹æ•°ä¸‹é™ï¼š**

![image-20230118163915913](http://sm.nsddd.top/sm202301181639282.png)



## æ€§èƒ½è°ƒä¼˜å®æˆ˜

pprofæ˜¯æ€§èƒ½è°ƒè¯•å·¥å…·ï¼Œå¯ä»¥ç”Ÿæˆç±»ä¼¼ç«ç„°å›¾ã€å †æ ˆå›¾ï¼Œå†…å­˜åˆ†æå›¾ç­‰ã€‚

æ•´ä¸ªåˆ†æçš„è¿‡ç¨‹åˆ†ä¸ºä¸¤æ­¥ï¼š1. å¯¼å‡ºæ•°æ®ï¼Œ2. åˆ†ææ•°æ®ã€‚



### ä½¿ç”¨

allocsï¼šæŸ¥çœ‹è¿‡å»æ‰€æœ‰å†…å­˜åˆ†é…çš„æ ·æœ¬ã€‚

blockï¼šæŸ¥çœ‹å¯¼è‡´é˜»å¡åŒæ­¥çš„å †æ ˆè·Ÿè¸ªã€‚

cmdlineï¼š å½“å‰ç¨‹åºçš„å‘½ä»¤è¡Œçš„å®Œæ•´è°ƒç”¨è·¯å¾„ã€‚

goroutineï¼šæŸ¥çœ‹å½“å‰æ‰€æœ‰è¿è¡Œçš„ goroutines å †æ ˆè·Ÿè¸ªã€‚

heapï¼šæŸ¥çœ‹æ´»åŠ¨å¯¹è±¡çš„å†…å­˜åˆ†é…æƒ…å†µã€‚

mutexï¼šæŸ¥çœ‹å¯¼è‡´äº’æ–¥é”çš„ç«äº‰æŒæœ‰è€…çš„å †æ ˆè·Ÿè¸ªã€‚

profileï¼š é»˜è®¤è¿›è¡Œ 30s çš„ CPU Profilingï¼Œå¾—åˆ°ä¸€ä¸ªåˆ†æç”¨çš„ profile æ–‡ä»¶ã€‚

threadcreateï¼šæŸ¥çœ‹åˆ›å»ºæ–° OS çº¿ç¨‹çš„å †æ ˆè·Ÿè¸ªã€‚

traceï¼š[mp.weixin.qq.com/s/I9xSMxy32â€¦](https://mp.weixin.qq.com/s/I9xSMxy32cALSNQAN8wlnQ)









### è¿‡ç¨‹å’ŒåŸç†

![image-20230118164157274](http://sm.nsddd.top/sm202301181641399.png)





## END é“¾æ¥

+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](27.md)
+ [ä¸‹ä¸€èŠ‚](29.md)
---
+ [å‚ä¸è´¡çŒ®â¤ï¸ğŸ’•ğŸ’•](https://github.com/3293172751/Block_Chain/blob/master/Git/git-contributor.md)