+ [author](https://github.com/3293172751)

# ç¬¬16èŠ‚ Go genericityï¼ˆæ³›å‹ï¼‰

+  [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](15.md)
> â¤ï¸ğŸ’•ğŸ’•Goè¯­è¨€é«˜çº§ç¯‡ç« ,åœ¨æ­¤ä¹‹å‰å»ºè®®æ‚¨å…ˆäº†è§£åŸºç¡€å’Œè¿›é˜¶ç¯‡ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)
###  **[Goè¯­è¨€åŸºç¡€ç¯‡](https://github.com/cubxxw/awesome-cs-cloudnative-blockchain/blob/master/TOC.md)**
###  **[Goè¯­è¨€100ç¯‡è¿›é˜¶](https://github.com/cubxxw/awesome-cs-cloudnative-blockchain/blob/master/Gomd_super/README.md)**
---
[TOC]

## å…ˆå†³æ¡ä»¶

::: tip
éšç€ 2022 å¹´ 3 æœˆ 15 æ—¥ go 1.18 æ­£å¼å‘å¸ƒï¼Œæ–°ç‰ˆæœ¬é™¤äº†å¯¹æ€§èƒ½çš„æå‡ä¹‹å¤–ï¼Œè¿˜å¼•å…¥äº†å¾ˆå¤šæ–°åŠŸèƒ½ï¼Œå…¶ä¸­å°±æœ‰ go æœŸç›¼å·²ä¹…çš„åŠŸèƒ½æ³›å‹(Generics)ï¼ŒåŒæ—¶è¿˜å¼•å…¥çš„å¤šæ¨¡å—å·¥ä½œåŒº(Workspaces)å’Œæ¨¡ç³Šæµ‹è¯•(Fuzzing)ã€‚

+ **å®‰è£… Go 1.18 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚**æœ‰å…³å®‰è£…è¯´æ˜ï¼Œè¯·å‚é˜…[å®‰è£… Go](https://go.dev/doc/install).
+ **ç”¨äºç¼–è¾‘ä»£ç çš„å·¥å…·ã€‚**æ‚¨æ‹¥æœ‰çš„ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œã€‚
+ **å‘½ä»¤ç»ˆç«¯ã€‚**Go åœ¨ Linux å’Œ Mac ä¸Šçš„ä»»ä½•ç»ˆç«¯ä»¥åŠ Windows ä¸­çš„ PowerShell æˆ– cmd ä¸Šè¿è¡Œè‰¯å¥½ã€‚

:::



## ä¸Šæ‰‹â€“è§£å†³ç›¸åŠ é—®é¢˜

ğŸ’¡ç®€å•çš„ä¸€ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼š

```go
package main

import "fmt"

type MySlice[T int | float64 | string] []T

func (s MySlice[T]) Sum() T {
	var sum T
	for _, v := range s {
		sum += v
	}
	return sum
}

func main() {
	s := MySlice[int]{1, 2, 3}
	fmt.Println(s.Sum())

	v := MySlice[float64]{1.1, 2.2, 3.3}
	fmt.Println(v.Sum())

	u := MySlice[string]{"hello", "world"}
	fmt.Println(u.Sum())
}
```

ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š

```bash
[Running] go run "d:\æ–‡æ¡£\æœ€è¿‘çš„\awesome-golang\docs\code\go-super\71-main.go"
6
6.6
helloworld
```

::: tip ğŸ“œ å¯¹ä¸Šé¢çš„è§£é‡Š
æ³›å‹å‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥æ¥æ”¶åŒ…å«æ•´æ•°æˆ–æµ®ç‚¹å€¼çš„æ˜ å°„ï¼Œä»è€Œæœ‰æ•ˆåœ°å°†åˆšåˆšç¼–å†™çš„ä¸¤ä¸ªå‡½æ•°æ›¿æ¢ä¸ºå•ä¸ªå‡½æ•°ã€‚

è‹¥è¦æ”¯æŒä»»ä¸€ç±»å‹çš„å€¼ï¼Œè¯¥å•ä¸ªå‡½æ•°å°†éœ€è¦ä¸€ç§æ–¹æ³•æ¥å£°æ˜å®ƒæ”¯æŒçš„ç±»å‹ã€‚å¦ä¸€æ–¹é¢ï¼Œè°ƒç”¨ä»£ç éœ€è¦ä¸€ç§æ–¹æ³•æ¥æŒ‡å®šå®ƒæ˜¯ä½¿ç”¨æ•´æ•°è¿˜æ˜¯æµ®ç‚¹æ˜ å°„è¿›è¡Œè°ƒç”¨ã€‚

ç±»å‹å‚æ•°å¿…é¡»æ”¯æŒæ³›å‹ä»£ç å¯¹å…¶æ‰§è¡Œçš„æ‰€æœ‰æ“ä½œã€‚ä¾‹å¦‚ï¼Œå¦‚æœå‡½æ•°çš„ä»£ç è¦å°è¯•å¯¹å…¶çº¦æŸåŒ…å«æ•°å€¼ç±»å‹çš„ç±»å‹å‚æ•°æ‰§è¡Œ`string`æ“ä½œï¼ˆå¦‚ç´¢å¼•ï¼‰ï¼Œåˆ™ä»£ç å°†æ— æ³•ç¼–è¯‘ã€‚

:::



**ç±»æ¯”ä¸¤ä¸ªæ•°ä¹Ÿæ˜¯å¯ä»¥çš„~**

::: details ğŸ’¡ç®€å•çš„ä¸€ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼š

```go
package main

import "fmt"

type MySlice[T int | float64 | string] []T

func (s MySlice[T]) Sum() T {
	var sum T
	for _, v := range s {
		sum += v
	}
	return sum
}

//æ³›å‹ï¼ˆgenericityï¼‰å‡½æ•°
func Add[T int | float64 | string](a, b T) T {
	return a + b
}

func main() {
	s := MySlice[int]{1, 2, 3}
	fmt.Println(s.Sum())

	v := MySlice[float64]{1.1, 2.2, 3.3}
	fmt.Println(v.Sum())

	u := MySlice[string]{"hello", "world"}
	fmt.Println(u.Sum())

	fmt.Println(Add(1, 2))
	fmt.Println(Add(1.1, 2.2))
	fmt.Println(Add("hello", "world"))
}

```

ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š

```bash
[Running] go run "d:\æ–‡æ¡£\æœ€è¿‘çš„\awesome-golang\docs\code\go-super\71-main.go"
6
6.6
helloworld
3
3.3000000000000003
helloworld
```

æˆ‘ä»¬å¯ä»¥åŒè¿‡ä¸€ä¸ªæ–¹æ³•å»é€‚é…å¾ˆå¤šä¸ªæ–¹æ³•ã€‚

:::

::: danger âš ï¸éœ€è¦æ³¨æ„

```bash
func Add[T int | float64 | string](a, b T) T {
	return a + b
}
```

æ³¨æ„æˆ‘ä»¬çš„æ³›å‹ï¼ˆgenericityï¼‰ç±»å‹å¦‚æœæŒ‡å®š any ï¼Œé‚£ä¹ˆæ˜¯ä¸ä¼šæˆåŠŸçš„ï¼ˆ`interface{}`åªèƒ½è¿”å›ä¸€ä¸ªå€¼

```go
func Add[T any](a, b T) T {
	return a + b
}
```

**æˆ‘ä»¬çœ‹ä¸€ä¸‹ any æºç ï¼š**

```go
type any = interface{}
```

+ any ï¼šè¡¨ç¤º Goè¯­è¨€ æ‰€æœ‰å†…ç½®çš„åŸºæœ¬ç±»å‹
+ comparableï¼šè¡¨ç¤ºåœ¨Goè¯­è¨€é‡Œé¢æ‰€æœ‰å†…ç½®çš„å¯æ¯”è¾ƒç±»å‹

ğŸ”½ æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ³›å‹ï¼ˆgenericityï¼‰ç±»å‹

:::



## è‡ªå®šä¹‰æ³›å‹ï¼ˆgenericityï¼‰çº¦æŸ

å¦‚æœç±»å‹å¤ªå¤šäº†æ€ä¹ˆåŠï¼Œæˆ‘ä»¬é’ˆå¯¹`Add[T int | float64 | string](a, b T) T` è€Œè¨€ï¼Œæˆ‘ä»¬ä½¿ç”¨ `interface`å®šä¹‰ï¼š

```go
/*
è‡ªå®šä¹‰æ³›å‹ï¼ˆgenericityï¼‰ç±»å‹
*/

package main

import "fmt"

type MyInt interface {
	int | int64 | int32 | int16 | int8
}

func GetMaxNum[T MyInt](a, b T) T {
	if a > b {
		return a
	}
	return b
}

func main() {
	fmt.Println(GetMaxNum(1, 2))
}

```

ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š`2`







## END é“¾æ¥

+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](15.md)
+ [ä¸‹ä¸€èŠ‚](17.md)
---
+ [å‚ä¸è´¡çŒ®â¤ï¸ğŸ’•ğŸ’•](https://github.com/cubxxw/awesome-cs-cloudnative-blockchain/blob/master/Git/git-contributor.md)