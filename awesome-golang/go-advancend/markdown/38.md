+ [author](https://github.com/3293172751)

# ç¬¬38èŠ‚ å†…å­˜ç®¡ç†ï¼ˆèŠ‚é€‰ï¼‰

+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](37.md)
> â¤ï¸ğŸ’•ğŸ’•Goè¯­è¨€é«˜çº§ç¯‡ç« ,åœ¨æ­¤ä¹‹å‰å»ºè®®æ‚¨å…ˆäº†è§£åŸºç¡€å’Œè¿›é˜¶ç¯‡ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)
##  **[Goè¯­è¨€åŸºç¡€ç¯‡](https://github.com/3293172751/Block_Chain/blob/master/TOC.md)**
##  **[Goè¯­è¨€100ç¯‡è¿›é˜¶](https://github.com/3293172751/Block_Chain/blob/master/Gomd_super/README.md)**
---
[TOC]



## å‰è¨€

+ [x] [åŸæ–‡é“¾æ¥](https://learnku.com/articles/41728)

> æœ¬ç« èŠ‚å·²æ”¶å½•ã€ŠGolangä¿®å…»ä¹‹è·¯ã€‹www.yuque.com/aceld/golang/ithv8f ç¬¬ä¸€ç¯‡ç¬¬2ç« èŠ‚ã€‚ è¯¥æ–‡ç« ä¸»è¦è¯¦ç»†å…·ä½“çš„ä»‹ç»Goroutineè°ƒåº¦å™¨è¿‡ç¨‹åŠåŸç†ï¼Œå¯ä»¥å¯¹Goè°ƒåº¦å™¨çš„è¯¦ç»†è°ƒåº¦è¿‡ç¨‹æœ‰ä¸€ä¸ªæ¸…æ™°çš„ç†è§£ï¼ŒèŠ± è´¹4å¤©æ—¶é—´ä½œäº†30+...

æœ¬ç« èŠ‚å·²æ”¶å½•ã€ŠGolang ä¿®å…»ä¹‹è·¯ã€‹[www.yuque.com/aceld/golang/ithv8f](https://www.yuque.com/aceld/golang/ithv8f) ç¬¬ä¸€ç¯‡ç¬¬ 2 ç« èŠ‚ã€‚

> è¯¥æ–‡ç« ä¸»è¦è¯¦ç»†å…·ä½“çš„ä»‹ç» Goroutine è°ƒåº¦å™¨è¿‡ç¨‹åŠåŸç†ï¼Œå¯ä»¥å¯¹ Go è°ƒåº¦å™¨çš„è¯¦ç»†è°ƒåº¦è¿‡ç¨‹æœ‰ä¸€ä¸ªæ¸…æ™°çš„ç†è§£ï¼ŒèŠ± è´¹ 4 å¤©æ—¶é—´ä½œäº† 30 + å¼ å›¾ (æ¨èæ”¶è—)ï¼ŒåŒ…æ‹¬å¦‚ä¸‹å‡ ä¸ªç« èŠ‚ã€‚

> æœ¬ç« èŠ‚å«è§†é¢‘ç‰ˆ:  
> [![](https://cdn.learnku.com/uploads/images/202201/25/58489/rxrnLas6f5.png!large)](https://www.bilibili.com/video/BV19r4y1w7Nx)

`ç¬¬ä¸€ç« ` Golang è°ƒåº¦å™¨çš„ç”±æ¥

`ç¬¬äºŒç« ` Goroutine è°ƒåº¦å™¨çš„ GMP æ¨¡å‹åŠè®¾è®¡æ€æƒ³

`ç¬¬ä¸‰ç« ` Goroutine è°ƒåº¦åœºæ™¯è¿‡ç¨‹å…¨å›¾æ–‡è§£æ

## ä¸€ã€Golang â€œè°ƒåº¦å™¨â€ çš„ç”±æ¥ï¼Ÿ[#](#a19960)

### (1) å•è¿›ç¨‹æ—¶ä»£ä¸éœ€è¦è°ƒåº¦å™¨[#](#e9b84b)

æˆ‘ä»¬çŸ¥é“ï¼Œä¸€åˆ‡çš„è½¯ä»¶éƒ½æ˜¯è·‘åœ¨æ“ä½œç³»ç»Ÿä¸Šï¼ŒçœŸæ­£ç”¨æ¥å¹²æ´» (è®¡ç®—) çš„æ˜¯ CPUã€‚æ—©æœŸçš„æ“ä½œç³»ç»Ÿæ¯ä¸ªç¨‹åºå°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œç›´åˆ°ä¸€ä¸ªç¨‹åºè¿è¡Œå®Œï¼Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€ä¸ªè¿›ç¨‹ï¼Œå°±æ˜¯ â€œå•è¿›ç¨‹æ—¶ä»£â€

ä¸€åˆ‡çš„ç¨‹åºåªèƒ½ä¸²è¡Œå‘ç”Ÿã€‚  
![](https://cdn.learnku.com/uploads/images/202003/11/58489/06IoYRyruP.png!large)

æ—©æœŸçš„å•è¿›ç¨‹æ“ä½œç³»ç»Ÿï¼Œé¢ä¸´ 2 ä¸ªé—®é¢˜ï¼š

1. å•ä¸€çš„æ‰§è¡Œæµç¨‹ï¼Œè®¡ç®—æœºåªèƒ½ä¸€ä¸ªä»»åŠ¡ä¸€ä¸ªä»»åŠ¡å¤„ç†ã€‚

2. è¿›ç¨‹é˜»å¡æ‰€å¸¦æ¥çš„ CPU æ—¶é—´æµªè´¹ã€‚

é‚£ä¹ˆèƒ½ä¸èƒ½æœ‰å¤šä¸ªè¿›ç¨‹æ¥å®è§‚ä¸€èµ·æ¥æ‰§è¡Œå¤šä¸ªä»»åŠ¡å‘¢ï¼Ÿ

åæ¥æ“ä½œç³»ç»Ÿå°±å…·æœ‰äº†**æœ€æ—©çš„å¹¶å‘èƒ½åŠ›ï¼šå¤šè¿›ç¨‹å¹¶å‘**ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹é˜»å¡çš„æ—¶å€™ï¼Œåˆ‡æ¢åˆ°å¦å¤–ç­‰å¾…æ‰§è¡Œçš„è¿›ç¨‹ï¼Œè¿™æ ·å°±èƒ½å°½é‡æŠŠ CPU åˆ©ç”¨èµ·æ¥ï¼ŒCPU å°±ä¸æµªè´¹äº†ã€‚

### (2) å¤šè¿›ç¨‹ / çº¿ç¨‹æ—¶ä»£æœ‰äº†è°ƒåº¦å™¨éœ€æ±‚[#](#80b97a)

![](https://cdn.learnku.com/uploads/images/202003/11/58489/sLve6TagD3.png!large)

åœ¨å¤šè¿›ç¨‹ / å¤šçº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œå°±è§£å†³äº†é˜»å¡çš„é—®é¢˜ï¼Œå› ä¸ºä¸€ä¸ªè¿›ç¨‹é˜»å¡ cpu å¯ä»¥ç«‹åˆ»åˆ‡æ¢åˆ°å…¶ä»–è¿›ç¨‹ä¸­å»æ‰§è¡Œï¼Œè€Œä¸”è°ƒåº¦ cpu çš„ç®—æ³•å¯ä»¥ä¿è¯åœ¨è¿è¡Œçš„è¿›ç¨‹éƒ½å¯ä»¥è¢«åˆ†é…åˆ° cpu çš„è¿è¡Œæ—¶é—´ç‰‡ã€‚è¿™æ ·ä»å®è§‚æ¥çœ‹ï¼Œä¼¼ä¹å¤šä¸ªè¿›ç¨‹æ˜¯åœ¨åŒæ—¶è¢«è¿è¡Œã€‚

ä½†æ–°çš„é—®é¢˜å°±åˆå‡ºç°äº†ï¼Œè¿›ç¨‹æ‹¥æœ‰å¤ªå¤šçš„èµ„æºï¼Œè¿›ç¨‹çš„åˆ›å»ºã€åˆ‡æ¢ã€é”€æ¯ï¼Œéƒ½ä¼šå ç”¨å¾ˆé•¿çš„æ—¶é—´ï¼ŒCPU è™½ç„¶åˆ©ç”¨èµ·æ¥äº†ï¼Œä½†å¦‚æœè¿›ç¨‹è¿‡å¤šï¼ŒCPU æœ‰å¾ˆå¤§çš„ä¸€éƒ¨åˆ†éƒ½è¢«ç”¨æ¥è¿›è¡Œè¿›ç¨‹è°ƒåº¦äº†ã€‚

**æ€ä¹ˆæ‰èƒ½æé«˜ CPU çš„åˆ©ç”¨ç‡å‘¢ï¼Ÿ**

ä½†æ˜¯å¯¹äº Linux æ“ä½œç³»ç»Ÿæ¥è®²ï¼Œcpu å¯¹è¿›ç¨‹çš„æ€åº¦å’Œçº¿ç¨‹çš„æ€åº¦æ˜¯ä¸€æ ·çš„ã€‚  
![](https://cdn.learnku.com/uploads/images/202003/11/58489/dNWd00AiEZ.png!large)

å¾ˆæ˜æ˜¾ï¼ŒCPU è°ƒåº¦åˆ‡æ¢çš„æ˜¯è¿›ç¨‹å’Œçº¿ç¨‹ã€‚å°½ç®¡çº¿ç¨‹çœ‹èµ·æ¥å¾ˆç¾å¥½ï¼Œä½†å®é™…ä¸Šå¤šçº¿ç¨‹å¼€å‘è®¾è®¡ä¼šå˜å¾—æ›´åŠ å¤æ‚ï¼Œè¦è€ƒè™‘å¾ˆå¤šåŒæ­¥ç«äº‰ç­‰é—®é¢˜ï¼Œå¦‚é”ã€ç«äº‰å†²çªç­‰ã€‚

### (3) åç¨‹æ¥æé«˜ CPU åˆ©ç”¨ç‡[#](#49925f)

å¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹å·²ç»æé«˜äº†ç³»ç»Ÿçš„å¹¶å‘èƒ½åŠ›ï¼Œä½†æ˜¯åœ¨å½“ä»Šäº’è”ç½‘é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œä¸ºæ¯ä¸ªä»»åŠ¡éƒ½åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ˜¯ä¸ç°å®çš„ï¼Œå› ä¸ºä¼šæ¶ˆè€—å¤§é‡çš„å†…å­˜ (è¿›ç¨‹è™šæ‹Ÿå†…å­˜ä¼šå ç”¨ 4GB [32 ä½æ“ä½œç³»ç»Ÿ], è€Œçº¿ç¨‹ä¹Ÿè¦å¤§çº¦ 4MB)ã€‚

å¤§é‡çš„è¿›ç¨‹ / çº¿ç¨‹å‡ºç°äº†æ–°çš„é—®é¢˜

*   é«˜å†…å­˜å ç”¨
*   è°ƒåº¦çš„é«˜æ¶ˆè€— CPU

å¥½äº†ï¼Œç„¶åå·¥ç¨‹å¸ˆä»¬å°±å‘ç°ï¼Œå…¶å®ä¸€ä¸ªçº¿ç¨‹åˆ†ä¸º â€œå†…æ ¸æ€ â€œçº¿ç¨‹å’Œâ€ ç”¨æˆ·æ€ â€œçº¿ç¨‹ã€‚

ä¸€ä¸ª â€œç”¨æˆ·æ€çº¿ç¨‹â€ å¿…é¡»è¦ç»‘å®šä¸€ä¸ª â€œå†…æ ¸æ€çº¿ç¨‹â€ï¼Œä½†æ˜¯ CPU å¹¶ä¸çŸ¥é“æœ‰ â€œç”¨æˆ·æ€çº¿ç¨‹â€ çš„å­˜åœ¨ï¼Œå®ƒåªçŸ¥é“å®ƒè¿è¡Œçš„æ˜¯ä¸€ä¸ª â€œå†…æ ¸æ€çº¿ç¨‹â€(Linux çš„ PCB è¿›ç¨‹æ§åˆ¶å—)ã€‚

![](https://cdn.learnku.com/uploads/images/202003/11/58489/TfStmYsfyF.png!large)

è¿™æ ·ï¼Œæˆ‘ä»¬å†å»ç»†åŒ–å»åˆ†ç±»ä¸€ä¸‹ï¼Œå†…æ ¸çº¿ç¨‹ä¾ç„¶å« â€œçº¿ç¨‹ (thread)â€ï¼Œç”¨æˆ·çº¿ç¨‹å« â€œåç¨‹ (co-routine)â€.

![](https://cdn.learnku.com/uploads/images/202003/11/58489/vgzlKzvOUL.png!large)

 çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±è¦å¼€è„‘æ´äº†ï¼Œæ—¢ç„¶ä¸€ä¸ªåç¨‹ (co-routine) å¯ä»¥ç»‘å®šä¸€ä¸ªçº¿ç¨‹ (thread)ï¼Œé‚£ä¹ˆèƒ½ä¸èƒ½å¤šä¸ªåç¨‹ (co-routine) ç»‘å®šä¸€ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹ (thread) ä¸Šå‘¢ã€‚

 ä¹‹åï¼Œæˆ‘ä»¬å°±çœ‹åˆ°äº†æœ‰ 3 ç§åç¨‹å’Œçº¿ç¨‹çš„æ˜ å°„å…³ç³»ï¼š

> ## N:1 å…³ç³»[#](#35c656)

N ä¸ªåç¨‹ç»‘å®š 1 ä¸ªçº¿ç¨‹ï¼Œä¼˜ç‚¹å°±æ˜¯**åç¨‹åœ¨ç”¨æˆ·æ€çº¿ç¨‹å³å®Œæˆåˆ‡æ¢ï¼Œä¸ä¼šé™·å…¥åˆ°å†…æ ¸æ€ï¼Œè¿™ç§åˆ‡æ¢éå¸¸çš„è½»é‡å¿«é€Ÿ**ã€‚ä½†ä¹Ÿæœ‰å¾ˆå¤§çš„ç¼ºç‚¹ï¼Œ1 ä¸ªè¿›ç¨‹çš„æ‰€æœ‰åç¨‹éƒ½ç»‘å®šåœ¨ 1 ä¸ªçº¿ç¨‹ä¸Š

ç¼ºç‚¹ï¼š

*   æŸä¸ªç¨‹åºç”¨ä¸äº†ç¡¬ä»¶çš„å¤šæ ¸åŠ é€Ÿèƒ½åŠ›
*   ä¸€æ—¦æŸåç¨‹é˜»å¡ï¼Œé€ æˆçº¿ç¨‹é˜»å¡ï¼Œæœ¬è¿›ç¨‹çš„å…¶ä»–åç¨‹éƒ½æ— æ³•æ‰§è¡Œäº†ï¼Œæ ¹æœ¬å°±æ²¡æœ‰å¹¶å‘çš„èƒ½åŠ›äº†ã€‚

![](https://cdn.learnku.com/uploads/images/202003/12/58489/kfPbThcyRU.png!large)

> ## 1:1 å…³ç³»[#](#47d01a)

1 ä¸ªåç¨‹ç»‘å®š 1 ä¸ªçº¿ç¨‹ï¼Œè¿™ç§æœ€å®¹æ˜“å®ç°ã€‚åç¨‹çš„è°ƒåº¦éƒ½ç”± CPU å®Œæˆäº†ï¼Œä¸å­˜åœ¨ N:1 ç¼ºç‚¹ï¼Œ

ç¼ºç‚¹ï¼š

*   åç¨‹çš„åˆ›å»ºã€åˆ é™¤å’Œåˆ‡æ¢çš„ä»£ä»·éƒ½ç”± CPU å®Œæˆï¼Œæœ‰ç‚¹ç•¥æ˜¾æ˜‚è´µäº†ã€‚

![](https://cdn.learnku.com/uploads/images/202003/11/58489/EhNQY2VCpk.png!large)

> ## M:N å…³ç³»[#](#5fd9e1)

M ä¸ªåç¨‹ç»‘å®š 1 ä¸ªçº¿ç¨‹ï¼Œæ˜¯ N:1 å’Œ 1:1 ç±»å‹çš„ç»“åˆï¼Œå…‹æœäº†ä»¥ä¸Š 2 ç§æ¨¡å‹çš„ç¼ºç‚¹ï¼Œä½†å®ç°èµ·æ¥æœ€ä¸ºå¤æ‚ã€‚

![](https://cdn.learnku.com/uploads/images/202003/12/58489/ANDQLx3g9U.png!large)

 åç¨‹è·Ÿçº¿ç¨‹æ˜¯æœ‰åŒºåˆ«çš„ï¼Œçº¿ç¨‹ç”± CPU è°ƒåº¦æ˜¯æŠ¢å å¼çš„ï¼Œ**åç¨‹ç”±ç”¨æˆ·æ€è°ƒåº¦æ˜¯åä½œå¼çš„**ï¼Œä¸€ä¸ªåç¨‹è®©å‡º CPU åï¼Œæ‰æ‰§è¡Œä¸‹ä¸€ä¸ªåç¨‹ã€‚



### (4) Go è¯­è¨€çš„åç¨‹ goroutine[#](#65b43b)

**Go ä¸ºäº†æä¾›æ›´å®¹æ˜“ä½¿ç”¨çš„å¹¶å‘æ–¹æ³•ï¼Œä½¿ç”¨äº† goroutine å’Œ channel**ã€‚goroutine æ¥è‡ªåç¨‹çš„æ¦‚å¿µï¼Œè®©ä¸€ç»„å¯å¤ç”¨çš„å‡½æ•°è¿è¡Œåœ¨ä¸€ç»„çº¿ç¨‹ä¹‹ä¸Šï¼Œå³ä½¿æœ‰åç¨‹é˜»å¡ï¼Œè¯¥çº¿ç¨‹çš„å…¶ä»–åç¨‹ä¹Ÿå¯ä»¥è¢« `runtime` è°ƒåº¦ï¼Œè½¬ç§»åˆ°å…¶ä»–å¯è¿è¡Œçš„çº¿ç¨‹ä¸Šã€‚æœ€å…³é”®çš„æ˜¯ï¼Œç¨‹åºå‘˜çœ‹ä¸åˆ°è¿™äº›åº•å±‚çš„ç»†èŠ‚ï¼Œè¿™å°±é™ä½äº†ç¼–ç¨‹çš„éš¾åº¦ï¼Œæä¾›äº†æ›´å®¹æ˜“çš„å¹¶å‘ã€‚

Go ä¸­ï¼Œåç¨‹è¢«ç§°ä¸º goroutineï¼Œå®ƒéå¸¸è½»é‡ï¼Œä¸€ä¸ª goroutine åªå å‡  KBï¼Œå¹¶ä¸”è¿™å‡  KB å°±è¶³å¤Ÿ goroutine è¿è¡Œå®Œï¼Œè¿™å°±èƒ½åœ¨æœ‰é™çš„å†…å­˜ç©ºé—´å†…æ”¯æŒå¤§é‡ goroutineï¼Œæ”¯æŒäº†æ›´å¤šçš„å¹¶å‘ã€‚è™½ç„¶ä¸€ä¸ª goroutine çš„æ ˆåªå å‡  KBï¼Œä½†å®é™…æ˜¯å¯ä¼¸ç¼©çš„ï¼Œå¦‚æœéœ€è¦æ›´å¤šå†…å®¹ï¼Œ`runtime` ä¼šè‡ªåŠ¨ä¸º goroutine åˆ†é…ã€‚

Goroutine ç‰¹ç‚¹ï¼š

*   å ç”¨å†…å­˜æ›´å°ï¼ˆå‡  kbï¼‰
*   è°ƒåº¦æ›´çµæ´» (runtime è°ƒåº¦)

### (5) è¢«åºŸå¼ƒçš„ goroutine è°ƒåº¦å™¨[#](#7b24f7)

 å¥½äº†ï¼Œæ—¢ç„¶æˆ‘ä»¬çŸ¥é“äº†åç¨‹å’Œçº¿ç¨‹çš„å…³ç³»ï¼Œé‚£ä¹ˆæœ€å…³é”®çš„ä¸€ç‚¹å°±æ˜¯è°ƒåº¦åç¨‹çš„è°ƒåº¦å™¨çš„å®ç°äº†ã€‚

Go ç›®å‰ä½¿ç”¨çš„è°ƒåº¦å™¨æ˜¯ 2012 å¹´é‡æ–°è®¾è®¡çš„ï¼Œå› ä¸ºä¹‹å‰çš„è°ƒåº¦å™¨æ€§èƒ½å­˜åœ¨é—®é¢˜ï¼Œæ‰€ä»¥ä½¿ç”¨ 4 å¹´å°±è¢«åºŸå¼ƒäº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹è¢«åºŸå¼ƒçš„è°ƒåº¦å™¨æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Ÿ

> å¤§éƒ¨åˆ†æ–‡ç« éƒ½æ˜¯ä¼šç”¨ G æ¥è¡¨ç¤º Goroutineï¼Œç”¨ M æ¥è¡¨ç¤ºçº¿ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿä¼šç”¨è¿™ç§è¡¨è¾¾çš„å¯¹åº”å…³ç³»ã€‚

![](https://cdn.learnku.com/uploads/images/202003/11/58489/Af6GQ3GSlb.png!large)

ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹è¢«åºŸå¼ƒçš„ golang è°ƒåº¦å™¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ

![](https://cdn.learnku.com/uploads/images/202003/11/58489/uWk9pzdREk.png!large)

M æƒ³è¦æ‰§è¡Œã€æ”¾å› G éƒ½å¿…é¡»è®¿é—®å…¨å±€ G é˜Ÿåˆ—ï¼Œå¹¶ä¸” M æœ‰å¤šä¸ªï¼Œå³å¤šçº¿ç¨‹è®¿é—®åŒä¸€èµ„æºéœ€è¦åŠ é”è¿›è¡Œä¿è¯äº’æ–¥ / åŒæ­¥ï¼Œæ‰€ä»¥å…¨å±€ G é˜Ÿåˆ—æ˜¯æœ‰äº’æ–¥é”è¿›è¡Œä¿æŠ¤çš„ã€‚

è€è°ƒåº¦å™¨æœ‰å‡ ä¸ªç¼ºç‚¹ï¼š

1.  åˆ›å»ºã€é”€æ¯ã€è°ƒåº¦ G éƒ½éœ€è¦æ¯ä¸ª M è·å–é”ï¼Œè¿™å°±å½¢æˆäº†**æ¿€çƒˆçš„é”ç«äº‰**ã€‚
2.  M è½¬ç§» G ä¼šé€ æˆ**å»¶è¿Ÿå’Œé¢å¤–çš„ç³»ç»Ÿè´Ÿè½½**ã€‚æ¯”å¦‚å½“ G ä¸­åŒ…å«åˆ›å»ºæ–°åç¨‹çš„æ—¶å€™ï¼ŒM åˆ›å»ºäº† Gâ€™ï¼Œä¸ºäº†ç»§ç»­æ‰§è¡Œ Gï¼Œéœ€è¦æŠŠ Gâ€™äº¤ç»™ Mâ€™æ‰§è¡Œï¼Œä¹Ÿé€ æˆäº†**å¾ˆå·®çš„å±€éƒ¨æ€§**ï¼Œå› ä¸º Gâ€™å’Œ G æ˜¯ç›¸å…³çš„ï¼Œæœ€å¥½æ”¾åœ¨ M ä¸Šæ‰§è¡Œï¼Œè€Œä¸æ˜¯å…¶ä»– Mâ€™ã€‚
3.  ç³»ç»Ÿè°ƒç”¨ (CPU åœ¨ M ä¹‹é—´çš„åˆ‡æ¢) å¯¼è‡´é¢‘ç¹çš„çº¿ç¨‹é˜»å¡å’Œå–æ¶ˆé˜»å¡æ“ä½œå¢åŠ äº†ç³»ç»Ÿå¼€é”€ã€‚

## äºŒã€Goroutine è°ƒåº¦å™¨çš„ GMP æ¨¡å‹çš„è®¾è®¡æ€æƒ³[#](#0240a5)

é¢å¯¹ä¹‹å‰è°ƒåº¦å™¨çš„é—®é¢˜ï¼ŒGo è®¾è®¡äº†æ–°çš„è°ƒåº¦å™¨ã€‚

åœ¨æ–°è°ƒåº¦å™¨ä¸­ï¼Œé™¤äº† M (thread) å’Œ G (goroutine)ï¼Œåˆå¼•è¿›äº† P (Processor)ã€‚

![](https://cdn.learnku.com/uploads/images/202003/11/58489/zaZ4nQYcZe.png!large)

**Processorï¼Œå®ƒåŒ…å«äº†è¿è¡Œ goroutine çš„èµ„æº**ï¼Œå¦‚æœçº¿ç¨‹æƒ³è¿è¡Œ goroutineï¼Œå¿…é¡»å…ˆè·å– Pï¼ŒP ä¸­è¿˜åŒ…å«äº†å¯è¿è¡Œçš„ G é˜Ÿåˆ—ã€‚

### (1) GMP æ¨¡å‹[#](#0a5fa4)

åœ¨ Go ä¸­ï¼Œ**çº¿ç¨‹æ˜¯è¿è¡Œ goroutine çš„å®ä½“ï¼Œè°ƒåº¦å™¨çš„åŠŸèƒ½æ˜¯æŠŠå¯è¿è¡Œçš„ goroutine åˆ†é…åˆ°å·¥ä½œçº¿ç¨‹ä¸Š**ã€‚

![](https://cdn.learnku.com/uploads/images/202003/11/58489/Ugu3C2WSpM.jpeg!large)

1.  **å…¨å±€é˜Ÿåˆ—**ï¼ˆGlobal Queueï¼‰ï¼šå­˜æ”¾ç­‰å¾…è¿è¡Œçš„ Gã€‚
2.  **P çš„æœ¬åœ°é˜Ÿåˆ—**ï¼šåŒå…¨å±€é˜Ÿåˆ—ç±»ä¼¼ï¼Œå­˜æ”¾çš„ä¹Ÿæ˜¯ç­‰å¾…è¿è¡Œçš„ Gï¼Œå­˜çš„æ•°é‡æœ‰é™ï¼Œä¸è¶…è¿‡ 256 ä¸ªã€‚æ–°å»º Gâ€™æ—¶ï¼ŒGâ€™ä¼˜å…ˆåŠ å…¥åˆ° P çš„æœ¬åœ°é˜Ÿåˆ—ï¼Œå¦‚æœé˜Ÿåˆ—æ»¡äº†ï¼Œåˆ™ä¼šæŠŠæœ¬åœ°é˜Ÿåˆ—ä¸­ä¸€åŠçš„ G ç§»åŠ¨åˆ°å…¨å±€é˜Ÿåˆ—ã€‚
3.  **P åˆ—è¡¨**ï¼šæ‰€æœ‰çš„ P éƒ½åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºï¼Œå¹¶ä¿å­˜åœ¨æ•°ç»„ä¸­ï¼Œæœ€å¤šæœ‰ `GOMAXPROCS`(å¯é…ç½®) ä¸ªã€‚
4.  **M**ï¼šçº¿ç¨‹æƒ³è¿è¡Œä»»åŠ¡å°±å¾—è·å– Pï¼Œä» P çš„æœ¬åœ°é˜Ÿåˆ—è·å– Gï¼ŒP é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼ŒM ä¹Ÿä¼šå°è¯•ä»å…¨å±€é˜Ÿåˆ—**æ‹¿**ä¸€æ‰¹ G æ”¾åˆ° P çš„æœ¬åœ°é˜Ÿåˆ—ï¼Œæˆ–ä»å…¶ä»– P çš„æœ¬åœ°é˜Ÿåˆ—**å·**ä¸€åŠæ”¾åˆ°è‡ªå·± P çš„æœ¬åœ°é˜Ÿåˆ—ã€‚M è¿è¡Œ Gï¼ŒG æ‰§è¡Œä¹‹åï¼ŒM ä¼šä» P è·å–ä¸‹ä¸€ä¸ª Gï¼Œä¸æ–­é‡å¤ä¸‹å»ã€‚

**Goroutine è°ƒåº¦å™¨å’Œ OS è°ƒåº¦å™¨æ˜¯é€šè¿‡ M ç»“åˆèµ·æ¥çš„ï¼Œæ¯ä¸ª M éƒ½ä»£è¡¨äº† 1 ä¸ªå†…æ ¸çº¿ç¨‹ï¼ŒOS è°ƒåº¦å™¨è´Ÿè´£æŠŠå†…æ ¸çº¿ç¨‹åˆ†é…åˆ° CPU çš„æ ¸ä¸Šæ‰§è¡Œ**ã€‚

> ## æœ‰å…³ P å’Œ M çš„ä¸ªæ•°é—®é¢˜[#](#cee2c4)

1ã€P çš„æ•°é‡ï¼š

*   ç”±å¯åŠ¨æ—¶ç¯å¢ƒå˜é‡ `$GOMAXPROCS` æˆ–è€…æ˜¯ç”± `runtime` çš„æ–¹æ³• `GOMAXPROCS()` å†³å®šã€‚è¿™æ„å‘³ç€åœ¨ç¨‹åºæ‰§è¡Œçš„ä»»æ„æ—¶åˆ»éƒ½åªæœ‰ `$GOMAXPROCS` ä¸ª goroutine åœ¨åŒæ—¶è¿è¡Œã€‚

2ã€M çš„æ•°é‡:

*   go è¯­è¨€æœ¬èº«çš„é™åˆ¶ï¼šgo ç¨‹åºå¯åŠ¨æ—¶ï¼Œä¼šè®¾ç½® M çš„æœ€å¤§æ•°é‡ï¼Œé»˜è®¤ 10000. ä½†æ˜¯å†…æ ¸å¾ˆéš¾æ”¯æŒè¿™ä¹ˆå¤šçš„çº¿ç¨‹æ•°ï¼Œæ‰€ä»¥è¿™ä¸ªé™åˆ¶å¯ä»¥å¿½ç•¥ã€‚
*   runtime/debug ä¸­çš„ SetMaxThreads å‡½æ•°ï¼Œè®¾ç½® M çš„æœ€å¤§æ•°é‡
*   ä¸€ä¸ª M é˜»å¡äº†ï¼Œä¼šåˆ›å»ºæ–°çš„ Mã€‚

M ä¸ P çš„æ•°é‡æ²¡æœ‰ç»å¯¹å…³ç³»ï¼Œä¸€ä¸ª M é˜»å¡ï¼ŒP å°±ä¼šå»åˆ›å»ºæˆ–è€…åˆ‡æ¢å¦ä¸€ä¸ª Mï¼Œæ‰€ä»¥ï¼Œå³ä½¿ P çš„é»˜è®¤æ•°é‡æ˜¯ 1ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šåˆ›å»ºå¾ˆå¤šä¸ª M å‡ºæ¥ã€‚

> ## P å’Œ M ä½•æ—¶ä¼šè¢«åˆ›å»º[#](#257bcb)

1ã€P ä½•æ—¶åˆ›å»ºï¼šåœ¨ç¡®å®šäº† P çš„æœ€å¤§æ•°é‡ n åï¼Œè¿è¡Œæ—¶ç³»ç»Ÿä¼šæ ¹æ®è¿™ä¸ªæ•°é‡åˆ›å»º n ä¸ª Pã€‚

2ã€M ä½•æ—¶åˆ›å»ºï¼šæ²¡æœ‰è¶³å¤Ÿçš„ M æ¥å…³è” P å¹¶è¿è¡Œå…¶ä¸­çš„å¯è¿è¡Œçš„ Gã€‚æ¯”å¦‚æ‰€æœ‰çš„ M æ­¤æ—¶éƒ½é˜»å¡ä½äº†ï¼Œè€Œ P ä¸­è¿˜æœ‰å¾ˆå¤šå°±ç»ªä»»åŠ¡ï¼Œå°±ä¼šå»å¯»æ‰¾ç©ºé—²çš„ Mï¼Œè€Œæ²¡æœ‰ç©ºé—²çš„ï¼Œå°±ä¼šå»åˆ›å»ºæ–°çš„ Mã€‚

### (2) è°ƒåº¦å™¨çš„è®¾è®¡ç­–ç•¥[#](#4852af)

**å¤ç”¨çº¿ç¨‹**ï¼šé¿å…é¢‘ç¹çš„åˆ›å»ºã€é”€æ¯çº¿ç¨‹ï¼Œè€Œæ˜¯å¯¹çº¿ç¨‹çš„å¤ç”¨ã€‚

1ï¼‰work stealing æœºåˆ¶

 å½“æœ¬çº¿ç¨‹æ— å¯è¿è¡Œçš„ G æ—¶ï¼Œå°è¯•ä»å…¶ä»–çº¿ç¨‹ç»‘å®šçš„ P å·å– Gï¼Œè€Œä¸æ˜¯é”€æ¯çº¿ç¨‹ã€‚

2ï¼‰hand off æœºåˆ¶

 å½“æœ¬çº¿ç¨‹å› ä¸º G è¿›è¡Œç³»ç»Ÿè°ƒç”¨é˜»å¡æ—¶ï¼Œçº¿ç¨‹é‡Šæ”¾ç»‘å®šçš„ Pï¼ŒæŠŠ P è½¬ç§»ç»™å…¶ä»–ç©ºé—²çš„çº¿ç¨‹æ‰§è¡Œã€‚

**åˆ©ç”¨å¹¶è¡Œ**ï¼š`GOMAXPROCS` è®¾ç½® P çš„æ•°é‡ï¼Œæœ€å¤šæœ‰ `GOMAXPROCS` ä¸ªçº¿ç¨‹åˆ†å¸ƒåœ¨å¤šä¸ª CPU ä¸ŠåŒæ—¶è¿è¡Œã€‚`GOMAXPROCS` ä¹Ÿé™åˆ¶äº†å¹¶å‘çš„ç¨‹åº¦ï¼Œæ¯”å¦‚ `GOMAXPROCS = æ ¸æ•°/2`ï¼Œåˆ™æœ€å¤šåˆ©ç”¨äº†ä¸€åŠçš„ CPU æ ¸è¿›è¡Œå¹¶è¡Œã€‚

**æŠ¢å **ï¼šåœ¨ coroutine ä¸­è¦ç­‰å¾…ä¸€ä¸ªåç¨‹ä¸»åŠ¨è®©å‡º CPU æ‰æ‰§è¡Œä¸‹ä¸€ä¸ªåç¨‹ï¼Œåœ¨ Go ä¸­ï¼Œä¸€ä¸ª goroutine æœ€å¤šå ç”¨ CPU 10msï¼Œé˜²æ­¢å…¶ä»– goroutine è¢«é¥¿æ­»ï¼Œè¿™å°±æ˜¯ goroutine ä¸åŒäº coroutine çš„ä¸€ä¸ªåœ°æ–¹ã€‚

**å…¨å±€ G é˜Ÿåˆ—**ï¼šåœ¨æ–°çš„è°ƒåº¦å™¨ä¸­ä¾ç„¶æœ‰å…¨å±€ G é˜Ÿåˆ—ï¼Œä½†åŠŸèƒ½å·²ç»è¢«å¼±åŒ–äº†ï¼Œå½“ M æ‰§è¡Œ work stealing ä»å…¶ä»– P å·ä¸åˆ° G æ—¶ï¼Œå®ƒå¯ä»¥ä»å…¨å±€ G é˜Ÿåˆ—è·å– Gã€‚

### (3) go func () è°ƒåº¦æµç¨‹[#](#cd748d)

![asd](https://cdn.learnku.com/uploads/images/202003/11/58489/a4vWtvRWGQ.jpeg!large)

ä»ä¸Šå›¾æˆ‘ä»¬å¯ä»¥åˆ†æå‡ºå‡ ä¸ªç»“è®ºï¼š

 1ã€æˆ‘ä»¬é€šè¿‡ go func () æ¥åˆ›å»ºä¸€ä¸ª goroutineï¼›

 2ã€æœ‰ä¸¤ä¸ªå­˜å‚¨ G çš„é˜Ÿåˆ—ï¼Œä¸€ä¸ªæ˜¯å±€éƒ¨è°ƒåº¦å™¨ P çš„æœ¬åœ°é˜Ÿåˆ—ã€ä¸€ä¸ªæ˜¯å…¨å±€ G é˜Ÿåˆ—ã€‚æ–°åˆ›å»ºçš„ G ä¼šå…ˆä¿å­˜åœ¨ P çš„æœ¬åœ°é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœ P çš„æœ¬åœ°é˜Ÿåˆ—å·²ç»æ»¡äº†å°±ä¼šä¿å­˜åœ¨å…¨å±€çš„é˜Ÿåˆ—ä¸­ï¼›

 3ã€G åªèƒ½è¿è¡Œåœ¨ M ä¸­ï¼Œä¸€ä¸ª M å¿…é¡»æŒæœ‰ä¸€ä¸ª Pï¼ŒM ä¸ P æ˜¯ 1ï¼š1 çš„å…³ç³»ã€‚M ä¼šä» P çš„æœ¬åœ°é˜Ÿåˆ—å¼¹å‡ºä¸€ä¸ªå¯æ‰§è¡ŒçŠ¶æ€çš„ G æ¥æ‰§è¡Œï¼Œå¦‚æœ P çš„æœ¬åœ°é˜Ÿåˆ—ä¸ºç©ºï¼Œå°±ä¼šå‘å…¶ä»–çš„ MP ç»„åˆå·å–ä¸€ä¸ªå¯æ‰§è¡Œçš„ G æ¥æ‰§è¡Œï¼›

 4ã€ä¸€ä¸ª M è°ƒåº¦ G æ‰§è¡Œçš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªå¾ªç¯æœºåˆ¶ï¼›

 5ã€å½“ M æ‰§è¡ŒæŸä¸€ä¸ª G æ—¶å€™å¦‚æœå‘ç”Ÿäº† syscall æˆ–åˆ™å…¶ä½™é˜»å¡æ“ä½œï¼ŒM ä¼šé˜»å¡ï¼Œå¦‚æœå½“å‰æœ‰ä¸€äº› G åœ¨æ‰§è¡Œï¼Œruntime ä¼šæŠŠè¿™ä¸ªçº¿ç¨‹ M ä» P ä¸­æ‘˜é™¤ (detach)ï¼Œç„¶åå†åˆ›å»ºä¸€ä¸ªæ–°çš„æ“ä½œç³»ç»Ÿçš„çº¿ç¨‹ (å¦‚æœæœ‰ç©ºé—²çš„çº¿ç¨‹å¯ç”¨å°±å¤ç”¨ç©ºé—²çº¿ç¨‹) æ¥æœåŠ¡äºè¿™ä¸ª Pï¼›

 6ã€å½“ M ç³»ç»Ÿè°ƒç”¨ç»“æŸæ—¶å€™ï¼Œè¿™ä¸ª G ä¼šå°è¯•è·å–ä¸€ä¸ªç©ºé—²çš„ P æ‰§è¡Œï¼Œå¹¶æ”¾å…¥åˆ°è¿™ä¸ª P çš„æœ¬åœ°é˜Ÿåˆ—ã€‚å¦‚æœè·å–ä¸åˆ° Pï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹ M å˜æˆä¼‘çœ çŠ¶æ€ï¼Œ åŠ å…¥åˆ°ç©ºé—²çº¿ç¨‹ä¸­ï¼Œç„¶åè¿™ä¸ª G ä¼šè¢«æ”¾å…¥å…¨å±€é˜Ÿåˆ—ä¸­ã€‚

### (4) è°ƒåº¦å™¨çš„ç”Ÿå‘½å‘¨æœŸ[#](#17f58b)

![](https://cdn.learnku.com/uploads/images/202003/11/58489/j37FX8nek9.png!large)

ç‰¹æ®Šçš„ M0 å’Œ G0

**M0**

`M0` æ˜¯å¯åŠ¨ç¨‹åºåçš„ç¼–å·ä¸º 0 çš„ä¸»çº¿ç¨‹ï¼Œè¿™ä¸ª M å¯¹åº”çš„å®ä¾‹ä¼šåœ¨å…¨å±€å˜é‡ runtime.m0 ä¸­ï¼Œä¸éœ€è¦åœ¨ heap ä¸Šåˆ†é…ï¼ŒM0 è´Ÿè´£æ‰§è¡Œåˆå§‹åŒ–æ“ä½œå’Œå¯åŠ¨ç¬¬ä¸€ä¸ª Gï¼Œ åœ¨ä¹‹å M0 å°±å’Œå…¶ä»–çš„ M ä¸€æ ·äº†ã€‚

**G0**

`G0` æ˜¯æ¯æ¬¡å¯åŠ¨ä¸€ä¸ª M éƒ½ä¼šç¬¬ä¸€ä¸ªåˆ›å»ºçš„ goroutineï¼ŒG0 ä»…ç”¨äºè´Ÿè´£è°ƒåº¦çš„ Gï¼ŒG0 ä¸æŒ‡å‘ä»»ä½•å¯æ‰§è¡Œçš„å‡½æ•°ï¼Œæ¯ä¸ª M éƒ½ä¼šæœ‰ä¸€ä¸ªè‡ªå·±çš„ G0ã€‚åœ¨è°ƒåº¦æˆ–ç³»ç»Ÿè°ƒç”¨æ—¶ä¼šä½¿ç”¨ G0 çš„æ ˆç©ºé—´ï¼Œå…¨å±€å˜é‡çš„ G0 æ˜¯ M0 çš„ G0ã€‚

æˆ‘ä»¬æ¥è·Ÿè¸ªä¸€æ®µä»£ç 

```
package main

import "fmt"

func main() {
    fmt.Println("Hello world")
}

```

æ¥ä¸‹æ¥æˆ‘ä»¬æ¥é’ˆå¯¹ä¸Šé¢çš„ä»£ç å¯¹è°ƒåº¦å™¨é‡Œé¢çš„ç»“æ„åšä¸€ä¸ªåˆ†æã€‚

ä¹Ÿä¼šç»å†å¦‚ä¸Šå›¾æ‰€ç¤ºçš„è¿‡ç¨‹ï¼š

1.  runtime åˆ›å»ºæœ€åˆçš„çº¿ç¨‹ m0 å’Œ goroutine g0ï¼Œå¹¶æŠŠ 2 è€…å…³è”ã€‚
2.  è°ƒåº¦å™¨åˆå§‹åŒ–ï¼šåˆå§‹åŒ– m0ã€æ ˆã€åƒåœ¾å›æ”¶ï¼Œä»¥åŠåˆ›å»ºå’Œåˆå§‹åŒ–ç”± GOMAXPROCS ä¸ª P æ„æˆçš„ P åˆ—è¡¨ã€‚
3.  ç¤ºä¾‹ä»£ç ä¸­çš„ main å‡½æ•°æ˜¯ `main.main`ï¼Œ`runtime` ä¸­ä¹Ÿæœ‰ 1 ä¸ª main å‡½æ•° â€”â€”`runtime.main`ï¼Œä»£ç ç»è¿‡ç¼–è¯‘åï¼Œ`runtime.main` ä¼šè°ƒç”¨ `main.main`ï¼Œç¨‹åºå¯åŠ¨æ—¶ä¼šä¸º `runtime.main` åˆ›å»º goroutineï¼Œç§°å®ƒä¸º main goroutine å§ï¼Œç„¶åæŠŠ main goroutine åŠ å…¥åˆ° P çš„æœ¬åœ°é˜Ÿåˆ—ã€‚
4.  å¯åŠ¨ m0ï¼Œm0 å·²ç»ç»‘å®šäº† Pï¼Œä¼šä» P çš„æœ¬åœ°é˜Ÿåˆ—è·å– Gï¼Œè·å–åˆ° main goroutineã€‚
5.  G æ‹¥æœ‰æ ˆï¼ŒM æ ¹æ® G ä¸­çš„æ ˆä¿¡æ¯å’Œè°ƒåº¦ä¿¡æ¯è®¾ç½®è¿è¡Œç¯å¢ƒ
6.  M è¿è¡Œ G
7.  G é€€å‡ºï¼Œå†æ¬¡å›åˆ° M è·å–å¯è¿è¡Œçš„ Gï¼Œè¿™æ ·é‡å¤ä¸‹å»ï¼Œç›´åˆ° `main.main` é€€å‡ºï¼Œ`runtime.main` æ‰§è¡Œ Defer å’Œ Panic å¤„ç†ï¼Œæˆ–è°ƒç”¨ `runtime.exit` é€€å‡ºç¨‹åºã€‚

è°ƒåº¦å™¨çš„ç”Ÿå‘½å‘¨æœŸå‡ ä¹å æ»¡äº†ä¸€ä¸ª Go ç¨‹åºçš„ä¸€ç”Ÿï¼Œ`runtime.main` çš„ goroutine æ‰§è¡Œä¹‹å‰éƒ½æ˜¯ä¸ºè°ƒåº¦å™¨åšå‡†å¤‡å·¥ä½œï¼Œ`runtime.main` çš„ goroutine è¿è¡Œï¼Œæ‰æ˜¯è°ƒåº¦å™¨çš„çœŸæ­£å¼€å§‹ï¼Œç›´åˆ° `runtime.main` ç»“æŸè€Œç»“æŸã€‚

### (5) å¯è§†åŒ– GMP ç¼–ç¨‹[#](#aa8835)

æœ‰ 2 ç§æ–¹å¼å¯ä»¥æŸ¥çœ‹ä¸€ä¸ªç¨‹åºçš„ GMP çš„æ•°æ®ã€‚

**æ–¹å¼ 1ï¼šgo tool trace**

trace è®°å½•äº†è¿è¡Œæ—¶çš„ä¿¡æ¯ï¼Œèƒ½æä¾›å¯è§†åŒ–çš„ Web é¡µé¢ã€‚

ç®€å•æµ‹è¯•ä»£ç ï¼šmain å‡½æ•°åˆ›å»º traceï¼Œtrace ä¼šè¿è¡Œåœ¨å•ç‹¬çš„ goroutine ä¸­ï¼Œç„¶å main æ‰“å°â€Hello Worldâ€ é€€å‡ºã€‚

> trace.go

```
package main

import (
    "os"
    "fmt"
    "runtime/trace"
)

func main() {

    //åˆ›å»ºtraceæ–‡ä»¶
    f, err := os.Create("trace.out")
    if err != nil {
        panic(err)
    }

    defer f.Close()

    //å¯åŠ¨trace goroutine
    err = trace.Start(f)
    if err != nil {
        panic(err)
    }
    defer trace.Stop()

    //main
    fmt.Println("Hello World")
}


```

è¿è¡Œç¨‹åº

```
$ go run trace.go 
Hello World

```

ä¼šå¾—åˆ°ä¸€ä¸ª `trace.out` æ–‡ä»¶ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå·¥å…·æ‰“å¼€ï¼Œæ¥åˆ†æè¿™ä¸ªæ–‡ä»¶ã€‚

```
$ go tool trace trace.out 
2020/02/23 10:44:11 Parsing trace...
2020/02/23 10:44:11 Splitting trace...
2020/02/23 10:44:11 Opening browser. Trace viewer is listening on http://127.0.0.1:33479


```

æˆ‘ä»¬å¯ä»¥é€šè¿‡æµè§ˆå™¨æ‰“å¼€ `http://127.0.0.1:33479` ç½‘å€ï¼Œç‚¹å‡» `view trace` èƒ½å¤Ÿçœ‹è§å¯è§†åŒ–çš„è°ƒåº¦æµç¨‹ã€‚

![](https://cdn.learnku.com/uploads/images/202003/11/58489/Xr9qi3emlx.png!large)

![](https://cdn.learnku.com/uploads/images/202003/11/58489/vYyO9YJmam.png!large)

**G ä¿¡æ¯**

ç‚¹å‡» Goroutines é‚£ä¸€è¡Œå¯è§†åŒ–çš„æ•°æ®æ¡ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€äº›è¯¦ç»†çš„ä¿¡æ¯ã€‚

![](https://cdn.learnku.com/uploads/images/202003/11/58489/QLm0KK1hhd.png!large)

```
  ä¸€å…±æœ‰ä¸¤ä¸ªGåœ¨ç¨‹åºä¸­ï¼Œä¸€ä¸ªæ˜¯ç‰¹æ®Šçš„G0ï¼Œæ˜¯æ¯ä¸ªMå¿…é¡»æœ‰çš„ä¸€ä¸ªåˆå§‹åŒ–çš„Gï¼Œè¿™ä¸ªæˆ‘ä»¬ä¸å¿…è®¨è®ºã€‚

```

å…¶ä¸­ G1 åº”è¯¥å°±æ˜¯ main goroutine (æ‰§è¡Œ main å‡½æ•°çš„åç¨‹)ï¼Œåœ¨ä¸€æ®µæ—¶é—´å†…å¤„äºå¯è¿è¡Œå’Œè¿è¡Œçš„çŠ¶æ€ã€‚

**M ä¿¡æ¯**

ç‚¹å‡» Threads é‚£ä¸€è¡Œå¯è§†åŒ–çš„æ•°æ®æ¡ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€äº›è¯¦ç»†çš„ä¿¡æ¯ã€‚

![](https://cdn.learnku.com/uploads/images/202003/11/58489/mYYA4V17yF.png!large)

ä¸€å…±æœ‰ä¸¤ä¸ª M åœ¨ç¨‹åºä¸­ï¼Œä¸€ä¸ªæ˜¯ç‰¹æ®Šçš„ M0ï¼Œç”¨äºåˆå§‹åŒ–ä½¿ç”¨ï¼Œè¿™ä¸ªæˆ‘ä»¬ä¸å¿…è®¨è®ºã€‚

**P ä¿¡æ¯**  
![](https://cdn.learnku.com/uploads/images/202003/11/58489/QbWwbth8uN.png!large)

G1 ä¸­è°ƒç”¨äº† `main.main`ï¼Œåˆ›å»ºäº† `trace goroutine g18`ã€‚G1 è¿è¡Œåœ¨ P1 ä¸Šï¼ŒG18 è¿è¡Œåœ¨ P0 ä¸Šã€‚

è¿™é‡Œæœ‰ä¸¤ä¸ª Pï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ª P å¿…é¡»ç»‘å®šä¸€ä¸ª M æ‰èƒ½è°ƒåº¦ Gã€‚

æˆ‘ä»¬åœ¨æ¥çœ‹çœ‹ä¸Šé¢çš„ M ä¿¡æ¯ã€‚

![](https://cdn.learnku.com/uploads/images/202003/11/58489/5kS6NfpQAI.png!large)

æˆ‘ä»¬ä¼šå‘ç°ï¼Œç¡®å® G18 åœ¨ P0 ä¸Šè¢«è¿è¡Œçš„æ—¶å€™ï¼Œç¡®å®åœ¨ Threads è¡Œå¤šäº†ä¸€ä¸ª M çš„æ•°æ®ï¼Œç‚¹å‡»æŸ¥çœ‹å¦‚ä¸‹ï¼š

![](https://cdn.learnku.com/uploads/images/202003/11/58489/EN1OESafVZ.png!large)

å¤šäº†ä¸€ä¸ª M2 åº”è¯¥å°±æ˜¯ P0 ä¸ºäº†æ‰§è¡Œ G18 è€ŒåŠ¨æ€åˆ›å»ºçš„ M2.

**æ–¹å¼ 2ï¼šDebug trace**

```
package main

import (
    "fmt"
    "time"
)

func main() {
    for i := 0; i < 5; i++ {
        time.Sleep(time.Second)
        fmt.Println("Hello World")
    }
}

```

ç¼–è¯‘

é€šè¿‡ Debug æ–¹å¼è¿è¡Œ

```
$ GODEBUG=schedtrace=1000 ./trace2 
SCHED 0ms: gomaxprocs=2 idleprocs=0 threads=4 spinningthreads=1 idlethreads=1 runqueue=0 [0 0]
Hello World
SCHED 1003ms: gomaxprocs=2 idleprocs=2 threads=4 spinningthreads=0 idlethreads=2 runqueue=0 [0 0]
Hello World
SCHED 2014ms: gomaxprocs=2 idleprocs=2 threads=4 spinningthreads=0 idlethreads=2 runqueue=0 [0 0]
Hello World
SCHED 3015ms: gomaxprocs=2 idleprocs=2 threads=4 spinningthreads=0 idlethreads=2 runqueue=0 [0 0]
Hello World
SCHED 4023ms: gomaxprocs=2 idleprocs=2 threads=4 spinningthreads=0 idlethreads=2 runqueue=0 [0 0]
Hello World


```

*   `SCHED`ï¼šè°ƒè¯•ä¿¡æ¯è¾“å‡ºæ ‡å¿—å­—ç¬¦ä¸²ï¼Œä»£è¡¨æœ¬è¡Œæ˜¯ goroutine è°ƒåº¦å™¨çš„è¾“å‡ºï¼›
*   `0ms`ï¼šå³ä»ç¨‹åºå¯åŠ¨åˆ°è¾“å‡ºè¿™è¡Œæ—¥å¿—çš„æ—¶é—´ï¼›
*   `gomaxprocs`: P çš„æ•°é‡ï¼Œæœ¬ä¾‹æœ‰ 2 ä¸ª P, å› ä¸ºé»˜è®¤çš„ P çš„å±æ€§æ˜¯å’Œ cpu æ ¸å¿ƒæ•°é‡é»˜è®¤ä¸€è‡´ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ GOMAXPROCS æ¥è®¾ç½®ï¼›
*   `idleprocs`: å¤„äº idle çŠ¶æ€çš„ P çš„æ•°é‡ï¼›é€šè¿‡ gomaxprocs å’Œ idleprocs çš„å·®å€¼ï¼Œæˆ‘ä»¬å°±å¯çŸ¥é“æ‰§è¡Œ go ä»£ç çš„ P çš„æ•°é‡ï¼›
*   t`hreads: os threads/M` çš„æ•°é‡ï¼ŒåŒ…å« scheduler ä½¿ç”¨çš„ m æ•°é‡ï¼ŒåŠ ä¸Š runtime è‡ªç”¨çš„ç±»ä¼¼ sysmon è¿™æ ·çš„ thread çš„æ•°é‡ï¼›
*   `spinningthreads`: å¤„äºè‡ªæ—‹çŠ¶æ€çš„ os thread æ•°é‡ï¼›
*   `idlethread`: å¤„äº idle çŠ¶æ€çš„ os thread çš„æ•°é‡ï¼›
*   `runqueue=0`ï¼š Scheduler å…¨å±€é˜Ÿåˆ—ä¸­ G çš„æ•°é‡ï¼›
*   `[0 0]`: åˆ†åˆ«ä¸º 2 ä¸ª P çš„ local queue ä¸­çš„ G çš„æ•°é‡ã€‚

ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬æ¥ç»§ç»­è¯¦ç»†çš„åˆ†æ GMP è°ƒåº¦åŸç†çš„ä¸€äº›åœºæ™¯é—®é¢˜ã€‚

## ä¸‰ã€Go è°ƒåº¦å™¨è°ƒåº¦åœºæ™¯è¿‡ç¨‹å…¨è§£æ[#](#8c0526)

### (1) åœºæ™¯ 1[#](#449d66)

P æ‹¥æœ‰ G1ï¼ŒM1 è·å– P åå¼€å§‹è¿è¡Œ G1ï¼ŒG1 ä½¿ç”¨ `go func()` åˆ›å»ºäº† G2ï¼Œä¸ºäº†å±€éƒ¨æ€§ G2 ä¼˜å…ˆåŠ å…¥åˆ° P1 çš„æœ¬åœ°é˜Ÿåˆ—ã€‚  
![](https://cdn.learnku.com/uploads/images/202003/11/58489/Pm8LOYcsWQ.png!large)

### (2) åœºæ™¯ 2[#](#7c811f)

G1 è¿è¡Œå®Œæˆå (å‡½æ•°ï¼š`goexit`)ï¼ŒM ä¸Šè¿è¡Œçš„ goroutine åˆ‡æ¢ä¸º G0ï¼ŒG0 è´Ÿè´£è°ƒåº¦æ—¶åç¨‹çš„åˆ‡æ¢ï¼ˆå‡½æ•°ï¼š`schedule`ï¼‰ã€‚ä» P çš„æœ¬åœ°é˜Ÿåˆ—å– G2ï¼Œä» G0 åˆ‡æ¢åˆ° G2ï¼Œå¹¶å¼€å§‹è¿è¡Œ G2 (å‡½æ•°ï¼š`execute`)ã€‚å®ç°äº†çº¿ç¨‹ M1 çš„å¤ç”¨ã€‚

![](https://cdn.learnku.com/uploads/images/202003/12/58489/JWDtmKG3rK.png!large)

### (3) åœºæ™¯ 3[#](#f1738e)

å‡è®¾æ¯ä¸ª P çš„æœ¬åœ°é˜Ÿåˆ—åªèƒ½å­˜ 3 ä¸ª Gã€‚G2 è¦åˆ›å»ºäº† 6 ä¸ª Gï¼Œå‰ 3 ä¸ª Gï¼ˆG3, G4, G5ï¼‰å·²ç»åŠ å…¥ p1 çš„æœ¬åœ°é˜Ÿåˆ—ï¼Œp1 æœ¬åœ°é˜Ÿåˆ—æ»¡äº†ã€‚

![](https://cdn.learnku.com/uploads/images/202003/12/58489/UpjRxzIBd3.png!large)

### (4) åœºæ™¯ 4[#](#c171ee)

G2 åœ¨åˆ›å»º G7 çš„æ—¶å€™ï¼Œå‘ç° P1 çš„æœ¬åœ°é˜Ÿåˆ—å·²æ»¡ï¼Œéœ€è¦æ‰§è¡Œ**è´Ÿè½½å‡è¡¡** (æŠŠ P1 ä¸­æœ¬åœ°é˜Ÿåˆ—ä¸­å‰ä¸€åŠçš„ Gï¼Œè¿˜æœ‰æ–°åˆ›å»º G **è½¬ç§»**åˆ°å…¨å±€é˜Ÿåˆ—)

> ï¼ˆå®ç°ä¸­å¹¶ä¸ä¸€å®šæ˜¯æ–°çš„ Gï¼Œå¦‚æœ G æ˜¯ G2 ä¹‹åå°±æ‰§è¡Œçš„ï¼Œä¼šè¢«ä¿å­˜åœ¨æœ¬åœ°é˜Ÿåˆ—ï¼Œåˆ©ç”¨æŸä¸ªè€çš„ G æ›¿æ¢æ–° G åŠ å…¥å…¨å±€é˜Ÿåˆ—ï¼‰

![](https://cdn.learnku.com/uploads/images/202003/11/58489/chqTgsiuWi.png!large)

è¿™äº› G è¢«è½¬ç§»åˆ°å…¨å±€é˜Ÿåˆ—æ—¶ï¼Œä¼šè¢«æ‰“ä¹±é¡ºåºã€‚æ‰€ä»¥ G3,G4,G7 è¢«è½¬ç§»åˆ°å…¨å±€é˜Ÿåˆ—ã€‚

### (5) åœºæ™¯ 5[#](#c9eb2b)

G2 åˆ›å»º G8 æ—¶ï¼ŒP1 çš„æœ¬åœ°é˜Ÿåˆ—æœªæ»¡ï¼Œæ‰€ä»¥ G8 ä¼šè¢«åŠ å…¥åˆ° P1 çš„æœ¬åœ°é˜Ÿåˆ—ã€‚

![](https://cdn.learnku.com/uploads/images/202003/12/58489/nukEY92G6D.png!large)

G8 åŠ å…¥åˆ° P1 ç‚¹æœ¬åœ°é˜Ÿåˆ—çš„åŸå› è¿˜æ˜¯å› ä¸º P1 æ­¤æ—¶åœ¨ä¸ M1 ç»‘å®šï¼Œè€Œ G2 æ­¤æ—¶æ˜¯ M1 åœ¨æ‰§è¡Œã€‚æ‰€ä»¥ G2 åˆ›å»ºçš„æ–°çš„ G ä¼šä¼˜å…ˆæ”¾ç½®åˆ°è‡ªå·±çš„ M ç»‘å®šçš„ P ä¸Šã€‚

### (6) åœºæ™¯ 6[#](#584b9e)

è§„å®šï¼š**åœ¨åˆ›å»º G æ—¶ï¼Œè¿è¡Œçš„ G ä¼šå°è¯•å”¤é†’å…¶ä»–ç©ºé—²çš„ P å’Œ M ç»„åˆå»æ‰§è¡Œ**ã€‚

![](https://cdn.learnku.com/uploads/images/202003/11/58489/2FWNXSuHfX.png!large)

å‡å®š G2 å”¤é†’äº† M2ï¼ŒM2 ç»‘å®šäº† P2ï¼Œå¹¶è¿è¡Œ G0ï¼Œä½† P2 æœ¬åœ°é˜Ÿåˆ—æ²¡æœ‰ Gï¼ŒM2 æ­¤æ—¶ä¸ºè‡ªæ—‹çº¿ç¨‹**ï¼ˆæ²¡æœ‰ G ä½†ä¸ºè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹ï¼Œä¸æ–­å¯»æ‰¾ Gï¼‰**ã€‚

### (7) åœºæ™¯ 7[#](#54beb7)

M2 å°è¯•ä»å…¨å±€é˜Ÿåˆ— (ç®€ç§° â€œGQâ€) å–ä¸€æ‰¹ G æ”¾åˆ° P2 çš„æœ¬åœ°é˜Ÿåˆ—ï¼ˆå‡½æ•°ï¼š`findrunnable()`ï¼‰ã€‚M2 ä»å…¨å±€é˜Ÿåˆ—å–çš„ G æ•°é‡ç¬¦åˆä¸‹é¢çš„å…¬å¼ï¼š

```
n = min(len(GQ)/GOMAXPROCS + 1, len(GQ/2))

```

è‡³å°‘ä»å…¨å±€é˜Ÿåˆ—å– 1 ä¸ª gï¼Œä½†æ¯æ¬¡ä¸è¦ä»å…¨å±€é˜Ÿåˆ—ç§»åŠ¨å¤ªå¤šçš„ g åˆ° p æœ¬åœ°é˜Ÿåˆ—ï¼Œç»™å…¶ä»– p ç•™ç‚¹ã€‚è¿™æ˜¯**ä»å…¨å±€é˜Ÿåˆ—åˆ° P æœ¬åœ°é˜Ÿåˆ—çš„è´Ÿè½½å‡è¡¡**ã€‚

![](https://cdn.learnku.com/uploads/images/202003/12/58489/0fn8DGqI8N.jpeg!large)

å‡å®šæˆ‘ä»¬åœºæ™¯ä¸­ä¸€å…±æœ‰ 4 ä¸ª Pï¼ˆGOMAXPROCS è®¾ç½®ä¸º 4ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…è®¸æœ€å¤šå°±èƒ½ç”¨ 4 ä¸ª P æ¥ä¾› M ä½¿ç”¨ï¼‰ã€‚æ‰€ä»¥ M2 åªä»èƒ½ä»å…¨å±€é˜Ÿåˆ—å– 1 ä¸ª Gï¼ˆå³ G3ï¼‰ç§»åŠ¨ P2 æœ¬åœ°é˜Ÿåˆ—ï¼Œç„¶åå®Œæˆä» G0 åˆ° G3 çš„åˆ‡æ¢ï¼Œè¿è¡Œ G3ã€‚

### (8) åœºæ™¯ 8[#](#6bde1f)

å‡è®¾ G2 ä¸€ç›´åœ¨ M1 ä¸Šè¿è¡Œï¼Œç»è¿‡ 2 è½®åï¼ŒM2 å·²ç»æŠŠ G7ã€G4 ä»å…¨å±€é˜Ÿåˆ—è·å–åˆ°äº† P2 çš„æœ¬åœ°é˜Ÿåˆ—å¹¶å®Œæˆè¿è¡Œï¼Œå…¨å±€é˜Ÿåˆ—å’Œ P2 çš„æœ¬åœ°é˜Ÿåˆ—éƒ½ç©ºäº†ï¼Œå¦‚åœºæ™¯ 8 å›¾çš„å·¦åŠéƒ¨åˆ†ã€‚

![](https://cdn.learnku.com/uploads/images/202003/12/58489/qn1NRMLqnp.png!large)

**å…¨å±€é˜Ÿåˆ—å·²ç»æ²¡æœ‰ Gï¼Œé‚£ m å°±è¦æ‰§è¡Œ work stealing (å·å–)ï¼šä»å…¶ä»–æœ‰ G çš„ P å“ªé‡Œå·å–ä¸€åŠ G è¿‡æ¥ï¼Œæ”¾åˆ°è‡ªå·±çš„ P æœ¬åœ°é˜Ÿåˆ—**ã€‚P2 ä» P1 çš„æœ¬åœ°é˜Ÿåˆ—å°¾éƒ¨å–ä¸€åŠçš„ Gï¼Œæœ¬ä¾‹ä¸­ä¸€åŠåˆ™åªæœ‰ 1 ä¸ª G8ï¼Œæ”¾åˆ° P2 çš„æœ¬åœ°é˜Ÿåˆ—å¹¶æ‰§è¡Œã€‚

### (9) åœºæ™¯ 9[#](#ac8b1d)

G1 æœ¬åœ°é˜Ÿåˆ— G5ã€G6 å·²ç»è¢«å…¶ä»– M å·èµ°å¹¶è¿è¡Œå®Œæˆï¼Œå½“å‰ M1 å’Œ M2 åˆ†åˆ«åœ¨è¿è¡Œ G2 å’Œ G8ï¼ŒM3 å’Œ M4 æ²¡æœ‰ goroutine å¯ä»¥è¿è¡Œï¼ŒM3 å’Œ M4 å¤„äº**è‡ªæ—‹çŠ¶æ€**ï¼Œå®ƒä»¬ä¸æ–­å¯»æ‰¾ goroutineã€‚

![](https://cdn.learnku.com/uploads/images/202003/12/58489/1DjlseEGTT.png!large)

ä¸ºä»€ä¹ˆè¦è®© m3 å’Œ m4 è‡ªæ—‹ï¼Œè‡ªæ—‹æœ¬è´¨æ˜¯åœ¨è¿è¡Œï¼Œçº¿ç¨‹åœ¨è¿è¡Œå´æ²¡æœ‰æ‰§è¡Œ Gï¼Œå°±å˜æˆäº†æµªè´¹ CPU. ä¸ºä»€ä¹ˆä¸é”€æ¯ç°åœºï¼Œæ¥èŠ‚çº¦ CPU èµ„æºã€‚å› ä¸ºåˆ›å»ºå’Œé”€æ¯ CPU ä¹Ÿä¼šæµªè´¹æ—¶é—´ï¼Œæˆ‘ä»¬**å¸Œæœ›å½“æœ‰æ–° goroutine åˆ›å»ºæ—¶ï¼Œç«‹åˆ»èƒ½æœ‰ M è¿è¡Œå®ƒ**ï¼Œå¦‚æœé”€æ¯å†æ–°å»ºå°±å¢åŠ äº†æ—¶å»¶ï¼Œé™ä½äº†æ•ˆç‡ã€‚å½“ç„¶ä¹Ÿè€ƒè™‘äº†è¿‡å¤šçš„è‡ªæ—‹çº¿ç¨‹æ˜¯æµªè´¹ CPUï¼Œæ‰€ä»¥ç³»ç»Ÿä¸­æœ€å¤šæœ‰ `GOMAXPROCS` ä¸ªè‡ªæ—‹çš„çº¿ç¨‹ (å½“å‰ä¾‹å­ä¸­çš„ `GOMAXPROCS`=4ï¼Œæ‰€ä»¥ä¸€å…± 4 ä¸ª P)ï¼Œå¤šä½™çš„æ²¡äº‹åšçº¿ç¨‹ä¼šè®©ä»–ä»¬ä¼‘çœ ã€‚

### (10) åœºæ™¯ 10[#](#f27a15)

 å‡å®šå½“å‰é™¤äº† M3 å’Œ M4 ä¸ºè‡ªæ—‹çº¿ç¨‹ï¼Œè¿˜æœ‰ M5 å’Œ M6 ä¸ºç©ºé—²çš„çº¿ç¨‹ (æ²¡æœ‰å¾—åˆ° P çš„ç»‘å®šï¼Œæ³¨æ„æˆ‘ä»¬è¿™é‡Œæœ€å¤šå°±åªèƒ½å¤Ÿå­˜åœ¨ 4 ä¸ª Pï¼Œæ‰€ä»¥ P çš„æ•°é‡åº”è¯¥æ°¸è¿œæ˜¯ M>=P, å¤§éƒ¨åˆ†éƒ½æ˜¯ M åœ¨æŠ¢å éœ€è¦è¿è¡Œçš„ P)ï¼ŒG8 åˆ›å»ºäº† G9ï¼ŒG8 è¿›è¡Œäº†**é˜»å¡çš„ç³»ç»Ÿè°ƒç”¨**ï¼ŒM2 å’Œ P2 ç«‹å³è§£ç»‘ï¼ŒP2 ä¼šæ‰§è¡Œä»¥ä¸‹åˆ¤æ–­ï¼šå¦‚æœ P2 æœ¬åœ°é˜Ÿåˆ—æœ‰ Gã€å…¨å±€é˜Ÿåˆ—æœ‰ G æˆ–æœ‰ç©ºé—²çš„ Mï¼ŒP2 éƒ½ä¼šç«‹é©¬å”¤é†’ 1 ä¸ª M å’Œå®ƒç»‘å®šï¼Œå¦åˆ™ P2 åˆ™ä¼šåŠ å…¥åˆ°ç©ºé—² P åˆ—è¡¨ï¼Œç­‰å¾… M æ¥è·å–å¯ç”¨çš„ pã€‚æœ¬åœºæ™¯ä¸­ï¼ŒP2 æœ¬åœ°é˜Ÿåˆ—æœ‰ G9ï¼Œå¯ä»¥å’Œå…¶ä»–ç©ºé—²çš„çº¿ç¨‹ M5 ç»‘å®šã€‚

![](https://cdn.learnku.com/uploads/images/202003/12/58489/k3HKE9U21M.png!large)

### (11) åœºæ™¯ 11[#](#89d394)

G8 åˆ›å»ºäº† G9ï¼Œå‡å¦‚ G8 è¿›è¡Œäº†**éé˜»å¡ç³»ç»Ÿè°ƒç”¨**ã€‚  
![](https://cdn.learnku.com/uploads/images/202003/12/58489/zBvpl8ENSb.png!large)

 M2 å’Œ P2 ä¼šè§£ç»‘ï¼Œä½† M2 ä¼šè®°ä½ P2ï¼Œç„¶å G8 å’Œ M2 è¿›å…¥**ç³»ç»Ÿè°ƒç”¨**çŠ¶æ€ã€‚å½“ G8 å’Œ M2 é€€å‡ºç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œä¼šå°è¯•è·å– P2ï¼Œå¦‚æœæ— æ³•è·å–ï¼Œåˆ™è·å–ç©ºé—²çš„ Pï¼Œå¦‚æœä¾ç„¶æ²¡æœ‰ï¼ŒG8 ä¼šè¢«è®°ä¸ºå¯è¿è¡ŒçŠ¶æ€ï¼Œå¹¶åŠ å…¥åˆ°å…¨å±€é˜Ÿåˆ—ï¼ŒM2 å› ä¸ºæ²¡æœ‰ P çš„ç»‘å®šè€Œå˜æˆä¼‘çœ çŠ¶æ€ (é•¿æ—¶é—´ä¼‘çœ ç­‰å¾… GC å›æ”¶é”€æ¯)ã€‚

## å››ã€å°ç»“[#](#7da648)

æ€»ç»“ï¼ŒGo è°ƒåº¦å™¨å¾ˆè½»é‡ä¹Ÿå¾ˆç®€å•ï¼Œè¶³ä»¥æ’‘èµ· goroutine çš„è°ƒåº¦å·¥ä½œï¼Œå¹¶ä¸”è®© Go å…·æœ‰äº†åŸç”Ÿï¼ˆå¼ºå¤§ï¼‰å¹¶å‘çš„èƒ½åŠ›ã€‚**Go è°ƒåº¦æœ¬è´¨æ˜¯æŠŠå¤§é‡çš„ goroutine åˆ†é…åˆ°å°‘é‡çº¿ç¨‹ä¸Šå»æ‰§è¡Œï¼Œå¹¶åˆ©ç”¨å¤šæ ¸å¹¶è¡Œï¼Œå®ç°æ›´å¼ºå¤§çš„å¹¶å‘ã€‚**

## å…³äºä½œè€…ï¼š

ä½œè€…ï¼š`Aceld(åˆ˜ä¸¹å†°)`

mail: [danbing.at@gmail.com](https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=danbing.at@gmail.com)  
github: [github.com/aceld](https://github.com/aceld)  
åŸåˆ›ä¹¦ç± gitbook: [legacy.gitbook.com/@aceld](http://legacy.gitbook.com/@aceld)

> æœ¬ä½œå“é‡‡ç”¨[ã€ŠCC åè®®ã€‹](https://learnku.com/docs/guide/cc4.0/6589)ï¼Œè½¬è½½å¿…é¡»æ³¨æ˜ä½œè€…å’Œæœ¬æ–‡é“¾æ¥



## END é“¾æ¥
+ [å›åˆ°ç›®å½•](../README.md)
+ [ä¸Šä¸€èŠ‚](37.md)
+ [ä¸‹ä¸€èŠ‚](39.md)
---
+ [å‚ä¸è´¡çŒ®â¤ï¸ğŸ’•ğŸ’•](https://github.com/3293172751/Block_Chain/blob/master/Git/git-contributor.md)