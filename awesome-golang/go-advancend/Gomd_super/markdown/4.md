# Go UDP Socket-Server-Client

[[toc]]

[toc]

##  Goè¯­è¨€å®ç°UDPé€šä¿¡

### UDPåè®®

`UDP`åè®®ï¼ˆUser Datagram Protocolï¼‰ä¸­æ–‡åç§°æ˜¯ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼Œæ˜¯ OSIï¼ˆOpen System Interconnectionï¼Œå¼€æ”¾å¼ç³»ç»Ÿäº’è”ï¼‰å‚è€ƒæ¨¡å‹ä¸­ä¸€ç§æ— è¿æ¥çš„ä¼ è¾“å±‚åè®®ï¼Œä¸éœ€è¦å»ºç«‹è¿æ¥å°±èƒ½ç›´æ¥è¿›è¡Œæ•°æ®å‘é€å’Œæ¥æ”¶ï¼Œå±äºä¸å¯é çš„ã€æ²¡æœ‰æ—¶åºçš„é€šä¿¡ï¼Œä½†æ˜¯ `UDP` åè®®çš„å®æ—¶æ€§æ¯”è¾ƒå¥½ï¼Œé€šå¸¸ç”¨äºè§†é¢‘ç›´æ’­ç›¸å…³é¢†åŸŸã€‚

### UDPæœåŠ¡ç«¯

ä½¿ç”¨`Go`è¯­è¨€çš„`net`åŒ…å®ç°çš„`UDP`æœåŠ¡ç«¯ä»£ç å¦‚ä¸‹ï¼š

```go
// UDP/server/main.go

// UDP serverç«¯
func main() {
    listen, err := net.ListenUDP("udp", &net.UDPAddr{
        IP:   net.IPv4(0, 0, 0, 0),
        Port: 30000,
    })
    if err != nil {
        fmt.Println("listen failed, err:", err)
        return
    }
    defer listen.Close()
    for {
        var data [1024]byte
        n, addr, err := listen.ReadFromUDP(data[:]) // æ¥æ”¶æ•°æ®
        if err != nil {
            fmt.Println("read udp failed, err:", err)
            continue
        }
        fmt.Printf("data:%v addr:%v count:%v\n", string(data[:n]), addr, n)
        _, err = listen.WriteToUDP(data[:n], addr) // å‘é€æ•°æ®
        if err != nil {
            fmt.Println("write to udp failed, err:", err)
            continue
        }
    }
}
```

### UDPå®¢æˆ·ç«¯

ä½¿ç”¨Goè¯­è¨€çš„netåŒ…å®ç°çš„UDPå®¢æˆ·ç«¯ä»£ç å¦‚ä¸‹ï¼š

```go
// UDP å®¢æˆ·ç«¯
func main() {
    socket, err := net.DialUDP("udp", nil, &net.UDPAddr{
        IP:   net.IPv4(0, 0, 0, 0),
        Port: 30000,
    })
    if err != nil {
        fmt.Println("è¿æ¥æœåŠ¡ç«¯å¤±è´¥ï¼Œerr:", err)
        return
    }
    defer socket.Close()
    sendData := []byte("Hello server")
    _, err = socket.Write(sendData) // å‘é€æ•°æ®
    if err != nil {
        fmt.Println("å‘é€æ•°æ®å¤±è´¥ï¼Œerr:", err)
        return
    }
    data := make([]byte, 4096)
    n, remoteAddr, err := socket.ReadFromUDP(data) // æ¥æ”¶æ•°æ®
    if err != nil {
        fmt.Println("æ¥æ”¶æ•°æ®å¤±è´¥ï¼Œerr:", err)
        return
    }
    fmt.Printf("recv:%v addr:%v count:%v\n", string(data[:n]), remoteAddr, n)
}
```



## END é“¾æ¥

<ul><li><div><a href = '3.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '5.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°é¦–é¡µğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; :æœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

