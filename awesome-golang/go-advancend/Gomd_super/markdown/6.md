# httpç¼–ç¨‹

[[toc]]

[toc]

## postman

æˆ‘ä»¬ä½¿ç”¨ `postman` å·¥å…·ç»§ç»­å‘æœåŠ¡ç«¯å‘é€æ•°æ®ï¼Œåªä¸è¿‡è¿™ä¸ªå‘é€çš„æ˜¯ `Http` çš„ `Get` è¯·æ±‚ï¼š
![image-20221101153017273](http://sm.nsddd.top/smimage-20221101153017273.png)

å®¢æˆ·ç«¯æ¥æ”¶æ•°æ®ï¼š

![image-20221101153104058](http://sm.nsddd.top/smimage-20221101153104058.png)



## webå·¥ä½œæµç¨‹

WebæœåŠ¡å™¨çš„å·¥ä½œåŸç†å¯ä»¥ç®€å•åœ°å½’çº³ä¸º
- å®¢æˆ·æœºé€šè¿‡ `TCP/IP` åè®®å»ºç«‹åˆ°æœåŠ¡å™¨çš„TCPè¿æ¥
- å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ `HTTP` åè®®è¯·æ±‚åŒ…ï¼Œè¯·æ±‚æœåŠ¡å™¨é‡Œçš„èµ„æºæ–‡æ¡£
- æœåŠ¡å™¨å‘å®¢æˆ·æœºå‘é€ `HTTP` åè®®åº”ç­”åŒ…ï¼Œå¦‚æœè¯·æ±‚çš„èµ„æºåŒ…å«æœ‰åŠ¨æ€è¯­è¨€çš„å†…å®¹ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ä¼šè°ƒç”¨åŠ¨æ€è¯­è¨€çš„è§£é‡Šå¼•æ“è´Ÿè´£å¤„ç† **åŠ¨æ€å†…å®¹**ï¼Œå¹¶å°†å¤„ç†å¾—åˆ°çš„æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯
- å®¢æˆ·æœºä¸æœåŠ¡å™¨æ–­å¼€ã€‚ç”±å®¢æˆ·ç«¯è§£é‡Š `HTML` æ–‡æ¡£ï¼Œåœ¨å®¢æˆ·ç«¯å±å¹•ä¸Šæ¸²æŸ“å›¾å½¢ç»“æœ



##  HTTP åè®®

- è¶…æ–‡æœ¬ä¼ è¾“åè®®( `HTTP` ï¼ŒHyperText Transfer Protocol)æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œåè®®ï¼Œå®ƒè¯¦ç»†è§„å®šäº†æµè§ˆå™¨å’Œä¸‡ç»´ç½‘æœåŠ¡å™¨ä¹‹é—´äº’ç›¸é€šä¿¡çš„è§„åˆ™ï¼Œé€šè¿‡å› ç‰¹ç½‘ä¼ é€ä¸‡ç»´ç½‘æ–‡æ¡£çš„æ•°æ®ä¼ é€åè®®
-  `HTTP` åè®®é€šå¸¸æ‰¿è½½äºTCPåè®®ä¹‹ä¸Š



## HTTPç›¸åº”ä»£ç 

```go
package main

import (
	"fmt"
	"net/http"
)

func main() {
	//http
	client := http.Client{} //client{}æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œç”¨äºå‘é€httpè¯·æ±‚

	// å‘é€getè¯·æ±‚
	resp, err := client.Get("http://www.baidu.com")
	if err != nil {
		defer func() {
			if err := recover(); err != nil {
				println(err)
			}
		}()
		panic(err) //panic()å‡½æ•°ç”¨äºæŠ›å‡ºå¼‚å¸¸
	}
	defer resp.Body.Close() // å…³é—­è¯·æ±‚ä½“

	// è¯·æ±‚å¤´
	fmt.Println("è¯·æ±‚å¤´", resp.Header)

	ct := resp.Header.Get("Content-Type")
	data := resp.Header.Get("Date")
	server := resp.Header.Get("Server")

	fmt.Printf("Content-Type: %s\n  Date: %s\n  Server: %s\n", ct, data, server)

	// è·å–çŠ¶æ€ç 
	status := resp.StatusCode
	fmt.Println("çŠ¶æ€ç ", status)

	// è·å–å“åº”ä½“
	body := resp.Body
	fmt.Println("å“åº”ä½“", body)

	// è·å–Url
	url := resp.Request.URL
	fmt.Println("url", url)

	// æ‹¿åˆ°è¯·æ±‚ä½“
	buf := make([]byte, 1024*4)
	n, err := resp.Body.Read(buf)
	if err != nil {
		panic(err)
	}
	println(string(buf[:n]))
}

```

**ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š**

![image-20221101161420332](http://sm.nsddd.top/smimage-20221101161420332.png)



## HTTP æœåŠ¡ç«¯æµ‹è¯•

::: tip
å‰é¢æˆ‘ä»¬å†™çš„éƒ½æ˜¯è¯·æ±‚ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ª `server` ï¼Œåˆ«äººæ¥è¯·æ±‚ï¼Œæˆ‘ä»¬æ¥å“åº”~

:::

```go
/*
An elaborate, high quality docstring for the above function:

Args:
	param1: the first parameter.
	param2: the second parameter.

Returns:
	the return value.

Raises:
	KeyError: raises an exception.
*/
// http-server
package main

import (
	"fmt"
	"net/http"
)

func main() {
	//æ³¨å†Œè·¯ç”±
	//xxxx/user ===> func1
	//xxxx/name ===> func2
	//xxxx/id ===> func3
	http.HandleFunc("/user", func(writer http.ResponseWriter, request *http.Request) {
		/*
			+ writer: ç”¨äºå†™å…¥å“åº”æ•°æ®,é€šè¿‡writer.Write()æ–¹æ³•å†™å…¥å“åº”æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯
			+ request: ç”¨äºè·å–è¯·æ±‚æ•°æ®,é€šè¿‡request.Methodè·å–è¯·æ±‚æ–¹å¼,é€šè¿‡request.URLè·å–è¯·æ±‚è·¯å¾„
		*/
		fmt.Fprintln(writer, "user") //è¡¨ç¤ºå‘å®¢æˆ·ç«¯è¿”å›æ•°æ®user
	})

	http.HandleFunc("/name", func(writer http.ResponseWriter, request *http.Request) {
		fmt.Fprintln(writer, "name")
	})

	http.HandleFunc("/id", func(writer http.ResponseWriter, request *http.Request) {
		fmt.Fprintln(writer, "id")
	})

	//å¯åŠ¨æœåŠ¡
	fmt.Println("æœåŠ¡å¯åŠ¨æˆåŠŸ...")
	if err := http.ListenAndServe("127.0.0.1:8080", nil); err != nil {
		defer func() {
			fmt.Println("http server start failed, err:", err)
		}()
		panic(err)
	}

}
```

ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š

![image-20221101163255198](http://sm.nsddd.top/smimage-20221101163255198.png)



##  HTTP æœåŠ¡ç«¯

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    //http://127.0.0.1:8000/go
    // å•ç‹¬å†™å›è°ƒå‡½æ•°
    http.HandleFunc("/go", myHandler)
    //http.HandleFunc("/ungo",myHandler2 )
    // addrï¼šç›‘å¬çš„åœ°å€
    // handlerï¼šå›è°ƒå‡½æ•°
    http.ListenAndServe("127.0.0.1:8000", nil)
}

// handlerå‡½æ•°
func myHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Println(r.RemoteAddr, "è¿æ¥æˆåŠŸ")
    // è¯·æ±‚æ–¹å¼ï¼šGET POST DELETE PUT UPDATE
    fmt.Println("method:", r.Method)
    // /go
    fmt.Println("url:", r.URL.Path)
    fmt.Println("header:", r.Header)
    fmt.Println("body:", r.Body)
    // å›å¤
    w.Write([]byte("www.5lmh.com"))
}
```

##  HTTP æœåŠ¡ç«¯

```go
package main

import (
    "fmt"
    "io"
    "net/http"
)

func main() {
    //resp, _ := http.Get("http://www.baidu.com")
    //fmt.Println(resp)
    resp, _ := http.Get("http://127.0.0.1:8000/go")
    defer resp.Body.Close()
    // 200 OK
    fmt.Println(resp.Status)
    fmt.Println(resp.Header)

    buf := make([]byte, 1024)
    for {
        // æ¥æ”¶æœåŠ¡ç«¯ä¿¡æ¯
        n, err := resp.Body.Read(buf)
        if err != nil && err != io.EOF {
            fmt.Println(err)
            return
        } else {
            fmt.Println("è¯»å–å®Œæ¯•")
            res := string(buf[:n])
            fmt.Println(res)
            break
        }
    }
}
```

## END é“¾æ¥
<ul><li><div><a href = '5.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '7.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°é¦–é¡µğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; :æœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

