# æ–‡ä»¶çš„ä¸€ç³»åˆ—æ“ä½œ

[[toc]]

[toc]

ğŸ˜¶â€ğŸŒ«ï¸goè¯­è¨€å®˜æ–¹ç¼–ç¨‹æŒ‡å—ï¼š[https://golang.org/#](https://golang.org/#)  

>   goè¯­è¨€çš„å®˜æ–¹æ–‡æ¡£å­¦ä¹ ç¬”è®°å¾ˆå…¨ï¼Œæ¨èå»å®˜ç½‘å­¦ä¹ 

ğŸ˜¶â€ğŸŒ«ï¸æˆ‘çš„å­¦ä¹ ç¬”è®°ï¼šgithub: [https://github.com/3293172751/golang-rearn](https://github.com/3293172751/golang-rearn)

---

**åŒºå—é“¾æŠ€æœ¯ï¼ˆä¹Ÿç§°ä¹‹ä¸ºåˆ†å¸ƒå¼è´¦æœ¬æŠ€æœ¯ï¼‰**ï¼Œæ˜¯ä¸€ç§äº’è”ç½‘æ•°æ®åº“æŠ€æœ¯ï¼Œå…¶ç‰¹ç‚¹æ˜¯å»ä¸­å¿ƒåŒ–ï¼Œå…¬å¼€é€æ˜ï¼Œè®©æ¯ä¸€ä¸ªäººå‡å¯å‚ä¸çš„æ•°æ®åº“è®°å½•

>   â¤ï¸ğŸ’•ğŸ’•å…³äºåŒºå—é“¾æŠ€æœ¯ï¼Œå¯ä»¥å…³æ³¨æˆ‘ï¼Œå…±åŒå­¦ä¹ æ›´å¤šçš„åŒºå—é“¾æŠ€æœ¯ã€‚åšå®¢[http://nsddd.top](http://nsddd.top)

---

## æ–‡ä»¶æ“ä½œé€ŸæŸ¥

::: details è¯»å–æ–‡ä»¶æ“ä½œ æ–¹æ³•ä¸€
**è¯»å–æ–‡ä»¶çš„æ–¹æ³•ä¸€ï¼šæ³¨æ„ä¸€æ¬¡åªèƒ½è¯»å–`128`ä¸ªå­—èŠ‚ï¼Œå¯ä»¥å¾ªç¯è¯»å–**

1. æ‰“å¼€æ–‡ä»¶ `fileObj, err := os.Open("æ–‡ä»¶è·¯å¾„")`
2. è¯»å–æ–‡ä»¶å†…å®¹ `reader := bufio.NewReader(fileObj)`
3. å¾ªç¯è¯»å–æ–‡ä»¶å†…å®¹
	
	```go
	for {
	    str, err := reader.ReadString('')
		if err == io.EOF {  // `EOF`æ˜¯æ–‡ä»¶è¯»å–ç»“æŸçš„æ ‡å¿—ï¼Œå½“è¯»å–åˆ°æ–‡ä»¶æœ«å°¾æ—¶ï¼Œä¼šè¿”å›`EOF`
			break
		}
		fmt.Print(str)
	}
	```
4. å…³é—­æ–‡ä»¶ `fileObj.Close()`		

ğŸ’¡ç®€å•çš„ä¸€ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼š

```go
func main() {
	file, err := os.Open("./51-main.go")
	defer file.Close()
	if err != nil {
		fmt.Println("æ–‡ä»¶æ‰“å¼€å¤±è´¥", err)
		return
	}
	fmt.Println("æ–‡ä»¶æ‰“å¼€æˆåŠŸ")

	//åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡ ç”¨æ¥å­˜å‚¨è¯»å–çš„å†…å®¹
	buf := make([]byte, 1024*2)
	//å¾ªç¯è¯»å–æ–‡ä»¶å†…å®¹
	for {
		n, err := file.Read(buf)
		if err != nil {
			fmt.Println("æ–‡ä»¶è¯»å–å¤±è´¥", err)
			return
		}
		//å¦‚æœè¯»å–çš„å†…å®¹å°äº1024å­—èŠ‚ï¼Œå°±ç»“æŸå¾ªç¯
		if n < 1024*2 {
			break
		}
		fmt.Println(string(buf[:n]))
	}
}
```

ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š

```bash
D:\æ–‡æ¡£\æœ€è¿‘çš„\awesome-golang\docs\code\go-super>go build 52-main.go

D:\æ–‡æ¡£\æœ€è¿‘çš„\awesome-golang\docs\code\go-super>52-main.exe
æ–‡ä»¶æ‰“å¼€æˆåŠŸ
```

ğŸ“œ å¯¹ä¸Šé¢çš„è§£é‡Šï¼š

> **åé¢è¯»å–å†…å®¹å¤ªé•¿ï¼Œä½†æ˜¯å†…å®¹æ˜¯æ²¡æœ‰è¯»å–å®Œæ•´çš„ï¼Œåªè¯»å–åˆ°ä¸€éƒ¨åˆ†ï¼Œæœ€åä¸€ä¸ªä¸æ»¡1024å­—èŠ‚å°±å»æ‰äº†ï¼Œå¦‚æœæƒ³è¦è¯»å–å®Œæ•´ï¼Œæ”¹forå¾ªç¯ï¼š~**
>
> +  `EOF`æ˜¯æ–‡ä»¶è¯»å–ç»“æŸçš„æ ‡å¿—ï¼Œå½“è¯»å–åˆ°æ–‡ä»¶æœ«å°¾æ—¶ï¼Œä¼šè¿”å›`EOF`
>
> ```go
> for {
> 	n, err := file.Read(buf)
> 	if err == io.EOF {  // `EOF`æ˜¯æ–‡ä»¶è¯»å–ç»“æŸçš„æ ‡å¿—ï¼Œå½“è¯»å–åˆ°æ–‡ä»¶æœ«å°¾æ—¶ï¼Œä¼šè¿”å›`EOF`Â·
> 		break
> 	}
> 	if err != nil {
> 		fmt.Println("æ–‡ä»¶è¯»å–å¤±è´¥", err)
> 		return   
> 	}
> 	// //å¦‚æœè¯»å–çš„å†…å®¹å°äº1024å­—èŠ‚ï¼Œå°±ç»“æŸå¾ªç¯
> 	// if n < 1024*2 {
> 	// 	break
> 	// }
> 	fmt.Println(string(buf[:n]))
> }
> ```

:::



::: details è¯»å–æ–‡ä»¶çš„æ–¹æ³•äºŒï¼š bufioåŒ…çš„ReadFile()å‡½æ•°
**è¯»å–æ–‡ä»¶çš„æ–¹æ³•äºŒï¼š bufioåŒ…çš„ReadFile()å‡½æ•°**

1. è¯»å–æ–‡ä»¶å†…å®¹ `content, err := ioutil.ReadFile("æ–‡ä»¶è·¯å¾„")`
2. æ‰“å°æ–‡ä»¶å†…å®¹ `fmt.Println(string(content))`

ğŸ’¡ç®€å•çš„ä¸€ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼š

```go
/*
 * @Description: bufioæŒ‰è¡Œè¯»å–æ–‡ä»¶
 * @Author: xiongxinwei 3293172751nss@gmail.com
 * @Date: 2022-10-04 21:37:41
 * @LastEditTime: 2022-10-26 17:55:39
 * @FilePath: \code\go-super\53-main.go
 * @Github_Address: https://github.com/3293172751/cs-awesome-Block_Chain
 * Copyright (c) 2022 by xiongxinwei 3293172751nss@gmail.com, All Rights Reserved. @blog: http://nsddd.top
 */
package main

import (
	"fmt"
	"io/ioutil"
)

func main() {
	//bufioæŒ‰è¡Œè¯»å–æ–‡ä»¶  å¦‚æœæ–‡ä»¶å¤ªå¤§ï¼Œä¼šå¯¼è‡´å†…å­˜æº¢å‡º
	byteString, err := ioutil.ReadFile("./51-main.go") //è¿”å›çš„æ˜¯ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡
	if err != nil {
		fmt.Println("æ–‡ä»¶è¯»å–å¤±è´¥", err)
		return
	}
	fmt.Println(string(byteString))
}

```

ç¼–è¯‘ç»“æœå’Œä¸Šé¢ä¸€æ ·

:::



::: details è¯»å–æ–‡ä»¶çš„æ–¹æ³•äºŒï¼š bufioè¯»å–æ–‡ä»¶
**bufioè¯»å–æ–‡ä»¶**

1. åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ `file, err := os.Open("test.txt")`
2. åˆ›å»ºä¸€ä¸ª `*Reader` æ˜¯å¸¦ç¼“å†²çš„ `reader := bufio.NewReader(file)`
3. å¾ªç¯çš„è°ƒç”¨ `reader.ReadString('\n')` è¯»å–æ–‡ä»¶çš„å†…å®¹ 
4. å…³é—­æ–‡ä»¶ `defer file.Close()`

:::



## æ–‡ä»¶

> æ–‡ä»¶ï¼Œæˆ‘ä»¬å¹¶ä¸é™Œç”Ÿï¼Œ**æ–‡ä»¶å°±æ˜¯æ•°æ®æºï¼ˆä¿å­˜æ•°æ®çš„åœ°æ–¹ï¼‰çš„ä¸€ç§**ï¼Œæ–‡ä»¶æœ€ä¸»è¦çš„ä½œç”¨æ˜¯**ä¿å­˜æ•°æ®**,å®ƒæ—¢å¯ä»¥æ˜¯ä¿å­˜ä¸€å¼ å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥æ˜¯å£°éŸ³å’Œè§†é¢‘

**æ–‡ä»¶åœ¨ç¨‹åºä¸­æ˜¯ä»¥æµçš„å½¢å¼æ¥æ“ä½œçš„**

![image-20220312132518175](./images/RWjc4mD65IYBgTt.png)

**os.file**å°è£…æ‰€æœ‰æ–‡ä»¶ç›¸å…³æ“ä½œï¼Œfileæ˜¯ä¸€ä¸ªç»“æ„ä½“

**æ–‡ä»¶æ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹**

```go
/*************************************************************************
    > File Name: file.go
    > Author: smile
    > Mail: 3293172751nss@gmail.com 
    > Created Time: Sat 12 Mar 2022 01:45:24 PM CST
 ************************************************************************/
package main
import (
    "fmt"
    "os"
)
func main(){
    file , err := os.Open("/c/golang/fun.go")
    if err != nil{
        fmt.Println("open file = ",err)
    }   
    fmt.Printf("file= %v",file)
    //å…³é—­æ–‡ä»¶
    err = file.Close()                                                                            
    if err!=nil{
        fmt.Println("æ‰“å¼€æ–‡ä»¶é”™è¯¯",err)
    }   
}

```

**ç¼–è¯‘**

```shell
[rroot@mail golang]# go build -o a file.go 
[rroot@mail golang]# ./a
fifile= &{0xc0000a6120vim file.goo build -o a file.go 
```

**ç”±æ­¤å¯è§ï¼Œæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆ**



## OPenFileå‡½æ•°

Goè¯­è¨€çš„ os åŒ…ä¸‹æœ‰ä¸€ä¸ª OpenFile å‡½æ•°ï¼Œå…¶åŸå‹å¦‚ä¸‹æ‰€ç¤ºï¼š

func OpenFile(name string, flag int, perm FileMode) (file *File, err error)

å…¶ä¸­ name æ˜¯æ–‡ä»¶çš„æ–‡ä»¶åï¼Œå¦‚æœä¸æ˜¯åœ¨å½“å‰è·¯å¾„ä¸‹è¿è¡Œéœ€è¦åŠ ä¸Šå…·ä½“è·¯å¾„ï¼›flag æ˜¯æ–‡ä»¶çš„å¤„ç†å‚æ•°ï¼Œä¸º int ç±»å‹ï¼Œæ ¹æ®ç³»ç»Ÿçš„ä¸åŒå…·ä½“å€¼å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œä½†æ˜¯ä½œç”¨æ˜¯ç›¸åŒçš„ã€‚

ä¸‹é¢åˆ—ä¸¾äº†ä¸€äº›å¸¸ç”¨çš„ flag æ–‡ä»¶å¤„ç†å‚æ•°ï¼š

- O_RDONLYï¼šåªè¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼›
- O_WRONLYï¼šåªå†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼›
- O_RDWRï¼šè¯»å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼›
- O_APPENDï¼šå†™æ“ä½œæ—¶å°†æ•°æ®é™„åŠ åˆ°æ–‡ä»¶å°¾éƒ¨ï¼ˆè¿½åŠ ï¼‰ï¼›
- O_CREATEï¼šå¦‚æœä¸å­˜åœ¨å°†åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼›
- O_EXCLï¼šå’Œ O_CREATE é…åˆä½¿ç”¨ï¼Œæ–‡ä»¶å¿…é¡»ä¸å­˜åœ¨ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªé”™è¯¯ï¼›
- O_SYNCï¼šå½“è¿›è¡Œä¸€ç³»åˆ—å†™æ“ä½œæ—¶ï¼Œæ¯æ¬¡éƒ½è¦ç­‰å¾…ä¸Šæ¬¡çš„ I/O æ“ä½œå®Œæˆå†è¿›è¡Œï¼›
- O_TRUNCï¼šå¦‚æœå¯èƒ½ï¼Œåœ¨æ‰“å¼€æ—¶æ¸…ç©ºæ–‡ä»¶ã€‚

åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ golang.txtï¼Œå¹¶åœ¨å…¶ä¸­å†™å…¥ 5 å¥â€œhttp://nsddd.topâ€ã€‚

```go
package main

import (
    "bufio"
    "fmt"
    "os"
)

func main() {
    //åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå†™å…¥å†…å®¹ 5 å¥ â€œhttp://c.biancheng.net/golang/â€
    filePath := "e:/code/golang.txt"
    file, err := os.OpenFile(filePath, os.O_WRONLY|os.O_CREATE, 0666)
    if err != nil {
        fmt.Println("æ–‡ä»¶æ‰“å¼€å¤±è´¥", err)
    }
    //åŠæ—¶å…³é—­fileå¥æŸ„
    defer file.Close()

    //å†™å…¥æ–‡ä»¶æ—¶ï¼Œä½¿ç”¨å¸¦ç¼“å­˜çš„ *Writer
    write := bufio.NewWriter(file)
    for i := 0; i < 5; i++ {
        write.WriteString("http://nsddd.top\n")
    }
    //Flushå°†ç¼“å­˜çš„æ–‡ä»¶çœŸæ­£å†™å…¥åˆ°æ–‡ä»¶ä¸­
    write.Flush()
}
```



## è¯»å–æ–‡ä»¶å†…å®¹æ˜¾ç¤ºåœ¨ç»ˆç«¯æ–¹æ³•

```go
package main
import (
    "fmt"
    "os"
    "io"
    "reader"
)
func main(){
    file, err := os.Open("/c/golang/fun.go")
    if err != nil{
        fmt.Println("open file = ",err)
    } 
    
    //åŠæ—¶å…³é—­æ–‡ä»¶
    defer file.Close()
    reader := bufio.NewReader(file)
    
    //å¾ªç¯çš„è¯»å–æ–‡ä»¶çš„å†…å®¹
    for{
        str,err := reader.ReadString('\n')
        //è¯»å–åˆ°ä¸€è¡Œå°±ç»“æŸ,err é”™è¯¯ä¿¡æ¯æç¤º
        if err != io.EOF{
            //io.EOFè¡¨ç¤ºæ–‡ä»¶çš„æœ«å°¾ï¼Œæ­¤æ—¶ç»“æŸè¯»å–
            break
        }
        fmt.Println(str)
    }
    fmt.Println("æ–‡ä»¶è¯»å–ç»“æŸ...")
}
```

**ç¼–è¯‘è¯»å–ï¼š**

```shell
[root@mail golang]# go run file.go 
package main

import "fmt"

func main() {
   /* å®šä¹‰å±€éƒ¨å˜é‡ */
   var a int = 100
   var b int = 200
   var ret int

   /* è°ƒç”¨å‡½æ•°å¹¶è¿”å›æœ€å¤§å€¼ */
   ret = max(a, b)

   fmt.Printf( "æœ€å¤§å€¼æ˜¯ : %!d(MISSING)\n", ret )
}

/* å‡½æ•°è¿”å›ä¸¤ä¸ªæ•°çš„æœ€å¤§å€¼ */
func max(num1, num2 int) int {
   /* å®šä¹‰å±€éƒ¨å˜é‡ */

   if (num1 > num2) {
       return unm1
   } else {
      return num2
}
}
æ–‡ä»¶è¯»å–ç»“æŸ...
```

**è¯»å–æ–‡ä»¶å†…å®¹å¹¶ä¸”æ˜¾ç¤ºåœ¨ç»ˆç«¯ï¼ˆä½¿ç”¨ioutil==ä¸€æ¬¡å°†æ–‡ä»¶è¯»å–åˆ°å†…å­˜ä¸­==),è¿™ç§æ–¹å¼é€‚ç”¨äºæ–‡ä»¶ä¸å¤§çš„æƒ…å†µï¼Œç›¸å…³æ–¹æ³•å’Œå‡½æ•°(ioutil.ReadFile)**

```
func ReadFile
```

```go
/*************************************************************************
    > File Name: iouit.go
    > Author: smile
    > Mail: 3293172751nss@gmail.com 
    > Created Time: Sat 12 Mar 2022 02:48:32 PM CST
 ************************************************************************/
package main
import (
    "fmt"
    "io/ioutil"
)
func main(){
    //ä½¿ç”¨ioutilä¸€æ¬¡æ€§å°†å‡½æ•°è¯»å–åˆ°ä¸º
    file := "/c/golang/aa.go"
    content, err := ioutil.ReadFile(file)
    //æ–‡ä»¶çš„æ‰“å¼€å’Œå…³é—­éƒ½è¢«éšè—èµ·æ¥äº†ã€‚æ‰€ä»¥ä¸éœ€è¦å†™æ‰“å¼€å’Œå…³é—­
    if err != nil{
        fmt.Printf("file open err= %v",err)
    }   
    //æŠŠè¯»å–åˆ°çš„å†…å®¹æ˜¾ç¤ºåˆ°ç»ˆç«¯
    //fmt.Printf("%v",content)  //[]bype
    fmt.Printf("%v",string(content))  //éœ€è¦è½¬æ¢ä¸ºstring  
}
```

**ç¼–è¯‘**

```shell
[root@mail golang]# go run iouit.go 
package main
import "fmt"
func main() {
   var a int = 21
   var c int
   c =  a
```





## å†™æ–‡ä»¶çš„æ“ä½œ

[ğŸ–±ï¸ è¯·å»å®˜ç½‘ç‚¹å‡»osåŒ…](https://studygolang.com/pkgdoc)

## Constants

```go
const (
    O_RDONLY int = syscall.O_RDONLY    // åªè¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶
    O_WRONLY int = syscall.O_WRONLY    // åªå†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶
    O_RDWR   int = syscall.O_RDWR      // è¯»å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶
    O_APPEND int = syscall.O_APPEND    // å†™æ“ä½œæ—¶å°†æ•°æ®é™„åŠ åˆ°æ–‡ä»¶å°¾éƒ¨
    O_CREATE int = syscall.O_CREAT     // å¦‚æœä¸å­˜åœ¨å°†åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶
    O_EXCL   int = syscall.O_EXCL      // å’ŒO_CREATEé…åˆä½¿ç”¨ï¼Œæ–‡ä»¶å¿…é¡»ä¸å­˜åœ¨
    O_SYNC   int = syscall.O_SYNC      // æ‰“å¼€æ–‡ä»¶ç”¨äºåŒæ­¥I/O
    O_TRUNC  int = syscall.O_TRUNC     // å¦‚æœå¯èƒ½ï¼Œæ‰“å¼€æ—¶æ¸…ç©ºæ–‡ä»¶
)
```

**æˆ‘ä»¬é€šå¸¸æŠŠ O_CREATEå’ŒO_WRONLYç»„åˆä½¿ç”¨ï¼ˆå†™æ–‡ä»¶å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨é‚£ä¹ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼‰**



**ä½¿ç”¨os.OpenFile(),budio.NewWriter()ï¼Œ**Writerçš„æ–¹æ³•å®Œæˆä¸‹é¢æ¡ˆä¾‹

**æ¡ˆä¾‹ä¸€**

> åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå†™å…¥å†…å®¹5å¥â€hello wordâ€

```go
package main                                                                                                  
import (
    "fmt"
    "bufio"
    "os"
)
func main(){
    //1. æ‰“å¼€æ–‡ä»¶
    filePath := "c/golang/hello.go"
    file,err := os.OpenFile(filePath,os.O_WRONLY | os.O_CREATE,0666)
    if err != nil{
        fmt.Printf("open file err=%v\n",err)
        return
    }   
    defer file.Close()
    //å†™å…¥
    str := "hello word\n"  //\nè¡¨ç¤ºæ¢è¡Œ
    writer := bufio.NewWriter(file)
    //writer æ˜¯å¸¦ç¼“å­˜çš„
    for i:=0;i<5;i++{
        writer.WriterString(str)
    }   
    writer.Flush()
}
```



**åœ¨åŸæ¥åŸºç¡€ä¸Šè¯»å†™å’Œè¿½åŠ **

```
 file,err := os.OpenFile(filePath,os.O_O_RDWR | os.O_APPEND,0666)
```



## golangåˆ¤æ–­æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨

**golangåˆ¤æ–­æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨çš„æ–¹æ³•ä¸ºä½¿ç”¨os.Stat()å‡½æ•°è¿”å›çš„é”™è¯¯å€¼è¿›è¡Œåˆ¤æ–­**

1. å¦‚æœè¿”å›çš„é”™è¯¯ä¸ºnil,è¯´æ˜æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ä¸å­˜åœ¨
2. å¦‚æœè¿”å›çš„é”™è¯¯ç±»å‹ä¸ºos.lsNotExist()åˆ¤æ–­ä¸ºtrue,è¯´æ˜æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ä¸å­˜åœ¨
3. å¦‚æœè¿”å›å€¼çš„é”™è¯¯ç±»å‹ä¸ºå…¶ä»–ç±»å‹ï¼Œåˆ™ä¸ç¡®å®šæ˜¯å¦å­˜åœ¨



> è‡ªå·±å†™äº†ä¸€ä¸ªå‡½æ•°   â€“  å¯ä»¥ç›´æ¥ç”¨

```go
func PathExists(path string)(bool,error){  //ä¼ é€è·¯å¾„path
	_,err := os.Stat(path)
	if err == nil {
	//æ–‡ä»¶æˆ–è€…ç›®å½•å­˜åœ¨
		return true,nil
	}
	if os.lsNotExist(err){
		return false,nil
	}
	return false,err    //å¯èƒ½æœ‰å…¶ä»–çš„é”™è¯¯ä¿¡æ¯
}
```





## æ‹·è´ï¼ˆå¤åˆ¶ï¼‰æ–‡ä»¶

::: detå¤åˆ¶æ–‡ä»¶å¯ä»¥ç”¨å†™å…¥æ–¹å¼
å¤åˆ¶æ–‡ä»¶æ–¹æ³•ï¼š
1. æ‰“å¼€æºæ–‡ä»¶ srcFile, err := os.Open("test.txt")
2. åˆ›å»ºç›®æ ‡æ–‡ä»¶ dstFile, err := os.Create("test_copy.txt")
3. åˆ›å»ºä¸€ä¸ª *Reader æ˜¯å¸¦ç¼“å†²çš„ reader := bufio.NewReader(srcFile)
4. åˆ›å»ºä¸€ä¸ª *Writer æ˜¯å¸¦ç¼“å†²çš„ writer := bufio.NewWriter(dstFile)
5. å¾ªç¯çš„è°ƒç”¨ reader.ReadString('\n') è¯»å–æ–‡ä»¶çš„å†…å®¹
6. è°ƒç”¨ writer.WriteString(str) å°†è¯»å–åˆ°çš„å†…å®¹å†™å…¥åˆ°ç›®æ ‡æ–‡ä»¶ä¸­
7. è°ƒç”¨ writer.Flush() å°†ç¼“å†²åŒºçš„å†…å®¹å†™å…¥åˆ°ç›®æ ‡æ–‡ä»¶ä¸­
8. å…³é—­æ–‡ä»¶ defer srcFile.Close()

:::



**ç›®æ ‡æ–‡ä»¶dstï¼ŒåŸæ–‡ä»¶src**

```go
func Copy(dst Writer,src Reader) (written int64,err error)
```

**Copyå‡½æ•°æ˜¯ioåŒ…æä¾›çš„**

```go
package main
import (
	"fmt"
	"os"
	"io"
	"bufio" 
)

//è‡ªå·±ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸¤ä¸ªæ–‡ä»¶è·¯å¾„ srcFileName dstFileName
func CopyFile(dstFileName string, srcFileName string) (written int64, err error) {
	srcFile, err := os.Open(srcFileName)
	if err != nil {
		fmt.Printf("open file err=%v\n", err)
	}
	defer srcFile.Close()
	//é€šè¿‡srcfile ,è·å–åˆ° Reader
	reader := bufio.NewReader(srcFile)

	//æ‰“å¼€dstFileName
	dstFile, err := os.OpenFile(dstFileName, os.O_WRONLY | os.O_CREATE, 0666)
	if err != nil {
		fmt.Printf("open file err=%v\n", err)
		return 
	}

	//é€šè¿‡dstFile, è·å–åˆ° Writer
	writer := bufio.NewWriter(dstFile)
	defer dstFile.Close()
	return io.Copy(writer, reader)
}

func main() {

	//å°†d:/flower.jpg æ–‡ä»¶æ‹·è´åˆ° e:/abc.jpg

	//è°ƒç”¨CopyFile å®Œæˆæ–‡ä»¶æ‹·è´
	srcFile := "d:/flower.jpg"
	dstFile := "e:/abc.jpg"
	_, err := CopyFile(dstFile, srcFile)
	if err == nil {
		fmt.Printf("æ‹·è´å®Œæˆ\n")
	} else {
		fmt.Printf("æ‹·è´é”™è¯¯ err=%v\n", err)
	}
	
}
```



## ç»Ÿè®¡è‹±æ–‡ã€æ•°å­—ã€ç©ºæ ¼å’Œå…¶ä»–å­—ç¬¦æ•°é‡

```go
package main
import (
	"fmt"
	"os"
	"io"
	"bufio" 
)

//å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œç”¨äºä¿å­˜ç»Ÿè®¡ç»“æœ
type CharCount struct {
	ChCount int // è®°å½•è‹±æ–‡ä¸ªæ•°
	NumCount int // è®°å½•æ•°å­—çš„ä¸ªæ•°
	SpaceCount int // è®°å½•ç©ºæ ¼çš„ä¸ªæ•°
	OtherCount int // è®°å½•å…¶å®ƒå­—ç¬¦çš„ä¸ªæ•°
}

func main() {

	//æ€è·¯: æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶, åˆ›ä¸€ä¸ªReader
	//æ¯è¯»å–ä¸€è¡Œï¼Œå°±å»ç»Ÿè®¡è¯¥è¡Œæœ‰å¤šå°‘ä¸ª è‹±æ–‡ã€æ•°å­—ã€ç©ºæ ¼å’Œå…¶ä»–å­—ç¬¦
	//ç„¶åå°†ç»“æœä¿å­˜åˆ°ä¸€ä¸ªç»“æ„ä½“
	fileName := "c/golang/hello.go"
	file, err := os.Open(fileName)
	if err != nil {
		fmt.Printf("open file err=%v\n", err)
		return
	}
	defer file.Close()
	//å®šä¹‰ä¸ªCharCount å®ä¾‹
	var count CharCount
	//åˆ›å»ºä¸€ä¸ªReader
	reader := bufio.NewReader(file)

	//å¼€å§‹å¾ªç¯çš„è¯»å–fileNameçš„å†…å®¹
	for {
		str, err := reader.ReadString('\n')
		if err == io.EOF { //è¯»åˆ°æ–‡ä»¶æœ«å°¾å°±é€€å‡º
			break
		}
		//éå† str ï¼Œè¿›è¡Œç»Ÿè®¡
		for _, v := range str {
			
			switch {  //æ— é¡¹ç›®ï¼Œç›¸å½“äºåˆ†æ”¯ç»“æ„
				case v >= 'a' && v <= 'z':
						fallthrough         //ç©¿é€
				case v >= 'A' && v <= 'Z':
						count.ChCount++
				case v == ' ' || v == '\t':
						count.SpaceCount++
				case v >= '0' && v <= '9':
						count.NumCount++
				default :
						count.OtherCount++
			}
		}
	}

	//è¾“å‡ºç»Ÿè®¡çš„ç»“æœçœ‹çœ‹æ˜¯å¦æ­£ç¡®
	fmt.Printf("å­—ç¬¦çš„ä¸ªæ•°ä¸º=%v æ•°å­—çš„ä¸ªæ•°ä¸º=%v ç©ºæ ¼çš„ä¸ªæ•°ä¸º=%v å…¶å®ƒå­—ç¬¦ä¸ªæ•°=%v", 
		count.ChCount, count.NumCount, count.SpaceCount, count.OtherCount)
}
```



**ç¼–è¯‘**

```shell
[root@mail golang]# go run iouit.go 
å­—ç¬¦çš„ä¸ªæ•°ä¸º=199 æ•°å­—çš„ä¸ªæ•°ä¸º=18 ç©ºæ ¼çš„ä¸ªæ•°ä¸º=73 å…¶å®ƒå­—ç¬¦ä¸ªæ•°=108
```

[å›åˆ°ä¸Šé¢](# 45å¤©å­¦ä¼šgo --ç¬¬åäº”å¤©   æ–‡ä»¶)



## pythonä¸­çš„æ–‡ä»¶æ“ä½œ

ä½¿ç”¨openå‡½æ•°ï¼Œå¯ä»¥æ‰“å¼€ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ–‡ä»¶ï¼Œæˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶

**f=open("new.py","w")**

**r:  ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚æ–‡ä»¶çš„æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯\**é»˜è®¤æ¨¡å¼\**ã€‚**

rb: ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºåªè¯»ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚

r+: æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚

rb+:ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚

**w:  æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™å°†å…¶è¦†ç›–ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚**

wb:  ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™å°†å…¶è¦†ç›–ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚

w+:  æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™å°†å…¶è¦†ç›–ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚

wb+:ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™å°†å…¶è¦†ç›–ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚

a:  æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚

ab:  ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚

a+:  æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚æ–‡ä»¶æ‰“å¼€æ—¶ä¼šæ˜¯è¿½åŠ æ¨¡å¼ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚

ab+:ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚



**å°†hello word ,I am hereå†™å…¥åˆ°zidian.pyä¸­**

**f.write :å†™å…¥**

**content=f.read(5)**   **è¯»å–5ä¸ªå­—ç¬¦ï¼Œå¼€å§‹çš„æ—¶å€™å®šä¹‰åœ¨æ–‡ä»¶å¤´éƒ¨**

**content=f.read(5)**   æ¥ç€ä¸Šä¸€æ¬¡ç»§ç»­è¯»å–5ä¸ª

**f.close :** **å…³é—­æ–‡ä»¶**

rename()å®Œæˆæ–‡ä»¶çš„é‡å‘½å

 

```python
In [9]: f=open("zz.go","r")                                    

In [10]: r=f.readlines()                                       

In [11]: i=1                                                   

In [12]: for temp in r: 
    ...:     print("%d:%s"%(i,temp)) 
    ...:     i+=1 
    ...:                                                       

In [13]: !vim zz.go                                            

In [14]: f=open("a.go","r")                                    

In [15]: r=f.readlines()                                       

In [16]: for temp in r: 
    ...:     print("%d:%s"%(i,temp)) 
    ...:     i+=1 
    ...:                                                       
1:package main

2:

3:import (

4:    "fmt"

5:    "time"

6:)

```



## END é“¾æ¥

<ul><li><div><a href = '14.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '16.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; :æœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

