+ [ğŸ”¥ å¼€æºåœ°å€](https://github.com/cubxxw/iam)

# ç¬¬47èŠ‚

<br>
<div><a href = '46.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '48.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>

> â¤ï¸ğŸ’•ğŸ’•During the winter vacation, I followed up and learned two projects: tiktok project and IAM project, and summarized and practiced the CloudNative project and Go language. I learned a lot in the process.Myblog:[http://nsddd.top](http://nsddd.top/)

---
[[TOC]]
[TOC]

ä»Šå¤©æˆ‘ä»¬æ›´æ–°ä¸€æœŸç‰¹åˆ«æ”¾é€ä½œä¸ºåŠ é¤ã€‚åœ¨ [ç‰¹åˆ«æ”¾é€ | Go Modulesä¾èµ–åŒ…ç®¡ç†å…¨è®²](https://time.geekbang.org/column/article/416397)ä¸­ï¼Œæˆ‘ä»‹ç»äº†Go Modulesçš„çŸ¥è¯†ï¼Œé‡Œé¢å†…å®¹æ¯”è¾ƒå¤šï¼Œä½ å¯èƒ½è¿˜ä¸çŸ¥é“å…·ä½“æ€ä¹ˆä½¿ç”¨Go Modulesæ¥ä¸ºä½ çš„é¡¹ç›®ç®¡ç†Goä¾èµ–åŒ…ã€‚

è¿™ä¸€è®²ï¼Œæˆ‘å°±é€šè¿‡ä¸€ä¸ªå…·ä½“çš„æ¡ˆä¾‹ï¼Œå¸¦ä½ ä¸€æ­¥æ­¥å­¦ä¹ Go Modulesçš„å¸¸è§ç”¨æ³•ä»¥åŠæ“ä½œæ–¹æ³•ï¼Œå…·ä½“åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

1. å‡†å¤‡ä¸€ä¸ªæ¼”ç¤ºé¡¹ç›®ã€‚
2. é…ç½®Go Modulesã€‚
3. åˆå§‹åŒ–GoåŒ…ä¸ºGoæ¨¡å—ã€‚
4. GoåŒ…ä¾èµ–ç®¡ç†ã€‚

## å‡†å¤‡ä¸€ä¸ªæ¼”ç¤ºé¡¹ç›®

ä¸ºäº†æ¼”ç¤ºGo Modulesçš„ç”¨æ³•ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ä¸€ä¸ªDemoé¡¹ç›®ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªhelloçš„é¡¹ç›®ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯hello.goå’Œhello_test.goï¼Œæ‰€åœ¨ç›®å½•ä¸º`/home/lk/workspace/golang/src/github.com/marmotedu/gopractise-demo/modules/hello`ã€‚

hello.goæ–‡ä»¶å†…å®¹ä¸ºï¼š

```go
package hellofunc Hello() string {	return "Hello, world."}
```

hello_test.goæ–‡ä»¶å†…å®¹ä¸ºï¼š

```go
package helloimport "testing"func TestHello(t *testing.T) {	want := "Hello, world."	if got := Hello(); got != want {		t.Errorf("Hello() = %q, want %q", got, want)	}}
```

è¿™æ—¶å€™ï¼Œè¯¥ç›®å½•åŒ…å«äº†ä¸€ä¸ªGoåŒ…ï¼Œä½†è¿˜ä¸æ˜¯Goæ¨¡å—ï¼Œå› ä¸ºæ²¡æœ‰go.modä»¶ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°±ç»™ä½ æ¼”ç¤ºä¸‹ï¼Œå¦‚ä½•å°†è¿™ä¸ªåŒ…å˜æˆä¸€ä¸ªGoæ¨¡å—ï¼Œå¹¶æ‰§è¡ŒGoä¾èµ–åŒ…çš„ç®¡ç†æ“ä½œã€‚è¿™äº›æ“ä½œå…±æœ‰10ä¸ªæ­¥éª¤ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä¸€æ­¥æ­¥çœ‹ä¸‹ã€‚

## é…ç½®Go Modules

1. æ‰“å¼€Go Modules

ç¡®ä¿Goç‰ˆæœ¬`>=go1.11`ï¼Œå¹¶å¼€å¯Go Modulesï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡`export GO111MODULE=on`å¼€å¯ã€‚å¦‚æœä½ è§‰å¾—æ¯æ¬¡éƒ½è®¾ç½®æ¯”è¾ƒç¹çï¼Œå¯ä»¥å°†`export GO111MODULE=on`è¿½åŠ åˆ°æ–‡ä»¶`$HOME/.bashrc`ä¸­ï¼Œå¹¶æ‰§è¡Œ `bash` å‘½ä»¤åŠ è½½åˆ°å½“å‰shellç¯å¢ƒä¸­ã€‚

1. è®¾ç½®ç¯å¢ƒå˜é‡

å¯¹äºå›½å†…çš„å¼€å‘è€…æ¥è¯´ï¼Œéœ€è¦è®¾ç½®`export GOPROXY=https://goproxy.cn,direct`ï¼Œè¿™æ ·ä¸€äº›è¢«å¢™çš„åŒ…å¯ä»¥é€šè¿‡å›½å†…çš„é•œåƒæºå®‰è£…ã€‚å¦‚æœæˆ‘ä»¬æœ‰ä¸€äº›æ¨¡å—å­˜æ”¾åœ¨ç§æœ‰ä»“åº“ä¸­ï¼Œä¹Ÿéœ€è¦è®¾ç½®GOPRIVATEç¯å¢ƒå˜é‡ã€‚

å› ä¸ºGo Modulesä¼šè¯·æ±‚Go Checksum Databaseï¼ŒChecksum Databaseå›½å†…ä¹Ÿå¯èƒ½ä¼šè®¿é—®å¤±è´¥ï¼Œå¯ä»¥è®¾ç½®`export GOSUMDB=off`æ¥å…³é—­Checksumæ ¡éªŒã€‚å¯¹äºä¸€äº›æ¨¡å—ï¼Œå¦‚æœä½ å¸Œæœ›ä¸é€šè¿‡ä»£ç†æœåŠ¡å™¨ï¼Œæˆ–è€…ä¸æ ¡éªŒ`checksum`ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è®¾ç½®GONOPROXYå’ŒGONOSUMDBã€‚

## åˆå§‹åŒ–GoåŒ…ä¸ºGoæ¨¡å—

1. åˆ›å»ºä¸€ä¸ªæ–°æ¨¡å—

ä½ å¯ä»¥é€šè¿‡`go mod init`å‘½ä»¤ï¼Œåˆå§‹åŒ–é¡¹ç›®ä¸ºGo Modulesã€‚ `init` å‘½ä»¤ä¼šåœ¨å½“å‰ç›®å½•åˆå§‹åŒ–å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„go.modæ–‡ä»¶ï¼Œä¹Ÿä»£è¡¨ç€åˆ›å»ºäº†ä¸€ä¸ªä»¥é¡¹ç›®æ ¹ç›®å½•ä¸ºæ ¹çš„Go Modulesã€‚å¦‚æœå½“å‰ç›®å½•å·²ç»å­˜åœ¨go.modæ–‡ä»¶ï¼Œåˆ™ä¼šåˆå§‹åŒ–å¤±è´¥ã€‚

åœ¨åˆå§‹åŒ–Go Modulesæ—¶ï¼Œéœ€è¦å‘ŠçŸ¥`go mod init`è¦åˆå§‹åŒ–çš„æ¨¡å—åï¼Œå¯ä»¥æŒ‡å®šæ¨¡å—åï¼Œä¾‹å¦‚`go mod init github.com/marmotedu/gopractise-demo/modules/hello`ã€‚ä¹Ÿå¯ä»¥ä¸æŒ‡å®šæ¨¡å—åï¼Œè®©`init`è‡ªå·±æ¨å¯¼ã€‚ä¸‹é¢æˆ‘æ¥ä»‹ç»ä¸‹æ¨å¯¼è§„åˆ™ã€‚

+ å¦‚æœæœ‰å¯¼å…¥è·¯å¾„æ³¨é‡Šï¼Œåˆ™ä½¿ç”¨æ³¨é‡Šä½œä¸ºæ¨¡å—åï¼Œæ¯”å¦‚ï¼š

```bash
package hello // import "github.com/marmotedu/gopractise-demo/modules/hello"
```

åˆ™æ¨¡å—åä¸º`github.com/marmotedu/gopractise-demo/modules/hello`ã€‚

+ å¦‚æœæ²¡æœ‰å¯¼å…¥è·¯å¾„æ³¨é‡Šï¼Œå¹¶ä¸”é¡¹ç›®ä½äºGOPATHè·¯å¾„ä¸‹ï¼Œåˆ™æ¨¡å—åä¸ºç»å¯¹è·¯å¾„å»æ‰`$GOPATH/src`åçš„è·¯å¾„åï¼Œä¾‹å¦‚`GOPATH=/home/lk/workspace/golang`ï¼Œé¡¹ç›®ç»å¯¹è·¯å¾„ä¸º`/home/colin/workspace/golang/src/github.com/marmotedu/gopractise-demo/modules/hello`ï¼Œåˆ™æ¨¡å—åä¸º`github.com/marmotedu/gopractise-demo/modules/hello`ã€‚

åˆå§‹åŒ–å®Œæˆä¹‹åï¼Œä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸€ä¸ªgo.modæ–‡ä»¶ï¼š

```bash
$ cat go.modmodule github.com/marmotedu/gopractise-demo/modules/hellogo 1.14
```

æ–‡ä»¶å†…å®¹è¡¨æ˜ï¼Œå½“å‰æ¨¡å—çš„å¯¼å…¥è·¯å¾„ä¸º`github.com/marmotedu/gopractise-demo/modules/hello`ï¼Œä½¿ç”¨çš„Goç‰ˆæœ¬æ˜¯`go 1.14`ã€‚

å¦‚æœè¦æ–°å¢å­ç›®å½•åˆ›å»ºæ–°çš„packageï¼Œåˆ™packageçš„å¯¼å…¥è·¯å¾„è‡ªåŠ¨ä¸º `æ¨¡å—å/å­ç›®å½•å` ï¼š`github.com/marmotedu/gopractise-demo/modules/hello/<sub-package-name>`ï¼Œä¸éœ€è¦åœ¨å­ç›®å½•ä¸­å†æ¬¡æ‰§è¡Œ`go mod init`ã€‚

æ¯”å¦‚ï¼Œæˆ‘ä»¬åœ¨helloç›®å½•ä¸‹åˆåˆ›å»ºäº†ä¸€ä¸ªworldåŒ…`world/world.go`ï¼Œåˆ™worldåŒ…çš„å¯¼å…¥è·¯å¾„ä¸º`github.com/marmotedu/gopractise-demo/modules/hello/world`ã€‚

## GoåŒ…ä¾èµ–ç®¡ç†

1. å¢åŠ ä¸€ä¸ªä¾èµ–

Go Modulesä¸»è¦æ˜¯ç”¨æ¥å¯¹åŒ…ä¾èµ–è¿›è¡Œç®¡ç†çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬æ¥ç»™helloåŒ…å¢åŠ ä¸€ä¸ªä¾èµ–`rsc.io/quote`ï¼š

```go
package helloimport "rsc.io/quote"func Hello() string {	return quote.Hello()}
```

è¿è¡Œ`go test`ï¼š

```bash
$ go testgo: finding module for package rsc.io/quotego: downloading rsc.io/quote v1.5.2go: found rsc.io/quote in rsc.io/quote v1.5.2go: downloading rsc.io/sampler v1.3.0PASSok  	github.com/google/addlicense/golang/src/github.com/marmotedu/gopractise-demo/modules/hello	0.003s
```

å½“goå‘½ä»¤åœ¨è§£ææºç æ—¶ï¼Œé‡åˆ°éœ€è¦å¯¼å…¥ä¸€ä¸ªæ¨¡å—çš„æƒ…å†µï¼Œå°±ä¼šå»go.modæ–‡ä»¶ä¸­æŸ¥è¯¢è¯¥æ¨¡å—çš„ç‰ˆæœ¬ï¼Œå¦‚æœæœ‰æŒ‡å®šç‰ˆæœ¬ï¼Œå°±å¯¼å…¥æŒ‡å®šçš„ç‰ˆæœ¬ã€‚

å¦‚æœæ²¡æœ‰æŸ¥è¯¢åˆ°è¯¥æ¨¡å—ï¼Œgoå‘½ä»¤ä¼šè‡ªåŠ¨æ ¹æ®æ¨¡å—çš„å¯¼å…¥è·¯å¾„å®‰è£…æ¨¡å—ï¼Œå¹¶å°†æ¨¡å—å’Œå…¶æœ€æ–°çš„ç‰ˆæœ¬å†™å…¥go.modæ–‡ä»¶ä¸­ã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œ`go test`å°†æ¨¡å—`rsc.io/quote`è§£æä¸º`rsc.io/quote v1.5.2`ï¼Œå¹¶ä¸”åŒæ—¶è¿˜ä¸‹è½½äº†`rsc.io/quote`æ¨¡å—çš„ä¸¤ä¸ªä¾èµ–æ¨¡å—ï¼š`rsc.io/quote`å’Œ`rsc.io/sampler`ã€‚åªæœ‰ç›´æ¥ä¾èµ–æ‰ä¼šè¢«è®°å½•åˆ°go.modæ–‡ä»¶ä¸­ã€‚

æŸ¥çœ‹go.modæ–‡ä»¶ï¼š

```bash
module github.com/marmotedu/gopractise-demo/modules/hellogo 1.14require rsc.io/quote v1.5.2
```

å†æ¬¡æ‰§è¡Œ`go test`ï¼š

```bash
$ go testPASSok  	github.com/marmotedu/gopractise-demo/modules/hello	0.003s
```

å½“æˆ‘ä»¬å†æ¬¡æ‰§è¡Œ`go test`æ—¶ï¼Œä¸ä¼šå†ä¸‹è½½å¹¶è®°å½•éœ€è¦çš„æ¨¡å—ï¼Œå› ä¸ºgo.modç›®å‰æ˜¯æœ€æ–°çš„ï¼Œå¹¶ä¸”éœ€è¦çš„æ¨¡å—å·²ç»ç¼“å­˜åˆ°äº†æœ¬åœ°çš„`$GOPATH/pkg/mod`ç›®å½•ä¸‹ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å½“å‰ç›®å½•è¿˜æ–°ç”Ÿæˆäº†ä¸€ä¸ªgo.sumæ–‡ä»¶ï¼š

```bash
$ cat go.sumgolang.org/x/text v0.0.0-20170915032832-14c0d48ead0c h1:qgOY6WgZOaTkIIMiVjBQcw93ERBE4m30iBm00nkL0i8=golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c/go.mod h1:NqM8EUOU14njkJ3fqMW+pc6Ldnwhi/IjpwHt7yyuwOQ=rsc.io/quote v1.5.2 h1:w5fcysjrx7yqtD/aO+QwRjYZOKnaM9Uh2b40tElTs3Y=rsc.io/quote v1.5.2/go.mod h1:LzX7hefJvL54yjefDEDHNONDjII0t9xZLPXsUe+TKr0=rsc.io/sampler v1.3.0 h1:7uVkIFmeBqHfdjD+gZwtXXI+RODJ2Wc4O7MPEh/QiW4=rsc.io/sampler v1.3.0/go.mod h1:T1hPZKmBbMNahiBKFy5HrXp6adAjACjK9JXDnKaTXpA=
```

`go test`åœ¨æ‰§è¡Œæ—¶ï¼Œè¿˜å¯ä»¥æ·»åŠ `-mod`é€‰é¡¹ï¼Œæ¯”å¦‚`go test -mod=vendor`ã€‚`-mod`æœ‰3ä¸ªå€¼ï¼Œæˆ‘æ¥åˆ†åˆ«ä»‹ç»ä¸‹ã€‚

+ readonlyï¼šä¸æ›´æ–°go.modï¼Œä»»ä½•å¯èƒ½ä¼šå¯¼è‡´go.modå˜æ›´çš„æ“ä½œéƒ½ä¼šå¤±è´¥ã€‚é€šå¸¸ç”¨æ¥æ£€æŸ¥go.modæ–‡ä»¶æ˜¯å¦éœ€è¦æ›´æ–°ï¼Œä¾‹å¦‚ç”¨åœ¨CIæˆ–è€…æµ‹è¯•åœºæ™¯ã€‚
+ vendorï¼šä»é¡¹ç›®é¡¶å±‚ç›®å½•ä¸‹çš„vendorä¸­å¯¼å…¥åŒ…ï¼Œè€Œä¸æ˜¯ä»æ¨¡å—ç¼“å­˜ä¸­å¯¼å…¥åŒ…ï¼Œéœ€è¦ç¡®ä¿vendoråŒ…å®Œæ•´å‡†ç¡®ã€‚
+ modï¼šä»æ¨¡å—ç¼“å­˜ä¸­å¯¼å…¥åŒ…ï¼Œå³ä½¿é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰vendorç›®å½•ã€‚

å¦‚æœ`go test`æ‰§è¡Œæ—¶æ²¡æœ‰`-mod`é€‰é¡¹ï¼Œå¹¶ä¸”é¡¹ç›®æ ¹ç›®å½•å­˜åœ¨vendorç›®å½•ï¼Œgo.modä¸­è®°å½•çš„goç‰ˆæœ¬å¤§äºç­‰äº`1.14`ï¼Œæ­¤æ—¶`go test`æ‰§è¡Œæ•ˆæœç­‰æ•ˆäº`go test -mod=vendor`ã€‚`-mod`æ ‡å¿—åŒæ ·é€‚ç”¨äºgo buildã€go installã€go runã€go testã€go listã€go vetå‘½ä»¤ã€‚

1. æŸ¥çœ‹æ‰€æœ‰ä¾èµ–æ¨¡å—

æˆ‘ä»¬å¯ä»¥é€šè¿‡`go list -m all`å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰ä¾èµ–æ¨¡å—ï¼š

```bash
$ go list -m allgithub.com/marmotedu/gopractise-demo/modules/hellogolang.org/x/text v0.0.0-20170915032832-14c0d48ead0crsc.io/quote v1.5.2rsc.io/sampler v1.3.0
```

å¯ä»¥çœ‹å‡ºï¼Œé™¤äº†`rsc.io/quote v1.5.2`å¤–ï¼Œè¿˜é—´æ¥ä¾èµ–äº†å…¶ä»–æ¨¡å—ã€‚

1. æ›´æ–°ä¾èµ–

é€šè¿‡`go list -m all`ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¨¡å—ä¾èµ–çš„`golang.org/x/text`æ¨¡å—ç‰ˆæœ¬æ˜¯`v0.0.0`ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`go get`å‘½ä»¤ï¼Œå°†å…¶æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶è§‚å¯Ÿæµ‹è¯•æ˜¯å¦é€šè¿‡ï¼š

```bash
$ go get golang.org/x/textgo: golang.org/x/text upgrade => v0.3.3$ go testPASSok  	github.com/marmotedu/gopractise-demo/modules/hello	0.003s
```

`go test`å‘½ä»¤æ‰§è¡Œåè¾“å‡ºPASSè¯´æ˜å‡çº§æˆåŠŸï¼Œå†æ¬¡çœ‹ä¸‹`go list -m all`å’Œgo.modæ–‡ä»¶ï¼š

```bash
$ go list -m allgithub.com/marmotedu/gopractise-demo/modules/hellogolang.org/x/text v0.3.3golang.org/x/tools v0.0.0-20180917221912-90fa682c2a6ersc.io/quote v1.5.2rsc.io/sampler v1.3.0$ cat go.modmodule github.com/marmotedu/gopractise-demo/modules/hellogo 1.14require (	golang.org/x/text v0.3.3 // indirect	rsc.io/quote v1.5.2)
```

å¯ä»¥çœ‹åˆ°ï¼Œ`golang.org/x/text`åŒ…è¢«æ›´æ–°åˆ°æœ€æ–°çš„tagç‰ˆæœ¬(`v0.3.3`)ï¼Œå¹¶ä¸”åŒæ—¶æ›´æ–°äº†go.modæ–‡ä»¶ã€‚`// indirect`è¯´æ˜`golang.org/x/text`æ˜¯é—´æ¥ä¾èµ–ã€‚ç°åœ¨æˆ‘ä»¬å†å°è¯•æ›´æ–°`rsc.io/sampler`å¹¶æµ‹è¯•ï¼š

```bash
$ go get rsc.io/samplergo: rsc.io/sampler upgrade => v1.99.99go: downloading rsc.io/sampler v1.99.99$ go test--- FAIL: TestHello (0.00s)    hello_test.go:8: Hello() = "99 bottles of beer on the wall, 99 bottles of beer, ...", want "Hello, world."FAILexit status 1FAIL	github.com/marmotedu/gopractise-demo/modules/hello	0.004s
```

æµ‹è¯•å¤±è´¥ï¼Œè¯´æ˜æœ€æ–°çš„ç‰ˆæœ¬`v1.99.99`ä¸æˆ‘ä»¬å½“å‰çš„æ¨¡å—ä¸å…¼å®¹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ—å‡º`rsc.io/sampler`æ‰€æœ‰å¯ç”¨çš„ç‰ˆæœ¬ï¼Œå¹¶å°è¯•æ›´æ–°åˆ°å…¶ä»–ç‰ˆæœ¬ï¼š

```bash
$ go list -m -versions rsc.io/samplerrsc.io/sampler v1.0.0 v1.2.0 v1.2.1 v1.3.0 v1.3.1 v1.99.99# æˆ‘ä»¬å°è¯•é€‰æ‹©ä¸€ä¸ªæ¬¡æ–°çš„ç‰ˆæœ¬v1.3.1$ go get rsc.io/sampler@v1.3.1go: downloading rsc.io/sampler v1.3.1$ go testPASSok  	github.com/marmotedu/gopractise-demo/modules/hello	0.004s
```

å¯ä»¥çœ‹åˆ°ï¼Œæ›´æ–°åˆ°`v1.3.1`ç‰ˆæœ¬ï¼Œæµ‹è¯•æ˜¯é€šè¿‡çš„ã€‚`go get`è¿˜æ”¯æŒå¤šç§å‚æ•°ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š

[![img](https://static001.geekbang.org/resource/image/2b/f6/2b80e94c1e91bb18dea9c20695b25bf6.jpg?wh=2248x1496)](https://static001.geekbang.org/resource/image/2b/f6/2b80e94c1e91bb18dea9c20695b25bf6.jpg?wh=2248x1496)

1. æ·»åŠ ä¸€ä¸ªæ–°çš„majorç‰ˆæœ¬ä¾èµ–

æˆ‘ä»¬å°è¯•æ·»åŠ ä¸€ä¸ªæ–°çš„å‡½æ•°`func Proverb`ï¼Œè¯¥å‡½æ•°é€šè¿‡è°ƒç”¨`rsc.io/quote/v3`çš„`quote.Concurrency`å‡½æ•°å®ç°ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨hello.goæ–‡ä»¶ä¸­æ·»åŠ æ–°å‡½æ•°ï¼š

```go
package helloimport (	"rsc.io/quote"	quoteV3 "rsc.io/quote/v3")func Hello() string {	return quote.Hello()}func Proverb() string {	return quoteV3.Concurrency()}
```

åœ¨hello_test.goä¸­æ·»åŠ è¯¥å‡½æ•°çš„æµ‹è¯•ç”¨ä¾‹ï¼š

```go
func TestProverb(t *testing.T) {    want := "Concurrency is not parallelism."    if got := Proverb(); got != want {        t.Errorf("Proverb() = %q, want %q", got, want)    }}
```

ç„¶åæ‰§è¡Œæµ‹è¯•ï¼š

```bash
$ go testgo: finding module for package rsc.io/quote/v3go: found rsc.io/quote/v3 in rsc.io/quote/v3 v3.1.0PASSok  	github.com/marmotedu/gopractise-demo/modules/hello	0.003s
```

æµ‹è¯•é€šè¿‡ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æ¨¡å—åŒæ—¶ä¾èµ–äº†åŒä¸€ä¸ªæ¨¡å—çš„ä¸åŒç‰ˆæœ¬`rsc.io/quote`å’Œ`rsc.io/quote/v3`ï¼š

```bash
$ go list -m rsc.io/q...rsc.io/quote v1.5.2rsc.io/quote/v3 v3.1.0
```

1. å‡çº§åˆ°ä¸å…¼å®¹çš„ç‰ˆæœ¬

åœ¨ä¸Šä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨`rsc.io/quote v1`ç‰ˆæœ¬çš„`Hello()`å‡½æ•°ã€‚æŒ‰ç…§è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„åˆ™ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å‡çº§`major`ç‰ˆæœ¬ï¼Œå¯èƒ½é¢ä¸´æ¥å£ä¸å…¼å®¹çš„é—®é¢˜ï¼Œéœ€è¦æˆ‘ä»¬å˜æ›´ä»£ç ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹`rsc.io/quote/v3`çš„å‡½æ•°ï¼š

```bash
$ go doc rsc.io/quote/v3package quote // import "github.com/google/addlicense/golang/pkg/mod/rsc.io/quote/v3@v3.1.0"Package quote collects pithy sayings.func Concurrency() stringfunc GlassV3() stringfunc GoV3() stringfunc HelloV3() stringfunc OptV3() string
```

å¯ä»¥çœ‹åˆ°ï¼Œ`Hello()`å‡½æ•°å˜æˆäº†`HelloV3()`ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬å˜æ›´ä»£ç åšé€‚é…ã€‚å› ä¸ºæˆ‘ä»¬éƒ½ç»Ÿä¸€æ¨¡å—åˆ°ä¸€ä¸ªç‰ˆæœ¬äº†ï¼Œè¿™æ—¶å€™å°±ä¸éœ€è¦å†ä¸ºäº†é¿å…é‡åè€Œé‡å‘½åæ¨¡å—ï¼Œæ‰€ä»¥æ­¤æ—¶hello.goå†…å®¹ä¸ºï¼š

```go
package helloimport (	"rsc.io/quote/v3")func Hello() string {	return quote.HelloV3()}func Proverb() string {	return quote.Concurrency()}
```

æ‰§è¡Œ`go test`ï¼š

```bash
$ go testPASSok  	github.com/marmotedu/gopractise-demo/modules/hello	0.003s
```

å¯ä»¥çœ‹åˆ°æµ‹è¯•æˆåŠŸã€‚

1. åˆ é™¤ä¸ä½¿ç”¨çš„ä¾èµ–

åœ¨ä¸Šä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬ç§»é™¤äº†`rsc.io/quote`åŒ…ï¼Œä½†æ˜¯å®ƒä»ç„¶å­˜åœ¨äº`go list -m all`å’Œgo.modä¸­ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¦æ‰§è¡Œ`go mod tidy`æ¸…ç†ä¸å†ä½¿ç”¨çš„ä¾èµ–ï¼š

```bash
$ go mod tidy[colin@dev hello]$ cat go.modmodule github.com/marmotedu/gopractise-demo/modules/hellogo 1.14require (	golang.org/x/text v0.3.3 // indirect	rsc.io/quote/v3 v3.1.0	rsc.io/sampler v1.3.1 // indirect)
```

1. ä½¿ç”¨vendor

å¦‚æœæˆ‘ä»¬æƒ³æŠŠæ‰€æœ‰ä¾èµ–éƒ½ä¿å­˜èµ·æ¥ï¼Œåœ¨Goå‘½ä»¤æ‰§è¡Œæ—¶ä¸å†ä¸‹è½½ï¼Œå¯ä»¥æ‰§è¡Œ`go mod vendor`ï¼Œè¯¥å‘½ä»¤ä¼šæŠŠå½“å‰é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–éƒ½ä¿å­˜åœ¨é¡¹ç›®æ ¹ç›®å½•çš„vendorç›®å½•ä¸‹ï¼Œä¹Ÿä¼šåˆ›å»º`vendor/modules.txt`æ–‡ä»¶ï¼Œæ¥è®°å½•åŒ…å’Œæ¨¡å—çš„ç‰ˆæœ¬ä¿¡æ¯ï¼š

```bash
$ go mod vendor$ lsgo.mod  go.sum  hello.go  hello_test.go  vendor  world
```

åˆ°è¿™é‡Œï¼Œæˆ‘å°±è®²å®Œäº†Goä¾èµ–åŒ…ç®¡ç†å¸¸ç”¨çš„10ä¸ªæ“ä½œã€‚

## æ€»ç»“

è¿™ä¸€è®²ä¸­ï¼Œæˆ‘è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨Go Modulesæ¥ç®¡ç†ä¾èµ–ï¼Œå®ƒåŒ…æ‹¬ä»¥ä¸‹Go Modulesæ“ä½œï¼š

1. æ‰“å¼€Go Modulesï¼›
2. è®¾ç½®ç¯å¢ƒå˜é‡ï¼›
3. åˆ›å»ºä¸€ä¸ªæ–°æ¨¡å—ï¼›
4. å¢åŠ ä¸€ä¸ªä¾èµ–ï¼›
5. æŸ¥çœ‹æ‰€æœ‰ä¾èµ–æ¨¡å—ï¼›
6. æ›´æ–°ä¾èµ–ï¼›
7. æ·»åŠ ä¸€ä¸ªæ–°çš„majorç‰ˆæœ¬ä¾èµ–ï¼›
8. å‡çº§åˆ°ä¸å…¼å®¹çš„ç‰ˆæœ¬ï¼›
9. åˆ é™¤ä¸ä½¿ç”¨çš„ä¾èµ–ã€‚
10. ä½¿ç”¨vendorã€‚

## è¯¾åç»ƒä¹ 

1. æ€è€ƒä¸‹ï¼Œå¦‚ä½•æ›´æ–°é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Ÿ
2. æ€è€ƒä¸‹ï¼Œå¦‚æœæˆ‘ä»¬çš„ç¼–è¯‘æœºå™¨è®¿é—®ä¸äº†å¤–ç½‘ï¼Œå¦‚ä½•é€šè¿‡Go Modulesä¸‹è½½Goä¾èµ–åŒ…ï¼Ÿ



## END é“¾æ¥
<ul><li><div><a href = '46.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '48.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

