# ç†æ¸… Go ä¸­æ™¦æ¶©éš¾æ‡‚çš„å¯»å€é—®é¢˜

## ä»€ä¹ˆå«å¯å¯»å€ï¼Ÿ

å¯ç›´æ¥ä½¿ç”¨ `&` æ“ä½œç¬¦å–åœ°å€çš„å¯¹è±¡ï¼Œå°±æ˜¯å¯å¯»å€çš„ï¼ˆAddressableï¼‰ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­

```
func main() {
    name := "iswbm"
    fmt.Println(&name)
    // output: 0xc000010200
}
```

ç¨‹åºè¿è¡Œä¸ä¼šæŠ¥é”™ï¼Œè¯´æ˜ name è¿™ä¸ªå˜é‡æ˜¯å¯å¯»å€çš„ã€‚

ä½†ä¸èƒ½è¯´ `"iswbm"` è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯å¯å¯»å€çš„ã€‚

`"iswbm"` æ˜¯å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œæ˜¯ä¸å¯å¯»å€çš„ï¼Œåé¢ä¼šä»‹ç»åˆ°ã€‚

åœ¨å¼€å§‹é€ä¸ªä»‹ç»ä¹‹å‰ï¼Œå…ˆè¯´ä¸€ä¸‹ç»“è®º

- æŒ‡é’ˆå¯ä»¥å¯»å€ï¼š`&Profile{}`
- å˜é‡å¯ä»¥å¯»å€ï¼š`name := Profile{}`
- å­—é¢é‡é€šé€šä¸èƒ½å¯»å€ï¼š`Profile{}`

## å“ªäº›æ˜¯å¯ä»¥å¯»å€çš„ï¼Ÿ

### å˜é‡ï¼š&x

```
func main() {
    name := "iswbm"
    fmt.Println(&name)
    // output: 0xc000010200
}
```

### æŒ‡é’ˆï¼š&*x

```
type Profile struct {
    Name string
}

func main() {
    fmt.Println(unsafe.Pointer(&Profile{Name: "iswbm"}))
    // output: 0xc000108040
}
```

### æ•°ç»„å…ƒç´ ç´¢å¼•: &a[0]

```
func main() {
    s := [...]int{1,2,3}
    fmt.Println(&s[0])
    // output: xc0000b4010
}
```

### åˆ‡ç‰‡

```
func main() {
    fmt.Println([]int{1, 2, 3}[1:])
}
```

### åˆ‡ç‰‡å…ƒç´ ç´¢å¼•ï¼š&s[1]

```
func main() {
    s := make([]int , 2, 2)
    fmt.Println(&s[0])
    // output: xc0000b4010
}
```

### ç»„åˆå­—é¢é‡: &struct{X type}{value}

æ‰€æœ‰çš„ç»„åˆå­—é¢é‡éƒ½æ˜¯ä¸å¯å¯»å€çš„ï¼Œå°±åƒä¸‹é¢è¿™æ ·å­

```
type Profile struct {
    Name string
}

func new() Profile {
    return Profile{Name: "iswbm"}
}

func main() {
    fmt.Println(&new())
    // cannot take the address of new()
}
```

æ³¨æ„ä¸Šé¢å†™æ³•ä¸è¿™ä¸ªå†™æ³•çš„åŒºåˆ«ï¼Œä¸‹é¢è¿™ä¸ªå†™æ³•ä»£è¡¨ä¸åŒæ„æ€ï¼Œå…¶ä¸­çš„ `&` å¹¶ä¸æ˜¯å–åœ°å€çš„æ“ä½œï¼Œè€Œä»£è¡¨å®ä¾‹åŒ–ä¸€ä¸ªç»“æ„ä½“çš„æŒ‡é’ˆã€‚

```
type Profile struct {
    Name string
}

func main() {
    fmt.Println(&Profile{Name: "iswbm"}) // ok
}
```

è™½ç„¶ç»„åˆå­—é¢é‡æ˜¯ä¸å¯å¯»å€çš„ï¼Œä½†å´å¯ä»¥å¯¹ç»„åˆå­—é¢é‡çš„å­—æ®µå±æ€§è¿›è¡Œå¯»å€ï¼ˆç›´æ¥è®¿é—®ï¼‰

```
type Profile struct {
    Name string
}

func new() Profile {
    return Profile{Name: "iswbm"}
}

func main() {
    fmt.Println(new().Name)
}
```

## å“ªäº›æ˜¯ä¸å¯ä»¥å¯»å€çš„ï¼Ÿ

### å¸¸é‡

```
import "fmt"

const VERSION  = "1.0"

func main() {
    fmt.Println(&VERSION)
}
```

### å­—ç¬¦ä¸²

```
func getStr() string {
    return "iswbm"
}
func main() {
    fmt.Println(&getStr())
    // cannot take the address of getStr()
}
```

### å‡½æ•°æˆ–æ–¹æ³•

```
func getStr() string {
    return "iswbm"
}
func main() {
    fmt.Println(&getStr)
    // cannot take the address of getStr
}
```

### åŸºæœ¬ç±»å‹å­—é¢é‡

å­—é¢é‡åˆ†ï¼š**åŸºæœ¬ç±»å‹å­—é¢é‡** å’Œ **å¤åˆå‹å­—é¢é‡**ã€‚

åŸºæœ¬ç±»å‹å­—é¢é‡ï¼Œæ˜¯ä¸€ä¸ªå€¼çš„æ–‡æœ¬è¡¨ç¤ºï¼Œéƒ½æ˜¯ä¸åº”è¯¥ä¹Ÿæ˜¯ä¸å¯ä»¥è¢«å¯»å€çš„ã€‚

```
func getInt() int {
    return 1024
}

func main() {
    fmt.Println(&getInt())
    // cannot take the address of getInt()
}
```

### map ä¸­çš„å…ƒç´ 

å­—å…¸æ¯”è¾ƒç‰¹æ®Šï¼Œå¯ä»¥ä»ä¸¤ä¸ªè§’åº¦æ¥åå‘æ¨å¯¼ï¼Œå‡è®¾å­—å…¸çš„å…ƒç´ æ˜¯å¯å¯»å€çš„ï¼Œä¼šå‡ºç° ä»€ä¹ˆé—®é¢˜ï¼Ÿ

1. å¦‚æœå­—å…¸çš„å…ƒç´ ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›é›¶å€¼ï¼Œè€Œé›¶å€¼æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œå¦‚æœèƒ½å¯»å€é—®é¢˜å°±å¤§äº†ã€‚
2. è€Œå¦‚æœå­—å…¸çš„å…ƒç´ å­˜åœ¨ï¼Œè€ƒè™‘åˆ° Go ä¸­ map å®ç°ä¸­å…ƒç´ çš„åœ°å€æ˜¯å˜åŒ–çš„ï¼Œè¿™æ„å‘³ç€å¯»å€çš„ç»“æœä¹Ÿæ˜¯æ— æ„ä¹‰çš„ã€‚

åŸºäºè¿™ä¸¤ç‚¹ï¼ŒMap ä¸­çš„å…ƒç´ ä¸å¯å¯»å€ï¼Œç¬¦åˆå¸¸ç†ã€‚

```
func main() {
    p := map[string]string {
        "name": "iswbm",
    }

    fmt.Println(&p["name"])
    // cannot take the address of p["name"]
}
```

ææ‡‚äº†è¿™ç‚¹ï¼Œä½ åº”è¯¥èƒ½å¤Ÿç†è§£ä¸‹é¢è¿™æ®µä»£ç ä¸ºä»€ä¹ˆä¼šæŠ¥é”™å•¦~

```
package main

import "fmt"

type Person struct {
    Name  string
    Email string
}

func main() {
    m := map[int]Person{
        1:Person{"Andy", "1137291867@qq.com"},
        2:Person{"Tiny", "qishuai231@gmail.com"},
        3:Person{"Jack", "qs_edu2009@163.com"},
    }

    //ç¼–è¯‘é”™è¯¯ï¼šcannot assign to struct field m[1].Name in map
    m[1].Name = "Scrapup"
```

### æ•°ç»„å­—é¢é‡

æ•°ç»„å­—é¢é‡æ˜¯ä¸å¯å¯»å€çš„ï¼Œå½“ä½ å¯¹æ•°ç»„å­—é¢é‡è¿›è¡Œåˆ‡ç‰‡æ“ä½œï¼Œå…¶å®å°±æ˜¯å¯»æ‰¾å†…éƒ¨å…ƒç´ çš„åœ°å€ï¼Œä¸‹é¢è¿™æ®µä»£ç æ˜¯ä¼šæŠ¥é”™çš„

```
func main() {
    fmt.Println([3]int{1, 2, 3}[1:])
    // invalid operation [3]int literal[1:] (slice of unaddressable value)
}
```

## END é“¾æ¥
<ul><li><div><a href = '93.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '95.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°é¦–é¡µğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; :æœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

