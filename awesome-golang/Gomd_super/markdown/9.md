# Goroutine

[[toc]]

[toc]

## å‰è¨€

> Goroutineæ˜¯å¾ˆé‡è¦çš„ï¼Œæ¥è§¦äº†Goè¯­è¨€ï¼Œä½¿ç”¨è¿™ä¸ªè¯­è¨€è¶Šå¤šï¼Œè¶Šå‘ç°è¿™é—¨è¯­è¨€è·Ÿcè¯­è¨€å¾ˆåƒï¼šå¹³å¦çš„å†…å­˜ï¼ŒæŒ‡é’ˆï¼Œç¿»è¯‘æœºå™¨æŒ‡ä»¤ç­‰ç­‰ã€‚
>
> Goçš„`runtime`æä¾›äº†ä¸€äº›åŸºæœ¬çš„æ“ä½œç³»ç»ŸæŠ½è±¡ï¼Œ`goroutine`å¯¹åº”è¿›ç¨‹ï¼Œ`channel`å¯¹åº”è¿›ç¨‹é—´é€šä¿¡ï¼Œå¦å¤–Goæœ‰è‡ªå·±çš„è™šæ‹Ÿå†…å­˜ç®¡ç†ï¼Œæ‰€ä»¥å¦‚æœç”¨Goæ¥ç¼–å†™å†…æ ¸ï¼Œè¿›ç¨‹è°ƒåº¦å’Œå†…å­˜ç®¡ç†è¿™äº›ç¹ççš„ä¸œè¥¿å°±ç›´æ¥å¯ä»¥ç”¨ç°æˆçš„äº†ï¼Œé‚£ä¹ˆå› æ­¤æ˜¯ä¸æ˜¯å¯ä»¥å®ç° [cubos-go](https://github.com/3293172751/cubgo-os/)

åœ¨java/c++ä¸­æˆ‘ä»¬è¦å®ç°å¹¶å‘ç¼–ç¨‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦è‡ªå·±ç»´æŠ¤ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå¹¶ä¸”éœ€è¦è‡ªå·±å»åŒ…è£…ä¸€ä¸ªåˆä¸€ä¸ªçš„ä»»åŠ¡ï¼ŒåŒæ—¶éœ€è¦è‡ªå·±å»è°ƒåº¦çº¿ç¨‹æ‰§è¡Œä»»åŠ¡å¹¶ç»´æŠ¤ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿™ä¸€åˆ‡é€šå¸¸ä¼šè€—è´¹ç¨‹åºå‘˜å¤§é‡çš„å¿ƒæ™ºã€‚é‚£ä¹ˆèƒ½ä¸èƒ½æœ‰ä¸€ç§æœºåˆ¶ï¼Œç¨‹åºå‘˜åªéœ€è¦å®šä¹‰å¾ˆå¤šä¸ªä»»åŠ¡ï¼Œè®©ç³»ç»Ÿå»å¸®åŠ©æˆ‘ä»¬æŠŠè¿™äº›ä»»åŠ¡åˆ†é…åˆ°CPUä¸Šå®ç°å¹¶å‘æ‰§è¡Œå‘¢ï¼Ÿ

Goè¯­è¨€ä¸­çš„goroutineå°±æ˜¯è¿™æ ·ä¸€ç§æœºåˆ¶ï¼Œgoroutineçš„æ¦‚å¿µç±»ä¼¼äºçº¿ç¨‹ï¼Œä½† goroutineæ˜¯ç”±Goçš„è¿è¡Œæ—¶ï¼ˆruntimeï¼‰è°ƒåº¦å’Œç®¡ç†çš„ã€‚Goç¨‹åºä¼šæ™ºèƒ½åœ°å°† goroutine ä¸­çš„ä»»åŠ¡åˆç†åœ°åˆ†é…ç»™æ¯ä¸ªCPUã€‚Goè¯­è¨€ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºç°ä»£åŒ–çš„ç¼–ç¨‹è¯­è¨€ï¼Œå°±æ˜¯å› ä¸ºå®ƒåœ¨è¯­è¨€å±‚é¢å·²ç»**å†…ç½®äº†è°ƒåº¦å’Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„æœºåˆ¶**ã€‚

åœ¨Goè¯­è¨€ç¼–ç¨‹ä¸­ä½ ä¸éœ€è¦å»è‡ªå·±å†™è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹ï¼Œä½ çš„æŠ€èƒ½åŒ…é‡Œåªæœ‰ä¸€ä¸ªæŠ€èƒ½â€“goroutineï¼Œå½“ä½ éœ€è¦è®©æŸä¸ªä»»åŠ¡å¹¶å‘æ‰§è¡Œçš„æ—¶å€™ï¼Œä½ åªéœ€è¦æŠŠè¿™ä¸ªä»»åŠ¡åŒ…è£…æˆä¸€ä¸ªå‡½æ•°ï¼Œå¼€å¯ä¸€ä¸ªgoroutineå»æ‰§è¡Œè¿™ä¸ªå‡½æ•°å°±å¯ä»¥äº†.

## åç¨‹å’Œç®¡é“

> å…ˆçœ‹ä¸€ä¸ªéœ€æ±‚,ç»Ÿè®¡1~900000000000ä¸­æœ‰å“ªäº›ç´ æ•°

**ä¼ ç»Ÿæ–¹æ³•ï¼šä½¿ç”¨ä¸€ä¸ªå¾ªç¯ï¼Œåˆ¤æ–­å“ªäº›æ•°æ˜¯ç´ æ•°**

**ä½¿ç”¨å¹¶å‘æˆ–å¹¶è¡Œçš„æ–¹å¼ï¼Œ==å°†ç»Ÿè®¡ç´ æ•°çš„ä»»åŠ¡åˆ†é…ä¸ªå¤šä¸ªgoroutionå®Œæˆ==(é€Ÿåº¦æœ€å°‘æé«˜å››å€ï¼Œåˆ†é…ç»™å››ä¸ªCPU)**

### [#](https://go.nsddd.top/markdown/18.html#è¿›ç¨‹)è¿›ç¨‹

> åœ¨å­¦ä¹ goroutineä¸­æˆ‘ä»¬éœ€è¦ç†Ÿæ‚‰ä¸‹æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹

1. è¿›ç¨‹ï¼šè¿›ç¨‹å°±æ˜¯ç¨‹åºåœ¨æ“ä½œç³»ç»Ÿä¸­çš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½

2. çº¿ç¨‹ï¼šçº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªæ‰§è¡Œå®ä¾‹ï¼Œæ˜¯ç¨‹åºæ‰§è¡Œçš„ä¸€ä¸ªæœ€å°å•ä½ï¼Œå®ƒæ˜¯æ¯”è¿›ç¨‹è·Ÿå°èƒ½å¤Ÿç‹¬ç«‹å®Œæˆçš„åŸºæœ¬å•ä½ã€‚

> æ¯”å¦‚æ‰“å¼€ç½‘ç›˜ï¼Œæ­¤æ—¶æ‰“å¼€ç½‘ç›˜æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç½‘ç›˜ä¸­ä¸‹è½½å¤šä¸ªè§†é¢‘ï¼Œæ­¤æ—¶ä¸‹è½½å°±å«åšçº¿ç¨‹ï¼Œçº¿ç¨‹åƒçš„èµ„æºæ›´å°

**ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åˆ›å»ºæˆ–è€…é”€æ¯å¤šä¸ªçº¿ç¨‹ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹å¯ä»¥==å¹¶å‘==è¿›è¡Œ**

**ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹**

ğŸ–±ï¸[ç‚¹å‡»è¿›å…¥æ“ä½œç³»ç»Ÿçš„å¹¶å‘å­¦ä¹ ](https://go.nsddd.top/markdown/å¹¶å‘.html)

### [#](https://go.nsddd.top/markdown/18.html#goè¯­è¨€åç¨‹å’Œgoä¸»çº¿ç¨‹)Goè¯­è¨€åç¨‹å’ŒGoä¸»çº¿ç¨‹

Goè¯­è¨€ä¸»çº¿ç¨‹ï¼ˆä¹Ÿç§°ä¸ºçº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºè¿›ç¨‹ï¼‰ï¼Œä¸€ä¸ªGoè¯­è¨€çº¿ç¨‹ä¸Šå¯ä»¥èµ·å¤šä¸ªåç¨‹ï¼Œ**åç¨‹æ˜¯è½»é‡çº§çš„çº¿ç¨‹**

> ç¼–è¯‘å™¨ä¼˜åŒ–

**Goè¯­è¨€åç¨‹ç‰¹ç‚¹ï¼ˆé‡è¦ï¼‰ï¼š**

+ æœ‰ç‹¬ç«‹çš„æ ˆç©ºé—´
+ å…±äº«ç¨‹åºå †ç©ºé—´
+ è°ƒåº¦ç”±ç”¨æˆ·æ§åˆ¶
+ åç¨‹æ˜¯è½»é‡çº§çš„çº¿ç¨‹

![image-20220319135256999](https://go.nsddd.top/assets/RGvViKLpwlOXuEB.29ead913.png)

## ä½¿ç”¨goroutine

Goè¯­è¨€ä¸­ä½¿ç”¨goroutineéå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™åœ¨å‰é¢åŠ ä¸Šgoå…³é”®å­—ï¼Œå°±å¯ä»¥ä¸ºä¸€ä¸ªå‡½æ•°åˆ›å»ºä¸€ä¸ªgoroutineã€‚

ä¸€ä¸ªgoroutineå¿…å®šå¯¹åº”ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ªgoroutineå»æ‰§è¡Œç›¸åŒçš„å‡½æ•°ã€‚

### å¯åŠ¨å•ä¸ªgoroutine

å¯åŠ¨goroutineçš„æ–¹å¼éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨è°ƒç”¨çš„å‡½æ•°ï¼ˆæ™®é€šå‡½æ•°å’ŒåŒ¿åå‡½æ•°ï¼‰å‰é¢åŠ ä¸Šä¸€ä¸ªgoå…³é”®å­—ã€‚

**ä¸¾ä¸ªä¾‹å­å¦‚ä¸‹ï¼š**

```go
func hello() {
    fmt.Println("Hello Goroutine!")
}
func main() {
    hello()
    fmt.Println("main goroutine done!")
}
```

è¿™ä¸ªç¤ºä¾‹ä¸­helloå‡½æ•°å’Œä¸‹é¢çš„è¯­å¥æ˜¯ä¸²è¡Œçš„ï¼Œæ‰§è¡Œçš„ç»“æœæ˜¯æ‰“å°å®ŒHello Goroutine!åæ‰“å°main goroutine done!ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨è°ƒç”¨helloå‡½æ•°å‰é¢åŠ ä¸Šå…³é”®å­—goï¼Œä¹Ÿå°±æ˜¯å¯åŠ¨ä¸€ä¸ªgoroutineå»æ‰§è¡Œhelloè¿™ä¸ªå‡½æ•°ã€‚

```go
func hello() {
    fmt.Println("Hello Goroutine!")
}
func main() {
    go hello() // å¯åŠ¨å¦å¤–ä¸€ä¸ªgoroutineå»æ‰§è¡Œhelloå‡½æ•°
    fmt.Println("main goroutine done!")
}
```

è¿™ä¸€æ¬¡çš„æ‰§è¡Œç»“æœåªæ‰“å°äº†`main goroutine done!`ï¼Œå¹¶æ²¡æœ‰æ‰“å°`Hello Goroutine!`ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

ğŸ“œ å¯¹ä¸Šé¢çš„è§£é‡Šï¼š

> åœ¨ç¨‹åºå¯åŠ¨æ—¶ï¼ŒGoç¨‹åºå°±ä¼šä¸º`main()`å‡½æ•°åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„`goroutine`ã€‚
>
> å½“`main()`å‡½æ•°è¿”å›çš„æ—¶å€™è¯¥`goroutine`å°±ç»“æŸäº†ï¼Œæ‰€æœ‰åœ¨`main()`å‡½æ•°ä¸­å¯åŠ¨çš„`goroutine`ä¼šä¸€åŒç»“æŸ.

æ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•è®©mainå‡½æ•°ç­‰ä¸€ç­‰helloå‡½æ•°ï¼Œæœ€ç®€å•ç²—æš´çš„æ–¹å¼å°±æ˜¯`time.Sleep`äº†ã€‚

```go
func hello() {
    fmt.Println("Hello Goroutine!")
}
func main() {
    go hello() // å¯åŠ¨å¦å¤–ä¸€ä¸ªgoroutineå»æ‰§è¡Œhelloå‡½æ•°
    fmt.Println("main goroutine done!")
    time.Sleep(time.Second)
}
```

æ‰§è¡Œä¸Šé¢çš„ä»£ç ä½ ä¼šå‘ç°ï¼Œè¿™ä¸€æ¬¡å…ˆæ‰“å°`main goroutine done!`ï¼Œç„¶åç´§æ¥ç€æ‰“å°`Hello Goroutine!`ã€‚

é¦–å…ˆä¸ºä»€ä¹ˆä¼šå…ˆæ‰“å°`main goroutine done!`æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨åˆ›å»ºæ–°çš„`goroutine`çš„æ—¶å€™éœ€è¦èŠ±è´¹ä¸€äº›æ—¶é—´ï¼Œè€Œæ­¤æ—¶`main`å‡½æ•°æ‰€åœ¨çš„`goroutine`æ˜¯ç»§ç»­æ‰§è¡Œçš„ã€‚



### å¯åŠ¨å¤šä¸ªgoroutine

åœ¨Goè¯­è¨€ä¸­å®ç°å¹¶å‘å°±æ˜¯è¿™æ ·ç®€å•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯åŠ¨å¤šä¸ª`goroutine`ã€‚è®©æˆ‘ä»¬å†æ¥ä¸€ä¸ªä¾‹å­ï¼š ï¼ˆè¿™é‡Œä½¿ç”¨äº†`sync.WaitGroup`æ¥å®ç°`goroutine`çš„åŒæ­¥ï¼‰

```go
var wg sync.WaitGroup

func hello(i int) {
    defer wg.Done() // goroutineç»“æŸå°±ç™»è®°-1
    fmt.Println("Hello Goroutine!", i)
}

func main() {

    for i := 0; i < 10; i++ {
        wg.Add(1) // å¯åŠ¨ä¸€ä¸ªgoroutineå°±ç™»è®°+1
        go hello(i)   //è¿™ä¸ªå²‚ä¸æ˜¯å¯åŠ¨äº†åæ¬¡
    }
    wg.Wait() // ç­‰å¾…æ‰€æœ‰ç™»è®°çš„goroutineéƒ½ç»“æŸ
}
```

å¤šæ¬¡æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œä¼šå‘ç°æ¯æ¬¡æ‰“å°çš„æ•°å­—çš„é¡ºåºéƒ½ä¸ä¸€è‡´ã€‚è¿™æ˜¯å› ä¸º10ä¸ª`goroutine`æ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œè€Œ`goroutine`çš„è°ƒåº¦æ˜¯éšæœºçš„ã€‚



### æ³¨æ„

- å¦‚æœä¸»åç¨‹é€€å‡ºäº†ï¼Œå…¶ä»–ä»»åŠ¡è¿˜æ‰§è¡Œå—ï¼ˆè¿è¡Œä¸‹é¢çš„ä»£ç æµ‹è¯•ä¸€ä¸‹å§ï¼‰

```go
package main

import (
    "fmt"
    "time"
)

func main() {
    // åˆèµ·æ¥å†™
    go func() {
        i := 0
        for {
            i++
            fmt.Printf("new goroutine: i = %d\n", i)
            time.Sleep(time.Second)
        }
    }()
    i := 0
    for {
        i++
        fmt.Printf("main goroutine: i = %d\n", i)
        time.Sleep(time.Second)
        if i == 2 {
            break
        }
    }
}
```



## goroutineä¸çº¿ç¨‹

### å¯å¢é•¿çš„æ ˆ

OSçº¿ç¨‹ï¼ˆæ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼‰ä¸€èˆ¬éƒ½æœ‰å›ºå®šçš„æ ˆå†…å­˜ï¼ˆé€šå¸¸ä¸º2MBï¼‰ï¼Œä¸€ä¸ªgoroutineçš„æ ˆåœ¨å…¶ç”Ÿå‘½å‘¨æœŸå¼€å§‹æ—¶åªæœ‰å¾ˆå°çš„æ ˆï¼ˆå…¸å‹æƒ…å†µä¸‹2KBï¼‰ï¼Œgoroutineçš„æ ˆä¸æ˜¯å›ºå®šçš„ï¼Œä»–å¯ä»¥æŒ‰éœ€å¢å¤§å’Œç¼©å°ï¼Œgoroutineçš„æ ˆå¤§å°é™åˆ¶å¯ä»¥è¾¾åˆ°1GBï¼Œè™½ç„¶æå°‘ä¼šç”¨åˆ°è¿™ä¸ªå¤§ã€‚æ‰€ä»¥åœ¨Goè¯­è¨€ä¸­ä¸€æ¬¡åˆ›å»ºåä¸‡å·¦å³çš„goroutineä¹Ÿæ˜¯å¯ä»¥çš„ã€‚

### goroutineè°ƒåº¦

GPMæ˜¯Goè¯­è¨€è¿è¡Œæ—¶ï¼ˆruntimeï¼‰å±‚é¢çš„å®ç°ï¼Œæ˜¯goè¯­è¨€è‡ªå·±å®ç°çš„ä¸€å¥—è°ƒåº¦ç³»ç»Ÿã€‚åŒºåˆ«äºæ“ä½œç³»ç»Ÿè°ƒåº¦OSçº¿ç¨‹ã€‚

- `G`å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ä¸ª`goroutine`çš„ï¼Œé‡Œé¢é™¤äº†å­˜æ”¾æœ¬goroutineä¿¡æ¯å¤– è¿˜æœ‰ä¸æ‰€åœ¨Pçš„ç»‘å®šç­‰ä¿¡æ¯ã€‚
- `P`ç®¡ç†ç€ä¸€ç»„goroutineé˜Ÿåˆ—ï¼ŒPé‡Œé¢ä¼šå­˜å‚¨å½“å‰goroutineè¿è¡Œçš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆå‡½æ•°æŒ‡é’ˆï¼Œå †æ ˆåœ°å€åŠåœ°å€è¾¹ç•Œï¼‰ï¼ŒPä¼šå¯¹è‡ªå·±ç®¡ç†çš„goroutineé˜Ÿåˆ—åšä¸€äº›è°ƒåº¦ï¼ˆæ¯”å¦‚æŠŠå ç”¨CPUæ—¶é—´è¾ƒé•¿çš„goroutineæš‚åœã€è¿è¡Œåç»­çš„goroutineç­‰ç­‰ï¼‰å½“è‡ªå·±çš„é˜Ÿåˆ—æ¶ˆè´¹å®Œäº†å°±å»å…¨å±€é˜Ÿåˆ—é‡Œå–ï¼Œå¦‚æœå…¨å±€é˜Ÿåˆ—é‡Œä¹Ÿæ¶ˆè´¹å®Œäº†ä¼šå»å…¶ä»–Pçš„é˜Ÿåˆ—é‡ŒæŠ¢ä»»åŠ¡ã€‚
- `M`ï¼ˆmachineï¼‰æ˜¯Goè¿è¡Œæ—¶ï¼ˆruntimeï¼‰å¯¹æ“ä½œç³»ç»Ÿå†…æ ¸çº¿ç¨‹çš„è™šæ‹Ÿï¼Œ Mä¸å†…æ ¸çº¿ç¨‹ä¸€èˆ¬æ˜¯ä¸€ä¸€æ˜ å°„çš„å…³ç³»ï¼Œ ä¸€ä¸ªgroutineæœ€ç»ˆæ˜¯è¦æ”¾åˆ°Mä¸Šæ‰§è¡Œçš„ï¼›

Pä¸Mä¸€èˆ¬ä¹Ÿæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ä»–ä»¬å…³ç³»æ˜¯ï¼š Pç®¡ç†ç€ä¸€ç»„GæŒ‚è½½åœ¨Mä¸Šè¿è¡Œã€‚å½“ä¸€ä¸ªGé•¿ä¹…é˜»å¡åœ¨ä¸€ä¸ªMä¸Šæ—¶ï¼Œ`runtime`ä¼šæ–°å»ºä¸€ä¸ªMï¼Œé˜»å¡Gæ‰€åœ¨çš„Pä¼šæŠŠå…¶ä»–çš„G æŒ‚è½½åœ¨æ–°å»ºçš„Mä¸Šã€‚å½“æ—§çš„Gé˜»å¡å®Œæˆæˆ–è€…è®¤ä¸ºå…¶å·²ç»æ­»æ‰æ—¶ å›æ”¶æ—§çš„Mã€‚

Pçš„ä¸ªæ•°æ˜¯é€šè¿‡`runtime.GOMAXPROCS`è®¾å®šï¼ˆæœ€å¤§256ï¼‰ï¼Œ`Go1.5`ç‰ˆæœ¬ä¹‹åé»˜è®¤ä¸ºç‰©ç†çº¿ç¨‹æ•°ã€‚ åœ¨å¹¶å‘é‡å¤§çš„æ—¶å€™ä¼šå¢åŠ ä¸€äº›På’ŒMï¼Œä½†ä¸ä¼šå¤ªå¤šï¼Œåˆ‡æ¢å¤ªé¢‘ç¹çš„è¯å¾—ä¸å¿å¤±ã€‚

å•ä»çº¿ç¨‹è°ƒåº¦è®²ï¼ŒGoè¯­è¨€ç›¸æ¯”èµ·å…¶ä»–è¯­è¨€çš„ä¼˜åŠ¿åœ¨äºOSçº¿ç¨‹æ˜¯ç”±OSå†…æ ¸æ¥è°ƒåº¦çš„ï¼Œgoroutineåˆ™æ˜¯ç”±Goè¿è¡Œæ—¶ï¼ˆruntimeï¼‰è‡ªå·±çš„è°ƒåº¦å™¨è°ƒåº¦çš„ï¼Œè¿™ä¸ªè°ƒåº¦å™¨ä½¿ç”¨ä¸€ä¸ªç§°ä¸º`m:n`è°ƒåº¦çš„æŠ€æœ¯ï¼ˆå¤ç”¨/è°ƒåº¦mä¸ª`goroutine`åˆ°nä¸ªOSçº¿ç¨‹ï¼‰ã€‚ å…¶ä¸€å¤§ç‰¹ç‚¹æ˜¯`goroutine`çš„è°ƒåº¦æ˜¯åœ¨ç”¨æˆ·æ€ä¸‹å®Œæˆçš„ï¼Œ ä¸æ¶‰åŠå†…æ ¸æ€ä¸ç”¨æˆ·æ€ä¹‹é—´çš„é¢‘ç¹åˆ‡æ¢ï¼ŒåŒ…æ‹¬å†…å­˜çš„åˆ†é…ä¸é‡Šæ”¾ï¼Œéƒ½æ˜¯åœ¨ç”¨æˆ·æ€ç»´æŠ¤ç€ä¸€å—å¤§çš„å†…å­˜æ± ï¼Œ ä¸ç›´æ¥è°ƒç”¨ç³»ç»Ÿçš„`malloc`å‡½æ•°ï¼ˆé™¤éå†…å­˜æ± éœ€è¦æ”¹å˜ï¼‰ï¼Œæˆæœ¬æ¯”è°ƒåº¦OSçº¿ç¨‹ä½å¾ˆå¤šã€‚ å¦ä¸€æ–¹é¢å……åˆ†åˆ©ç”¨äº†å¤šæ ¸çš„ç¡¬ä»¶èµ„æºï¼Œè¿‘ä¼¼çš„æŠŠè‹¥å¹²`goroutine`å‡åˆ†åœ¨ç‰©ç†çº¿ç¨‹ä¸Šï¼Œ å†åŠ ä¸Šæœ¬èº«`goroutine`çš„è¶…è½»é‡ï¼Œä»¥ä¸Šç§ç§ä¿è¯äº†goè°ƒåº¦æ–¹é¢çš„æ€§èƒ½ã€‚

## END é“¾æ¥

<ul><li><div><a href = '8.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—</a><a href = '10.md' style='float: right'>â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°é¦–é¡µğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; :æœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

