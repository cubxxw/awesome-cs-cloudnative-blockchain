<template><div><ul>
<li><a href="https://github.com/3293172751" target="_blank" rel="noopener noreferrer">author<ExternalLinkIcon/></a></li>
</ul>
<h1 id="ç¬¬10èŠ‚-go-airå®ç°é¡¹ç›®çƒ­åŠ è½½" tabindex="-1"><a class="header-anchor" href="#ç¬¬10èŠ‚-go-airå®ç°é¡¹ç›®çƒ­åŠ è½½" aria-hidden="true">#</a> ç¬¬10èŠ‚ go airå®ç°é¡¹ç›®çƒ­åŠ è½½</h1>
<ul>
<li><RouterLink to="/go-advancend/">å›åˆ°ç›®å½•</RouterLink></li>
<li><RouterLink to="/go-advancend/markdown/9.html">ä¸Šä¸€èŠ‚</RouterLink></li>
</ul>
<blockquote>
<p>â¤ï¸ğŸ’•ğŸ’•Goè¯­è¨€é«˜çº§ç¯‡ç« ,åœ¨æ­¤ä¹‹å‰å»ºè®®æ‚¨å…ˆäº†è§£åŸºç¡€å’Œè¿›é˜¶ç¯‡ã€‚Myblog:<a href="http://nsddd.top/" target="_blank" rel="noopener noreferrer">http://nsddd.top<ExternalLinkIcon/></a></p>
<h3 id="goè¯­è¨€åŸºç¡€ç¯‡" tabindex="-1"><a class="header-anchor" href="#goè¯­è¨€åŸºç¡€ç¯‡" aria-hidden="true">#</a> <strong><a href="https://github.com/3293172751/Block_Chain/blob/master/TOC.md" target="_blank" rel="noopener noreferrer">Goè¯­è¨€åŸºç¡€ç¯‡<ExternalLinkIcon/></a></strong></h3>
<h3 id="goè¯­è¨€100ç¯‡è¿›é˜¶" tabindex="-1"><a class="header-anchor" href="#goè¯­è¨€100ç¯‡è¿›é˜¶" aria-hidden="true">#</a> <strong><a href="https://github.com/3293172751/Block_Chain/blob/master/Gomd_super/README.md" target="_blank" rel="noopener noreferrer">Goè¯­è¨€100ç¯‡è¿›é˜¶<ExternalLinkIcon/></a></strong></h3>
</blockquote>
<hr>
<p>[TOC]</p>
<h2 id="å¼€å§‹å‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#å¼€å§‹å‡†å¤‡" aria-hidden="true">#</a> å¼€å§‹å‡†å¤‡</h2>
<p><strong>ä½¿ç”¨windowçš„cmdç»ˆç«¯ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å‘½ä»¤<code v-pre>code .</code>æ‰“å¼€å½“å‰æ–‡ä»¶çš„vscode</strong></p>
<blockquote>
<p>ä½¿ç”¨<code v-pre>Start .</code>å¯ä»¥æ‰“å¼€æ–‡ä»¶èµ„æºç®¡ç†å™¨</p>
</blockquote>
<h3 id="windowså®‰è£…go-airå®ç°é¡¹ç›®çƒ­åŠ è½½" tabindex="-1"><a class="header-anchor" href="#windowså®‰è£…go-airå®ç°é¡¹ç›®çƒ­åŠ è½½" aria-hidden="true">#</a> Windowså®‰è£…go airå®ç°é¡¹ç›®çƒ­åŠ è½½</h3>
<p>Air æ˜¯ä¸º Go åº”ç”¨å¼€å‘è®¾è®¡çš„å¦å¤–ä¸€ä¸ªçƒ­é‡è½½çš„å‘½ä»¤è¡Œå·¥å…·ã€‚åªéœ€åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹è¾“å…¥ <code v-pre>air</code>ï¼Œç„¶åæŠŠå®ƒæ”¾åœ¨ä¸€è¾¹ï¼Œä¸“æ³¨äºä½ çš„ä»£ç å³å¯ã€‚</p>
<ul>
<li>[x] <a href="https://github.com/cosmtrek/air" target="_blank" rel="noopener noreferrer">ä»“åº“åœ°å€<ExternalLinkIcon/></a></li>
</ul>
<p><strong>å®‰è£…air</strong></p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>go get -u github.com/cosmtrek/air
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="å®‰è£…" tabindex="-1"><a class="header-anchor" href="#å®‰è£…" aria-hidden="true">#</a> å®‰è£…</h2>
<h3 id="æ¨èä½¿ç”¨-install-sh" tabindex="-1"><a class="header-anchor" href="#æ¨èä½¿ç”¨-install-sh" aria-hidden="true">#</a> æ¨èä½¿ç”¨ install.sh</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># binary æ–‡ä»¶ä¼šæ˜¯åœ¨ $(go env GOPATH)/bin/air</span>
<span class="token function">curl</span> <span class="token parameter variable">-sSfL</span> https://raw.githubusercontent.com/cosmtrek/air/master/install.sh <span class="token operator">|</span> <span class="token function">sh</span> <span class="token parameter variable">-s</span> -- <span class="token parameter variable">-b</span> <span class="token variable"><span class="token variable">$(</span>go <span class="token function">env</span> GOPATH<span class="token variable">)</span></span>/bin

<span class="token comment"># æˆ–è€…æŠŠå®ƒå®‰è£…åœ¨ ./bin/ è·¯å¾„ä¸‹</span>
<span class="token function">curl</span> <span class="token parameter variable">-sSfL</span> https://raw.githubusercontent.com/cosmtrek/air/master/install.sh <span class="token operator">|</span> <span class="token function">sh</span> <span class="token parameter variable">-s</span>

air <span class="token parameter variable">-v</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>P.S. éå¸¸æ„Ÿè°¢ mattn çš„ <a href="https://github.com/cosmtrek/air/pull/1" target="_blank" rel="noopener noreferrer">PR<ExternalLinkIcon/></a>ï¼Œä½¿å¾— Air æ”¯æŒ Windows å¹³å°ã€‚</p>
<h3 id="ä½¿ç”¨-go-install" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-go-install" aria-hidden="true">#</a> ä½¿ç”¨ go install</h3>
<p>ä½¿ç”¨ Go çš„ç‰ˆæœ¬ä¸º 1.16 æˆ–æ›´é«˜:</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>go install github.com/cosmtrek/air@latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="docker" tabindex="-1"><a class="header-anchor" href="#docker" aria-hidden="true">#</a> Docker</h3>
<p>è¯·æ‹‰å–è¿™ä¸ª Docker é•œåƒ <a href="https://hub.docker.com/r/cosmtrek/air" target="_blank" rel="noopener noreferrer">cosmtrek/air<ExternalLinkIcon/></a>.</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-w</span> <span class="token string">"&lt;PROJECT>"</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-e</span> <span class="token string">"air_wd=&lt;PROJECT>"</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-v</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>:<span class="token operator">&lt;</span>PROJECT<span class="token operator">></span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-p</span> <span class="token operator">&lt;</span>PORT<span class="token operator">></span>:<span class="token operator">&lt;</span>APP SERVER PORT<span class="token operator">></span> <span class="token punctuation">\</span>
    cosmtrek/air
    <span class="token parameter variable">-c</span> <span class="token operator">&lt;</span>CONF<span class="token operator">></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¾‹å¦‚ï¼Œæˆ‘çš„é¡¹ç›®ä¹‹ä¸€æ˜¯åœ¨ Docker ä¸Šè¿è¡Œçš„ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-w</span> <span class="token string">"/go/src/github.com/cosmtrek/hub"</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-v</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>:/go/src/github.com/cosmtrek/hub <span class="token punctuation">\</span>
    <span class="token parameter variable">-p</span> <span class="token number">9090</span>:9090 <span class="token punctuation">\</span>
    cosmtrek/air
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="http://sm.nsddd.top/smimage-20220822170342761.png" alt="image-20220822170342761" style="zoom:50%;" />
<h2 id="ä½¿ç”¨æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ–¹æ³•" aria-hidden="true">#</a> ä½¿ç”¨æ–¹æ³•</h2>
<p>æ‚¨å¯ä»¥æ·»åŠ  <code v-pre>alias air='~/.air'</code> åˆ°æ‚¨çš„ <code v-pre>.bashrc</code> æˆ– <code v-pre>.zshrc</code> åç¼€çš„æ–‡ä»¶.</p>
<p>é¦–å…ˆï¼Œè¿›å…¥ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>cd /path/to/your_project
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯æ‰§è¡Œ</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code># ä¼˜å…ˆåœ¨å½“å‰è·¯å¾„æŸ¥æ‰¾ `.air.toml` åç¼€çš„æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„
air -c .air.toml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‚¨å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–ï¼ŒæŠŠé»˜è®¤é…ç½®æ·»åŠ åˆ°å½“å‰è·¯å¾„ä¸‹çš„<code v-pre>.air.toml</code> æ–‡ä»¶ã€‚</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>air init
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote>
<p>å”¯ä¸€éœ€è¦è®²çš„åœ°æ–¹æ˜¯åœ¨é…ç½®æ–‡ä»¶<code v-pre>.air.toml</code>ä¸­ï¼š</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>cmd = "go build -o ./tmp/main.exe ."
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>cmdæ˜¯å¯ä»¥æ‰§è¡Œairçš„ç›®å½•ï¼Œå³ä½¿ä½ <code v-pre>go mod init â€name&quot;</code> åˆå§‹åŒ–äº†ï¼Œä½†æ˜¯ä¹Ÿæ˜¯è¦åŠ å…¥ç›¸å¯¹è·¯å¾„çš„ï¼Œæ¯”å¦‚è¯´åŠ å…¥é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„cmdæ–‡ä»¶</strong></p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>cmd = "go build -o ./tmp/main.exe ./cmd"
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="http://sm.nsddd.top/smimage-20220822170925614.png" alt="image-20220822170925614" style="zoom:25%;" />
</blockquote>
<p>åœ¨è¿™ä¹‹åï¼Œä½ åªéœ€æ‰§è¡Œ <code v-pre>air</code> å‘½ä»¤ï¼Œæ— éœ€æ·»åŠ é¢å¤–çš„å˜é‡ï¼Œå®ƒå°±èƒ½ä½¿ç”¨ <code v-pre>.air.toml</code> æ–‡ä»¶ä¸­çš„é…ç½®äº†ã€‚</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>air
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æ¬²ä¿®æ”¹é…ç½®ä¿¡æ¯ï¼Œè¯·å‚è€ƒ <a href="https://github.com/cosmtrek/air/blob/master/air_example.toml" target="_blank" rel="noopener noreferrer">air_example.toml<ExternalLinkIcon/></a> æ–‡ä»¶.</p>
<h3 id="è¿è¡Œæ—¶å‚æ•°" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œæ—¶å‚æ•°" aria-hidden="true">#</a> è¿è¡Œæ—¶å‚æ•°</h3>
<p>æ‚¨å¯ä»¥é€šè¿‡æŠŠå˜é‡æ·»åŠ åœ¨ air å‘½ä»¤ä¹‹åæ¥ä¼ é€’å‚æ•°ã€‚</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code># ä¼šæ‰§è¡Œ ./tmp/main bench
air bench

# ä¼šæ‰§è¡Œ ./tmp/main server --port 8080
air server --port 8080
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can separate the arguments passed for the air command and the built binary with <code v-pre>--</code> argument.</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># ä¼šè¿è¡Œ ./tmp/main -h</span>
air -- <span class="token parameter variable">-h</span>

<span class="token comment"># ä¼šä½¿ç”¨ä¸ªæ€§åŒ–é…ç½®æ¥è¿è¡Œ airï¼Œç„¶åæŠŠ -h åçš„å˜é‡å’Œå€¼æ·»åŠ åˆ°è¿è¡Œçš„å‚æ•°ä¸­</span>
air <span class="token parameter variable">-c</span> .air.toml -- <span class="token parameter variable">-h</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="docker-compose" tabindex="-1"><a class="header-anchor" href="#docker-compose" aria-hidden="true">#</a> Docker-compose</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>services:
  my-project-with-air:
    image: cosmtrek/air
    <span class="token comment"># working_dir value has to be the same of mapped volume</span>
    working_dir: /project-package
    ports:
      - <span class="token operator">&lt;</span>any<span class="token operator">></span>:<span class="token operator">&lt;</span>any<span class="token operator">></span>
    environment:
      - <span class="token assign-left variable">ENV_A</span><span class="token operator">=</span><span class="token variable">${ENV_A}</span>
      - <span class="token assign-left variable">ENV_B</span><span class="token operator">=</span><span class="token variable">${ENV_B}</span>
      - <span class="token assign-left variable">ENV_C</span><span class="token operator">=</span><span class="token variable">${ENV_C}</span>
    volumes:
      - ./project-relative-path/:/project-package/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è°ƒè¯•" tabindex="-1"><a class="header-anchor" href="#è°ƒè¯•" aria-hidden="true">#</a> è°ƒè¯•</h3>
<p>è¿è¡Œ <code v-pre>air -d</code> å‘½ä»¤èƒ½æ‰“å°æ‰€æœ‰æ—¥å¿—ã€‚</p>
<details class="custom-container details"><summary>Q&A</summary>
<p>é‡åˆ° &quot;command not found: air&quot; æˆ– &quot;No such file or directory&quot; è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">GOPATH</span><span class="token operator">=</span><span class="token environment constant">$HOME</span>/xxxxx
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$GOROOT</span>/bin:<span class="token variable">$GOPATH</span>/bin
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable"><span class="token variable">$(</span>go <span class="token function">env</span> GOPATH<span class="token variable">)</span></span>/bin <span class="token operator">&lt;</span>---- è¯·ç¡®è®¤è¿™è¡Œåœ¨æ‚¨çš„é…ç½®ä¿¡æ¯ä¸­ï¼ï¼ï¼
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>
<h2 id="éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#éƒ¨ç½²" aria-hidden="true">#</a> éƒ¨ç½²</h2>
<p>è¯·æ³¨æ„ï¼šè¿™éœ€è¦ Go 1.16+ ï¼Œå› ä¸ºæˆ‘ä½¿ç”¨ <code v-pre>go mod</code> æ¥ç®¡ç†ä¾èµ–ã€‚</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># 1. é¦–å…ˆå¤åˆ»ï¼ˆforkï¼‰è¿™ä¸ªé¡¹ç›®</span>

<span class="token comment"># 2. å…¶æ¬¡å…‹éš†ï¼ˆcloneï¼‰å®ƒ</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token variable">$GOPATH</span>/src/github.com/cosmtrek
<span class="token builtin class-name">cd</span> <span class="token variable">$GOPATH</span>/src/github.com/cosmtrek
<span class="token function">git</span> clone git@github.com:<span class="token operator">&lt;</span>YOUR USERNAME<span class="token operator">></span>/air.git

<span class="token comment"># 3. å†æ¬¡å®‰è£…ä¾èµ–</span>
<span class="token builtin class-name">cd</span> air
<span class="token function">make</span> ci

<span class="token comment"># 4. è¿™æ ·å°±å¯ä»¥å¿«ä¹åœ°æ¢ç´¢å’Œç©è€å•¦ï¼</span>
<span class="token function">make</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é¡ºä¾¿è¯´ä¸€å¥: æ¬¢è¿ PR~</p>
<h3 id="å‘å¸ƒæ–°ç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#å‘å¸ƒæ–°ç‰ˆæœ¬" aria-hidden="true">#</a> å‘å¸ƒæ–°ç‰ˆæœ¬</h3>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># 1. checkout åˆ° master åˆ†æ”¯</span>
<span class="token function">git</span> checkout master

<span class="token comment"># 2. æ·»åŠ éœ€è¦å‘å¸ƒçš„ç‰ˆæœ¬å·</span>
<span class="token function">git</span> tag v1.xx.x

<span class="token comment"># 3. æ¨é€åˆ°è¿œç¨‹</span>
<span class="token function">git</span> push origin v1.xx.x

ci ä¼šåŠ å·¥å’Œå¤„ç†ï¼Œç„¶åä¼šå‘å¸ƒæ–°ç‰ˆæœ¬ã€‚ç­‰å¾…å¤§çº¦äº”åˆ†é’Ÿï¼Œä½ å°±èƒ½è·å–åˆ°æ–°ç‰ˆæœ¬äº†ã€‚
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2>
<ul>
<li><RouterLink to="/go-advancend/">å›åˆ°ç›®å½•</RouterLink></li>
<li><RouterLink to="/go-advancend/markdown/9.html">ä¸Šä¸€èŠ‚</RouterLink></li>
<li><RouterLink to="/go-advancend/markdown/11.html">ä¸‹ä¸€èŠ‚</RouterLink></li>
</ul>
<hr>
<ul>
<li><a href="https://github.com/3293172751/Block_Chain/blob/master/Git/git-contributor.md" target="_blank" rel="noopener noreferrer">å‚ä¸è´¡çŒ®â¤ï¸ğŸ’•ğŸ’•<ExternalLinkIcon/></a></li>
</ul>
</div></template>


