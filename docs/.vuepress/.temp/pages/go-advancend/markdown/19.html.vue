<template><div><ul>
<li><a href="https://github.com/3293172751" target="_blank" rel="noopener noreferrer">author<ExternalLinkIcon/></a></li>
</ul>
<h1 id="ç¬¬19èŠ‚-go-å®ç°-ping" tabindex="-1"><a class="header-anchor" href="#ç¬¬19èŠ‚-go-å®ç°-ping" aria-hidden="true">#</a> ç¬¬19èŠ‚ go å®ç° ping</h1>
<ul>
<li><RouterLink to="/go-advancend/">å›åˆ°ç›®å½•</RouterLink></li>
<li><RouterLink to="/go-advancend/markdown/18.html">ä¸Šä¸€èŠ‚</RouterLink></li>
</ul>
<blockquote>
<p>â¤ï¸ğŸ’•ğŸ’•Goè¯­è¨€é«˜çº§ç¯‡ç« ,åœ¨æ­¤ä¹‹å‰å»ºè®®æ‚¨å…ˆäº†è§£åŸºç¡€å’Œè¿›é˜¶ç¯‡ã€‚Myblog:<a href="http://nsddd.top/" target="_blank" rel="noopener noreferrer">http://nsddd.top<ExternalLinkIcon/></a></p>
<h3 id="goè¯­è¨€åŸºç¡€ç¯‡" tabindex="-1"><a class="header-anchor" href="#goè¯­è¨€åŸºç¡€ç¯‡" aria-hidden="true">#</a> <strong><a href="https://github.com/3293172751/Block_Chain/blob/master/TOC.md" target="_blank" rel="noopener noreferrer">Goè¯­è¨€åŸºç¡€ç¯‡<ExternalLinkIcon/></a></strong></h3>
<h3 id="goè¯­è¨€100ç¯‡è¿›é˜¶" tabindex="-1"><a class="header-anchor" href="#goè¯­è¨€100ç¯‡è¿›é˜¶" aria-hidden="true">#</a> <strong><a href="https://github.com/3293172751/Block_Chain/blob/master/Gomd_super/README.md" target="_blank" rel="noopener noreferrer">Goè¯­è¨€100ç¯‡è¿›é˜¶<ExternalLinkIcon/></a></strong></h3>
</blockquote>
<hr>
<p>[TOC]</p>
<h2 id="icmp" tabindex="-1"><a class="header-anchor" href="#icmp" aria-hidden="true">#</a> ICMP</h2>
<h3 id="icmpã¨ã¯" tabindex="-1"><a class="header-anchor" href="#icmpã¨ã¯" aria-hidden="true">#</a> ICMPã¨ã¯ï¼Ÿ</h3>
<ol>
<li>ICMPï¼ˆäº’è”ç½‘æ§åˆ¶æ¶ˆæ¯åè®®ï¼‰æ˜¯ IP åè®®çš„â€œé”™è¯¯é€šçŸ¥â€å’Œâ€œæ§åˆ¶æ¶ˆæ¯â€</li>
<li>ç”¨äºä¼ è¾“ çš„åè®®ã€‚ æ£€æŸ¥å®ç° TCP/IP çš„è®¡ç®—æœºä¹‹é—´çš„é€šä¿¡çŠ¶æ€</li>
<li>ä½¿ç”¨ã€‚ ICMP æ˜¯ä¸€ç§åœ¨äº’è”ç½‘å±‚ï¼ˆOSI å‚è€ƒæ¨¡å‹çš„ç½‘ç»œå±‚ï¼‰ä¸Šè¿è¡Œçš„åè®®ã€‚</li>
</ol>
<div class="custom-container tip"><p class="custom-container-title">æ¨è ICMP çš„åŠŸèƒ½ä¸ä½¿ç”¨</p>
<ul>
<li><a href="https://github.com/cubxxw/cs-awesome-Block_Chain/blob/master/web/markdown/20.md" target="_blank" rel="noopener noreferrer">https://github.com/cubxxw/cs-awesome-Block_Chain/blob/master/web/markdown/20.md<ExternalLinkIcon/></a></li>
</ul>
</div>
<h3 id="æŠ¥æ–‡å¤´" tabindex="-1"><a class="header-anchor" href="#æŠ¥æ–‡å¤´" aria-hidden="true">#</a> æŠ¥æ–‡å¤´</h3>
<p>ICMPæŠ¥å¤´ä»IPæŠ¥å¤´çš„ç¬¬160ä½å¼€å§‹ï¼ˆIPé¦–éƒ¨20å­—èŠ‚ï¼‰ï¼ˆé™¤éä½¿ç”¨äº†IPæŠ¥å¤´çš„å¯é€‰éƒ¨åˆ†ï¼‰ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">Bits</th>
<th style="text-align:center">160-167</th>
<th style="text-align:center">168-175</th>
<th style="text-align:center">176-183</th>
<th style="text-align:center">184-191</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>160</strong></td>
<td style="text-align:center">Type</td>
<td style="text-align:center">Code</td>
<td style="text-align:center">æ ¡éªŒç ï¼ˆchecksumï¼‰</td>
<td style="text-align:center">æ ¡éªŒç ï¼ˆchecksumï¼‰</td>
</tr>
<tr>
<td style="text-align:center"><strong>192</strong></td>
<td style="text-align:center">Rest of Header</td>
<td style="text-align:center">Rest of Header</td>
<td style="text-align:center">Rest of Header</td>
<td style="text-align:center">Rest of Header</td>
</tr>
</tbody>
</table>
<img src="http://sm.nsddd.top/smasdasdf.png" alt="TCP/IPåè®®æ—çš„ç½‘ç»œå±‚åŸºç¡€ï¼ˆ5ï¼‰â€”â€”ICMPåè®®ä»¥åŠpingå‘½ä»¤_TLpigffçš„åšå®¢-CSDNåšå®¢" style="zoom:150%;" />
<h3 id="icmp-çš„æ ¼å¼" tabindex="-1"><a class="header-anchor" href="#icmp-çš„æ ¼å¼" aria-hidden="true">#</a> ICMP çš„æ ¼å¼</h3>
<p>ICMP æ¶ˆæ¯ç”±å››ä¸ªå­—æ®µç»„æˆï¼šç±»å‹ã€ä»£ç ã€æ ¡éªŒå’Œå’Œå’Œæ•°æ®ã€‚</p>
<table>
<thead>
<tr>
<th>æ¯ä¸ªå­—æ®µ</th>
<th>è‹±è¯­ç¬¦å·</th>
<th>ä½æ•°</th>
<th>æ¯ä¸ªå­—æ®µçš„è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç±»å‹</td>
<td>Type</td>
<td>8 bit</td>
<td>åŒ…å« ICMP æ¶ˆæ¯çš„åŠŸèƒ½ç±»å‹å€¼ã€‚ å€¼è§ä¸‹è¡¨ã€‚</td>
</tr>
<tr>
<td>ä»£ç </td>
<td>Code</td>
<td>8 bit</td>
<td>åŒ…å« ICMP æ¶ˆæ¯çš„è¯¦ç»†åŠŸèƒ½ä»£ç çš„å€¼ã€‚ å€¼è§ä¸‹è¡¨ã€‚</td>
</tr>
<tr>
<td>æ ¡éªŒå’Œ</td>
<td>Checksum</td>
<td>16 bit</td>
<td>æ£€æŸ¥æ˜¯å¦å­˜åœ¨é”™è¯¯ã€‚</td>
</tr>
<tr>
<td>ä¸»é¢˜</td>
<td>Data</td>
<td>å¯å˜é•¿åº¦</td>
<td>é•¿åº¦å›  ICMP çš„â€œç±»å‹â€è€Œå¼‚ã€‚</td>
</tr>
</tbody>
</table>
<h2 id="goè¯­è¨€å®ç°-ping-æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#goè¯­è¨€å®ç°-ping-æ“ä½œ" aria-hidden="true">#</a> Goè¯­è¨€å®ç° Ping æ“ä½œ</h2>
<div class="custom-container tip"><p class="custom-container-title">æ­¥éª¤</p>
<ol>
<li>ping æ“ä½œåŸç† ICMP</li>
<li>å®ç° ping æ“ä½œçš„ä¸¤ä¸ªå…³é”®ç‚¹</li>
<li>ping æ“ä½œ</li>
</ol>
</div>
<p>æˆ‘ä»¬å¸Œæœ›å¯ä»¥å‘é€ 64 å­—èŠ‚çš„æ•°æ® <code v-pre>-l 64</code></p>
<h3 id="flag-çš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#flag-çš„ä½œç”¨" aria-hidden="true">#</a> flag çš„ä½œç”¨</h3>
<p>Goè¯­è¨€å†…ç½®çš„<code v-pre>flag</code>åŒ…å®ç°äº†å‘½ä»¤è¡Œå‚æ•°çš„è§£æï¼Œ<code v-pre>flag</code>åŒ…ä½¿å¾—å¼€å‘å‘½ä»¤è¡Œå·¥å…·æ›´ä¸ºç®€å•ã€‚</p>
<p><strong>å¯ä»¥ç®€å•çš„è·å–å‘½ä»¤è¡Œå‚æ•°ï¼š</strong></p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"os"</span>
<span class="token punctuation">)</span>

<span class="token comment">//os.Args demo</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//os.Argsæ˜¯ä¸€ä¸ª[]string</span>
	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> index<span class="token punctuation">,</span> arg <span class="token operator">:=</span> <span class="token keyword">range</span> os<span class="token punctuation">.</span>Args <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"args[%d]=%v\n"</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> arg<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>PS D:<span class="token punctuation">\</span>æ–‡æ¡£<span class="token punctuation">\</span>æœ€è¿‘çš„<span class="token punctuation">\</span>awesome-golang<span class="token punctuation">\</span>docs<span class="token punctuation">\</span>code<span class="token punctuation">\</span>go-super<span class="token operator">></span> go run  .<span class="token punctuation">\</span><span class="token number">74</span>-main.go wefa     
args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>smile<span class="token punctuation">\</span>AppData<span class="token punctuation">\</span>Local<span class="token punctuation">\</span>Temp<span class="token punctuation">\</span>go-build1593224315<span class="token punctuation">\</span>b001<span class="token punctuation">\</span>exe<span class="token punctuation">\</span><span class="token number">74</span>-main.exe
args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>wefa
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">æç¤º</p>
<p>æ˜¯ä¸æ˜¯å¯ä»¥å’Œæˆ‘ä»¬ä¹‹å‰çš„Cobraè”åˆèµ·æ¥äº†ï¼Œæˆ–è®¸æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Cobra å¯¹å§~</p>
</div>
<h3 id="lag-type" tabindex="-1"><a class="header-anchor" href="#lag-type" aria-hidden="true">#</a> lag.Type()</h3>
<p>åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š</p>
<p><code v-pre>flag.Type(flagå, é»˜è®¤å€¼, å¸®åŠ©ä¿¡æ¯)*Type</code> ä¾‹å¦‚æˆ‘ä»¬è¦å®šä¹‰å§“åã€å¹´é¾„ã€å©šå¦ä¸‰ä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼å®šä¹‰ï¼š</p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code>name <span class="token operator">:=</span> flag<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span> <span class="token string">"å§“å"</span><span class="token punctuation">)</span>
age <span class="token operator">:=</span> flag<span class="token punctuation">.</span><span class="token function">Int</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">"å¹´é¾„"</span><span class="token punctuation">)</span>
married <span class="token operator">:=</span> flag<span class="token punctuation">.</span><span class="token function">Bool</span><span class="token punctuation">(</span><span class="token string">"married"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">"å©šå¦"</span><span class="token punctuation">)</span>
delay <span class="token operator">:=</span> flag<span class="token punctuation">.</span><span class="token function">Duration</span><span class="token punctuation">(</span><span class="token string">"delay"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"æ—¶é—´é—´éš”"</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­¤æ—¶<code v-pre>name</code>ã€<code v-pre>age</code>ã€<code v-pre>married</code>ã€<code v-pre>delay</code>å‡ä¸ºå¯¹åº”ç±»å‹çš„æŒ‡é’ˆã€‚</p>
<h3 id="flag-typevar" tabindex="-1"><a class="header-anchor" href="#flag-typevar" aria-hidden="true">#</a> flag.TypeVar()</h3>
<p>åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š <code v-pre>flag.TypeVar(TypeæŒ‡é’ˆ, flagå, é»˜è®¤å€¼, å¸®åŠ©ä¿¡æ¯)</code> ä¾‹å¦‚æˆ‘ä»¬è¦å®šä¹‰å§“åã€å¹´é¾„ã€å©šå¦ä¸‰ä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼å®šä¹‰ï¼š</p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">var</span> name <span class="token builtin">string</span>
<span class="token keyword">var</span> age <span class="token builtin">int</span>
<span class="token keyword">var</span> married <span class="token builtin">bool</span>
<span class="token keyword">var</span> delay time<span class="token punctuation">.</span>Duration
flag<span class="token punctuation">.</span><span class="token function">StringVar</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>name<span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span> <span class="token string">"å§“å"</span><span class="token punctuation">)</span>
flag<span class="token punctuation">.</span><span class="token function">IntVar</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>age<span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">"å¹´é¾„"</span><span class="token punctuation">)</span>
flag<span class="token punctuation">.</span><span class="token function">BoolVar</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>married<span class="token punctuation">,</span> <span class="token string">"married"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">"å©šå¦"</span><span class="token punctuation">)</span>
flag<span class="token punctuation">.</span><span class="token function">DurationVar</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>delay<span class="token punctuation">,</span> <span class="token string">"delay"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"æ—¶é—´é—´éš”"</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="flag-parse" tabindex="-1"><a class="header-anchor" href="#flag-parse" aria-hidden="true">#</a> flag.Parse()</h3>
<p>é€šè¿‡ä»¥ä¸Šä¸¤ç§æ–¹æ³•å®šä¹‰å¥½å‘½ä»¤è¡Œflagå‚æ•°åï¼Œéœ€è¦é€šè¿‡è°ƒç”¨<code v-pre>flag.Parse()</code>æ¥å¯¹å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œè§£æã€‚</p>
<p>æ”¯æŒçš„å‘½ä»¤è¡Œå‚æ•°æ ¼å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li><code v-pre>-flag xxx</code> ï¼ˆä½¿ç”¨ç©ºæ ¼ï¼Œä¸€ä¸ª<code v-pre>-</code>ç¬¦å·ï¼‰</li>
<li><code v-pre>--flag xxx</code> ï¼ˆä½¿ç”¨ç©ºæ ¼ï¼Œä¸¤ä¸ª<code v-pre>-</code>ç¬¦å·ï¼‰</li>
<li><code v-pre>-flag=xxx</code> ï¼ˆä½¿ç”¨ç­‰å·ï¼Œä¸€ä¸ª<code v-pre>-</code>ç¬¦å·ï¼‰</li>
<li><code v-pre>--flag=xxx</code> ï¼ˆä½¿ç”¨ç­‰å·ï¼Œä¸¤ä¸ª<code v-pre>-</code>ç¬¦å·ï¼‰</li>
</ul>
<p>å…¶ä¸­ï¼Œå¸ƒå°”ç±»å‹çš„å‚æ•°å¿…é¡»ä½¿ç”¨ç­‰å·çš„æ–¹å¼æŒ‡å®šã€‚</p>
<p><code v-pre>Parse</code>è§£æ<code v-pre>os.Args[1:]</code>ä¸­çš„å‘½ä»¤è¡Œæ ‡å¿—ã€‚å¿…é¡»åœ¨å®šä¹‰æ‰€æœ‰æ ‡å¿—ä¹‹åå’Œåœ¨ç¨‹åºè®¿é—®æ ‡å¿—ä¹‹å‰è°ƒç”¨ã€‚</p>
<h3 id="else" tabindex="-1"><a class="header-anchor" href="#else" aria-hidden="true">#</a> else</h3>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code>flag<span class="token punctuation">.</span><span class="token function">Args</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">////è¿”å›å‘½ä»¤è¡Œå‚æ•°åçš„å…¶ä»–å‚æ•°ï¼Œä»¥[]stringç±»å‹</span>
flag<span class="token punctuation">.</span><span class="token function">NArg</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//è¿”å›å‘½ä»¤è¡Œå‚æ•°åçš„å…¶ä»–å‚æ•°ä¸ªæ•°</span>
flag<span class="token punctuation">.</span><span class="token function">NFlag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//è¿”å›ä½¿ç”¨çš„å‘½ä»¤è¡Œå‚æ•°ä¸ªæ•°</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è·å–å‘½ä»¤è¡Œå‚æ•°" tabindex="-1"><a class="header-anchor" href="#è·å–å‘½ä»¤è¡Œå‚æ•°" aria-hidden="true">#</a> è·å–å‘½ä»¤è¡Œå‚æ•°</h2>
<p>ğŸ’¡ç®€å•çš„ä¸€ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token comment">/*
å®ç°pingæ“ä½œ
*/</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"flag"</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">var</span> <span class="token punctuation">(</span>
	timeout <span class="token builtin">int64</span>
	size    <span class="token builtin">int</span>
	count   <span class="token builtin">int</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">getCommandArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>timeout<span class="token punctuation">,</span> size<span class="token punctuation">,</span> count<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">getCommandArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//è·å–å‘½ä»¤è¡Œå‚æ•°</span>
	flag<span class="token punctuation">.</span><span class="token function">Int64Var</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>timeout<span class="token punctuation">,</span> <span class="token string">"t"</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">"è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’"</span><span class="token punctuation">)</span>
	flag<span class="token punctuation">.</span><span class="token function">IntVar</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>size<span class="token punctuation">,</span> <span class="token string">"s"</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token string">"è¯·æ±‚æ•°æ®åŒ…å¤§å°ï¼Œå•ä½å­—èŠ‚"</span><span class="token punctuation">)</span>
	flag<span class="token punctuation">.</span><span class="token function">IntVar</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count<span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">"è¯·æ±‚æ¬¡æ•°"</span><span class="token punctuation">)</span>
	flag<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//è§£æå‘½ä»¤è¡Œå‚æ•°</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>PS D:<span class="token punctuation">\</span>go-super<span class="token operator">></span> go run  .<span class="token punctuation">\</span><span class="token number">73</span>-main.go               
<span class="token number">1000</span> <span class="token number">32</span> <span class="token number">4</span>
PS D:<span class="token punctuation">\</span>go-super<span class="token operator">></span> go run  .<span class="token punctuation">\</span><span class="token number">73</span>-main.go <span class="token parameter variable">-t</span> <span class="token number">1234</span> <span class="token parameter variable">-s</span> <span class="token number">128</span> <span class="token parameter variable">-c</span> <span class="token number">6</span>
<span class="token number">1234</span> <span class="token number">128</span> <span class="token number">6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è·å–è¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#è·å–è¯·æ±‚" aria-hidden="true">#</a> è·å–è¯·æ±‚</h2>
<p><strong>æ³¨æ„å¤§å°ç«¯åŒºåˆ«ï¼š</strong></p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token comment">/*
å®ç°pingæ“ä½œ
*/</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"bytes"</span>
	<span class="token string">"encoding/binary"</span>
	<span class="token string">"flag"</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"net"</span>
	<span class="token string">"os"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> ICMP <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Type     <span class="token builtin">uint8</span>  <span class="token comment">//æ¶ˆæ¯ç±»å‹</span>
	Code     <span class="token builtin">uint8</span>  <span class="token comment">//ç±»å‹å­ç </span>
	Checksum <span class="token builtin">uint16</span> <span class="token comment">//æ ¡éªŒå’Œ</span>
	<span class="token comment">//æ ‡è¯†ç¬¦å’Œåºåˆ—å·</span>
	ID  <span class="token builtin">uint16</span> <span class="token comment">//æ ‡è¯†ç¬¦</span>
	Seq <span class="token builtin">uint16</span> <span class="token comment">//åºåˆ—å·</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token punctuation">(</span>
	timeout <span class="token builtin">int64</span>
	size    <span class="token builtin">int</span>
	count   <span class="token builtin">int</span>
	icmp    <span class="token operator">*</span>ICMP <span class="token operator">=</span> <span class="token operator">&amp;</span>ICMP<span class="token punctuation">{</span>
		Type<span class="token punctuation">:</span>     <span class="token number">8</span><span class="token punctuation">,</span>
		Code<span class="token punctuation">:</span>     <span class="token number">0</span><span class="token punctuation">,</span>
		Checksum<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
		ID<span class="token punctuation">:</span>       <span class="token number">6</span><span class="token punctuation">,</span>
		Seq<span class="token punctuation">:</span>      <span class="token number">0</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">getCommandArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">//ç›®æ ‡ipåœ°å€</span>
	desIp <span class="token operator">:=</span> os<span class="token punctuation">.</span>Args<span class="token punctuation">[</span><span class="token function">len</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">//è·å–æœ€åä¸€ä¸ªå‚æ•°</span>

	<span class="token comment">//æ„å»ºè¯·æ±‚</span>
	conn<span class="token punctuation">,</span> err <span class="token operator">:=</span> net<span class="token punctuation">.</span><span class="token function">DialTimeout</span><span class="token punctuation">(</span><span class="token string">"ip4:icmp"</span><span class="token punctuation">,</span> desIp<span class="token punctuation">,</span> time<span class="token punctuation">.</span><span class="token function">Duration</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token operator">*</span>time<span class="token punctuation">.</span>Millisecond<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"è¯·æ±‚å¤±è´¥"</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> conn<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	data <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> size<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ­£åœ¨ Ping"</span><span class="token punctuation">,</span> desIp<span class="token punctuation">,</span> <span class="token string">" å…·æœ‰ 32 å­—èŠ‚çš„æ•°æ®:"</span><span class="token punctuation">,</span> <span class="token string">"data:"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>

	<span class="token keyword">var</span> buffer bytes<span class="token punctuation">.</span>Buffer
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å¤§ç«¯ï¼š"</span><span class="token punctuation">)</span>
	binary<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>buffer<span class="token punctuation">,</span> binary<span class="token punctuation">.</span>BigEndian<span class="token punctuation">,</span> <span class="token operator">&amp;</span>icmp<span class="token punctuation">)</span> <span class="token comment">//å†™å…¥ç±»å‹</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"icmp:"</span><span class="token punctuation">,</span> icmp<span class="token punctuation">)</span>

	<span class="token keyword">var</span> buffer2 bytes<span class="token punctuation">.</span>Buffer
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å°ç«¯ï¼š"</span><span class="token punctuation">)</span>
	binary<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>buffer2<span class="token punctuation">,</span> binary<span class="token punctuation">.</span>LittleEndian<span class="token punctuation">,</span> <span class="token operator">&amp;</span>icmp<span class="token punctuation">)</span> <span class="token comment">//å†™å…¥ç±»å‹</span>
	<span class="token comment">/*
		binary.BigEndian: å¤§ç«¯åº
		binary.LittleEndian: å°ç«¯åº
	*/</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"icmp:"</span><span class="token punctuation">,</span> icmp<span class="token punctuation">)</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> conn<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å‘é€å¤±è´¥"</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//è®¾ç½®è¶…æ—¶æ—¶é—´</span>
		conn<span class="token punctuation">.</span><span class="token function">SetReadDeadline</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Duration</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Millisecond<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ¥æ”¶å¤±è´¥"</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span>
		<span class="token punctuation">}</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ¥æ”¶æˆåŠŸ"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">getCommandArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//è·å–å‘½ä»¤è¡Œå‚æ•°</span>
	flag<span class="token punctuation">.</span><span class="token function">Int64Var</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>timeout<span class="token punctuation">,</span> <span class="token string">"t"</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">"è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’"</span><span class="token punctuation">)</span>
	flag<span class="token punctuation">.</span><span class="token function">IntVar</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>size<span class="token punctuation">,</span> <span class="token string">"s"</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token string">"è¯·æ±‚æ•°æ®åŒ…å¤§å°ï¼Œå•ä½å­—èŠ‚"</span><span class="token punctuation">)</span>
	flag<span class="token punctuation">.</span><span class="token function">IntVar</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count<span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">"è¯·æ±‚æ¬¡æ•°"</span><span class="token punctuation">)</span>
	flag<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//è§£æå‘½ä»¤è¡Œå‚æ•°</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>$ go run  73-main.go -t 128 -s 36 -c 6 www.baidu.com
æ­£åœ¨ Ping www.baidu.com  å…·æœ‰ 32 å­—èŠ‚çš„æ•°æ®: data: [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
å¤§ç«¯ï¼šicmp: &amp;{8 0 0 1 1}
å°ç«¯ï¼šicmp: &amp;{8 0 0 1 1}
å‘é€å¤±è´¥
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ ¡éªŒï¼š</strong></p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Checksum</span><span class="token punctuation">(</span>data <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">uint16</span> <span class="token punctuation">{</span> <span class="token comment">//å®šä¹‰æ ¡éªŒå’Œå‡½æ•°ï¼šå‚æ•°ä¸ºå­—èŠ‚åˆ‡ç‰‡ï¼Œè¿”å›å€¼ä¸ºuint16</span>
	<span class="token keyword">var</span> sum <span class="token builtin">uint32</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">2</span> <span class="token punctuation">{</span> <span class="token comment">//æ¯æ¬¡å–ä¸¤ä¸ªå­—èŠ‚</span>
		sum <span class="token operator">+=</span> <span class="token function">uint32</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">8</span> <span class="token operator">+</span> <span class="token function">uint32</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//å°†æ¯ä¸¤ä¸ªå­—èŠ‚è½¬æ¢ä¸ºuint16ç±»å‹ï¼Œç„¶åç›¸åŠ </span>
	<span class="token punctuation">}</span>
	sum <span class="token operator">=</span> <span class="token punctuation">(</span>sum <span class="token operator">>></span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>sum <span class="token operator">&amp;</span> <span class="token number">0xffff</span><span class="token punctuation">)</span> <span class="token comment">//é«˜16ä½ä¸ä½16ä½ç›¸åŠ </span>
	sum <span class="token operator">+=</span> sum <span class="token operator">>></span> <span class="token number">16</span>                   <span class="token comment">//å°†è¿›ä½çš„1åŠ åˆ°ä½16ä½</span>
	<span class="token keyword">return</span> <span class="token function">uint16</span><span class="token punctuation">(</span><span class="token operator">^</span>sum<span class="token punctuation">)</span>                <span class="token comment">//å–å</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹" aria-hidden="true">#</a> æ¡ˆä¾‹</h2>
<p>ğŸ’¡ç®€å•çš„ä¸€ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"bytes"</span>
	<span class="token string">"encoding/binary"</span>
	<span class="token string">"flag"</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"log"</span>
	<span class="token string">"math"</span>
	<span class="token string">"net"</span>
	<span class="token string">"os"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> ICMP <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Type        <span class="token builtin">uint8</span>
	Code        <span class="token builtin">uint8</span>
	Checksum    <span class="token builtin">uint16</span>
	Identifier  <span class="token builtin">uint16</span>
	SequenceNum <span class="token builtin">uint16</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token punctuation">(</span>
	icmp    ICMP
	laddr   <span class="token operator">=</span> net<span class="token punctuation">.</span>IPAddr<span class="token punctuation">{</span>IP<span class="token punctuation">:</span> net<span class="token punctuation">.</span><span class="token function">ParseIP</span><span class="token punctuation">(</span><span class="token string">"ip"</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
	num     <span class="token builtin">int</span>
	timeout <span class="token builtin">int64</span>
	size    <span class="token builtin">int</span>
	stop    <span class="token builtin">bool</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">ParseArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	args <span class="token operator">:=</span> os<span class="token punctuation">.</span>Args

	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token punctuation">{</span> <span class="token comment">// æ²¡æœ‰è¾“å…¥ä¸»æœºåœ°å€</span>
		<span class="token function">Usage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	desIp <span class="token operator">:=</span> args<span class="token punctuation">[</span><span class="token function">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>

	conn<span class="token punctuation">,</span> err <span class="token operator">:=</span> net<span class="token punctuation">.</span><span class="token function">DialTimeout</span><span class="token punctuation">(</span><span class="token string">"ip:icmp"</span><span class="token punctuation">,</span> desIp<span class="token punctuation">,</span> time<span class="token punctuation">.</span><span class="token function">Duration</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token operator">*</span>time<span class="token punctuation">.</span>Millisecond<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">defer</span> conn<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">//icmpå¤´éƒ¨å¡«å……</span>
	icmp<span class="token punctuation">.</span>Type <span class="token operator">=</span> <span class="token number">8</span>
	icmp<span class="token punctuation">.</span>Code <span class="token operator">=</span> <span class="token number">0</span>
	icmp<span class="token punctuation">.</span>Checksum <span class="token operator">=</span> <span class="token number">0</span>
	icmp<span class="token punctuation">.</span>Identifier <span class="token operator">=</span> <span class="token number">1</span>
	icmp<span class="token punctuation">.</span>SequenceNum <span class="token operator">=</span> <span class="token number">1</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\næ­£åœ¨ ping %s å…·æœ‰ %d å­—èŠ‚çš„æ•°æ®:\n"</span><span class="token punctuation">,</span> desIp<span class="token punctuation">,</span> size<span class="token punctuation">)</span>

	<span class="token keyword">var</span> buffer bytes<span class="token punctuation">.</span>Buffer
	binary<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>buffer<span class="token punctuation">,</span> binary<span class="token punctuation">.</span>BigEndian<span class="token punctuation">,</span> icmp<span class="token punctuation">)</span> <span class="token comment">// ä»¥å¤§ç«¯æ¨¡å¼å†™å…¥</span>
	data <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> size<span class="token punctuation">)</span>                    <span class="token comment">//</span>
	buffer<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
	data <span class="token operator">=</span> buffer<span class="token punctuation">.</span><span class="token function">Bytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">var</span> SuccessTimes <span class="token builtin">int</span> <span class="token comment">// æˆåŠŸæ¬¡æ•°</span>
	<span class="token keyword">var</span> FailTimes <span class="token builtin">int</span>    <span class="token comment">// å¤±è´¥æ¬¡æ•°</span>
	<span class="token keyword">var</span> minTime <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>MaxInt32<span class="token punctuation">)</span>
	<span class="token keyword">var</span> maxTime <span class="token builtin">int</span>
	<span class="token keyword">var</span> totalTime <span class="token builtin">int</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		icmp<span class="token punctuation">.</span>SequenceNum <span class="token operator">=</span> <span class="token function">uint16</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token comment">// æ£€éªŒå’Œè®¾ä¸º0</span>
		data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">byte</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
		data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">byte</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

		data<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">byte</span><span class="token punctuation">(</span>icmp<span class="token punctuation">.</span>SequenceNum <span class="token operator">>></span> <span class="token number">8</span><span class="token punctuation">)</span>
		data<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">byte</span><span class="token punctuation">(</span>icmp<span class="token punctuation">.</span>SequenceNum<span class="token punctuation">)</span>
		icmp<span class="token punctuation">.</span>Checksum <span class="token operator">=</span> <span class="token function">CheckSum</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
		data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">byte</span><span class="token punctuation">(</span>icmp<span class="token punctuation">.</span>Checksum <span class="token operator">>></span> <span class="token number">8</span><span class="token punctuation">)</span>
		data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">byte</span><span class="token punctuation">(</span>icmp<span class="token punctuation">.</span>Checksum<span class="token punctuation">)</span>

		<span class="token comment">// å¼€å§‹æ—¶é—´</span>
		t1 <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		conn<span class="token punctuation">.</span><span class="token function">SetDeadline</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Duration</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Duration</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Millisecond<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> conn<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">65535</span><span class="token punctuation">)</span>
		n<span class="token punctuation">,</span> err <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"è¯·æ±‚è¶…æ—¶ã€‚"</span><span class="token punctuation">)</span>
			FailTimes<span class="token operator">++</span>
			<span class="token keyword">continue</span>
		<span class="token punctuation">}</span>
		et <span class="token operator">:=</span> <span class="token function">int</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Since</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000000</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> minTime <span class="token operator">></span> et <span class="token punctuation">{</span>
			minTime <span class="token operator">=</span> et
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> maxTime <span class="token operator">&lt;</span> et <span class="token punctuation">{</span>
			maxTime <span class="token operator">=</span> et
		<span class="token punctuation">}</span>
		totalTime <span class="token operator">+=</span> et
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æ¥è‡ª %s çš„å›å¤: å­—èŠ‚=%d æ—¶é—´=%dms TTL=%d\n"</span><span class="token punctuation">,</span> desIp<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token number">28</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> et<span class="token punctuation">,</span> buf<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		SuccessTimes<span class="token operator">++</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\n%s çš„ Ping ç»Ÿè®¡ä¿¡æ¯:\n"</span><span class="token punctuation">,</span> desIp<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"    æ•°æ®åŒ…: å·²å‘é€ = %dï¼Œå·²æ¥æ”¶ = %dï¼Œä¸¢å¤± = %d (%.2f%% ä¸¢å¤±)ï¼Œ\n"</span><span class="token punctuation">,</span> SuccessTimes<span class="token operator">+</span>FailTimes<span class="token punctuation">,</span> SuccessTimes<span class="token punctuation">,</span> FailTimes<span class="token punctuation">,</span> <span class="token function">float64</span><span class="token punctuation">(</span>FailTimes<span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">float64</span><span class="token punctuation">(</span>SuccessTimes<span class="token operator">+</span>FailTimes<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> maxTime <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> minTime <span class="token operator">!=</span> <span class="token function">int</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>MaxInt32<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å¾€è¿”è¡Œç¨‹çš„ä¼°è®¡æ—¶é—´(ä»¥æ¯«ç§’ä¸ºå•ä½):\n"</span><span class="token punctuation">)</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"    æœ€çŸ­ = %dmsï¼Œæœ€é•¿ = %dmsï¼Œå¹³å‡ = %dms\n"</span><span class="token punctuation">,</span> minTime<span class="token punctuation">,</span> maxTime<span class="token punctuation">,</span> totalTime<span class="token operator">/</span>SuccessTimes<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">CheckSum</span><span class="token punctuation">(</span>data <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">uint16</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> sum <span class="token builtin">uint32</span>
	<span class="token keyword">var</span> length <span class="token operator">=</span> <span class="token function">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
	<span class="token keyword">var</span> index <span class="token builtin">int</span>
	<span class="token keyword">for</span> length <span class="token operator">></span> <span class="token number">1</span> <span class="token punctuation">{</span> <span class="token comment">// æº¢å‡ºéƒ¨åˆ†ç›´æ¥å»é™¤</span>
		sum <span class="token operator">+=</span> <span class="token function">uint32</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">8</span> <span class="token operator">+</span> <span class="token function">uint32</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		index <span class="token operator">+=</span> <span class="token number">2</span>
		length <span class="token operator">-=</span> <span class="token number">2</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> length <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">{</span>
		sum <span class="token operator">+=</span> <span class="token function">uint32</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// CheckSumçš„å€¼æ˜¯16ä½ï¼Œè®¡ç®—æ˜¯å°†é«˜16ä½åŠ ä½16ä½ï¼Œå¾—åˆ°çš„ç»“æœè¿›è¡Œé‡å¤ä»¥è¯¥æ–¹å¼è¿›è¡Œè®¡ç®—ï¼Œç›´åˆ°é«˜16ä½ä¸º0</span>
	<span class="token comment">/*
	   sumçš„æœ€å¤§æƒ…å†µæ˜¯ï¼šffffffff
	   ç¬¬ä¸€æ¬¡é«˜16ä½+ä½16ä½ï¼šffff + ffff = 1fffe
	   ç¬¬äºŒæ¬¡é«˜16ä½+ä½16ä½ï¼š0001 + fffe = ffff
	   å³æ¨å‡ºä¸€ä¸ªç»“è®ºï¼Œåªè¦ç¬¬ä¸€æ¬¡é«˜16ä½+ä½16ä½çš„ç»“æœï¼Œå†è¿›è¡Œä¹‹å‰çš„è®¡ç®—ç»“æœç”¨åˆ°é«˜16ä½+ä½16ä½ï¼Œå³å¯å¤„ç†æº¢å‡ºæƒ…å†µ
	*/</span>
	sum <span class="token operator">=</span> <span class="token function">uint32</span><span class="token punctuation">(</span>sum<span class="token operator">>></span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">uint32</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span>
	sum <span class="token operator">=</span> <span class="token function">uint32</span><span class="token punctuation">(</span>sum<span class="token operator">>></span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">uint32</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token function">uint16</span><span class="token punctuation">(</span><span class="token operator">^</span>sum<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ParseArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	flag<span class="token punctuation">.</span><span class="token function">Int64Var</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>timeout<span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">,</span> <span class="token string">"ç­‰å¾…æ¯æ¬¡å›å¤çš„è¶…æ—¶æ—¶é—´(æ¯«ç§’)"</span><span class="token punctuation">)</span>
	flag<span class="token punctuation">.</span><span class="token function">IntVar</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>num<span class="token punctuation">,</span> <span class="token string">"n"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">"è¦å‘é€çš„è¯·æ±‚æ•°"</span><span class="token punctuation">)</span>
	flag<span class="token punctuation">.</span><span class="token function">IntVar</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>size<span class="token punctuation">,</span> <span class="token string">"l"</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token string">"è¦å‘é€ç¼“å†²åŒºå¤§å°"</span><span class="token punctuation">)</span>
	flag<span class="token punctuation">.</span><span class="token function">BoolVar</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stop<span class="token punctuation">,</span> <span class="token string">"t"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">"Ping æŒ‡å®šçš„ä¸»æœºï¼Œç›´åˆ°åœæ­¢"</span><span class="token punctuation">)</span>

	flag<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Usage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	argNum <span class="token operator">:=</span> <span class="token function">len</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">)</span>
	<span class="token keyword">if</span> argNum <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>
			<span class="token string">`
ç”¨æ³•: ping [-t] [-a] [-n count] [-l size] [-f] [-i TTL] [-v TOS]
            [-r count] [-s count] [[-j host-list] | [-k host-list]]
            [-w timeout] [-R] [-S srcaddr] [-c compartment] [-p]
            [-4] [-6] target_name
é€‰é¡¹:
    -t             Ping æŒ‡å®šçš„ä¸»æœºï¼Œç›´åˆ°åœæ­¢ã€‚
                   è‹¥è¦æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯å¹¶ç»§ç»­æ“ä½œï¼Œè¯·é”®å…¥ Ctrl+Breakï¼›
                   è‹¥è¦åœæ­¢ï¼Œè¯·é”®å…¥ Ctrl+Cã€‚
    -a             å°†åœ°å€è§£æä¸ºä¸»æœºåã€‚
    -n count       è¦å‘é€çš„å›æ˜¾è¯·æ±‚æ•°ã€‚
    -l size        å‘é€ç¼“å†²åŒºå¤§å°ã€‚
    -f             åœ¨æ•°æ®åŒ…ä¸­è®¾ç½®â€œä¸åˆ†æ®µâ€æ ‡è®°(ä»…é€‚ç”¨äº IPv4)ã€‚
    -i TTL         ç”Ÿå­˜æ—¶é—´ã€‚
    -v TOS         æœåŠ¡ç±»å‹(ä»…é€‚ç”¨äº IPv4ã€‚è¯¥è®¾ç½®å·²è¢«å¼ƒç”¨ï¼Œ
                   å¯¹ IP æ ‡å¤´ä¸­çš„æœåŠ¡ç±»å‹å­—æ®µæ²¡æœ‰ä»»ä½•
                   å½±å“)ã€‚
    -r count       è®°å½•è®¡æ•°è·ƒç‚¹çš„è·¯ç”±(ä»…é€‚ç”¨äº IPv4)ã€‚
    -s count       è®¡æ•°è·ƒç‚¹çš„æ—¶é—´æˆ³(ä»…é€‚ç”¨äº IPv4)ã€‚
    -j host-list   ä¸ä¸»æœºåˆ—è¡¨ä¸€èµ·ä½¿ç”¨çš„æ¾æ•£æºè·¯ç”±(ä»…é€‚ç”¨äº IPv4)ã€‚
    -k host-list    ä¸ä¸»æœºåˆ—è¡¨ä¸€èµ·ä½¿ç”¨çš„ä¸¥æ ¼æºè·¯ç”±(ä»…é€‚ç”¨äº IPv4)ã€‚
    -w timeout     ç­‰å¾…æ¯æ¬¡å›å¤çš„è¶…æ—¶æ—¶é—´(æ¯«ç§’)ã€‚
    -R             åŒæ ·ä½¿ç”¨è·¯ç”±æ ‡å¤´æµ‹è¯•åå‘è·¯ç”±(ä»…é€‚ç”¨äº IPv6)ã€‚
                   æ ¹æ® RFC 5095ï¼Œå·²å¼ƒç”¨æ­¤è·¯ç”±æ ‡å¤´ã€‚
                   å¦‚æœä½¿ç”¨æ­¤æ ‡å¤´ï¼ŒæŸäº›ç³»ç»Ÿå¯èƒ½ä¸¢å¼ƒ
                   å›æ˜¾è¯·æ±‚ã€‚
    -S srcaddr     è¦ä½¿ç”¨çš„æºåœ°å€ã€‚
    -c compartment è·¯ç”±éš”ç¦»èˆ±æ ‡è¯†ç¬¦ã€‚
    -p             Ping Hyper-V ç½‘ç»œè™šæ‹ŸåŒ–æä¾›ç¨‹åºåœ°å€ã€‚
    -4             å¼ºåˆ¶ä½¿ç”¨ IPv4ã€‚
    -6             å¼ºåˆ¶ä½¿ç”¨ IPv6ã€‚
`</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸš€ ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>$ go run  <span class="token number">76</span>-main.go <span class="token parameter variable">-t</span> <span class="token number">128</span> <span class="token parameter variable">-s</span> <span class="token number">36</span> <span class="token parameter variable">-c</span> <span class="token number">6</span> www.baidu.com     
æ­£åœ¨ <span class="token function">ping</span> www.baidu.com å…·æœ‰ <span class="token number">32</span> å­—èŠ‚çš„æ•°æ®:
æ¥è‡ª www.baidu.com çš„å›å¤: å­—èŠ‚<span class="token operator">=</span><span class="token number">32</span> æ—¶é—´<span class="token operator">=</span>25ms <span class="token assign-left variable">TTL</span><span class="token operator">=</span><span class="token number">55</span>
æ¥è‡ª www.baidu.com çš„å›å¤: å­—èŠ‚<span class="token operator">=</span><span class="token number">32</span> æ—¶é—´<span class="token operator">=</span>26ms <span class="token assign-left variable">TTL</span><span class="token operator">=</span><span class="token number">55</span>
æ¥è‡ª www.baidu.com çš„å›å¤: å­—èŠ‚<span class="token operator">=</span><span class="token number">32</span> æ—¶é—´<span class="token operator">=</span>21ms <span class="token assign-left variable">TTL</span><span class="token operator">=</span><span class="token number">55</span>

www.baidu.com çš„ Ping ç»Ÿè®¡ä¿¡æ¯:
    æ•°æ®åŒ…: å·²å‘é€ <span class="token operator">=</span> <span class="token number">4</span>ï¼Œå·²æ¥æ”¶ <span class="token operator">=</span> <span class="token number">4</span>ï¼Œä¸¢å¤± <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0.00</span>% ä¸¢å¤±<span class="token punctuation">)</span>ï¼Œ
å¾€è¿”è¡Œç¨‹çš„ä¼°è®¡æ—¶é—´<span class="token punctuation">(</span>ä»¥æ¯«ç§’ä¸ºå•ä½<span class="token punctuation">)</span>:
    æœ€çŸ­ <span class="token operator">=</span> 21msï¼Œæœ€é•¿ <span class="token operator">=</span> 29msï¼Œå¹³å‡ <span class="token operator">=</span> 25ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2>
<ul>
<li><RouterLink to="/go-advancend/">å›åˆ°ç›®å½•</RouterLink></li>
<li><RouterLink to="/go-advancend/markdown/18.html">ä¸Šä¸€èŠ‚</RouterLink></li>
<li><RouterLink to="/go-advancend/markdown/20.html">ä¸‹ä¸€èŠ‚</RouterLink></li>
</ul>
<hr>
<ul>
<li><a href="https://github.com/3293172751/Block_Chain/blob/master/Git/git-contributor.md" target="_blank" rel="noopener noreferrer">å‚ä¸è´¡çŒ®â¤ï¸ğŸ’•ğŸ’•<ExternalLinkIcon/></a></li>
</ul>
</div></template>


