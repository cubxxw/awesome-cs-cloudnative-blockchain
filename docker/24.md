# DockerFile解析

[toc]

### 需求

**我们在前面学习镜像的时候，不含有vim/ifconfig等命令，所以我们需要重新按照那些命令**

```
docker commit
```

> 对于简单的可能会是一个很好的选择，但是对于随时变化的镜像来说，特别麻烦



**可不可以一次性搞定？**

> 某种镜像的增强，给我list做个清单，后续我加入任何功能，直接在list单子里面run，相当于多次提交
>
> **一次性添加，一次性成型**



### DockerFile

**dockerfile是用来构建docker镜像的文本文件，是由一条条构建镜像所需要的指令和参数构成的脚本**



### 应用软件的角度

+ dockerfile是软件原材料（写需要的东西）
+ docker镜像是软件的交付品
+ docker容器则可以认为是镜像的运行态，也即依照镜像运行的容器实例

![graphic](https://s2.loli.net/2022/05/13/JqBckovlsptOPSE.jpg)

### dockerfile内容基础

+ 每条指令必须为**大写字母**并且后至少有一个参数
+ 指令按照从上到下，顺序执行
+ \#表示注释
+ 每条指令都会创建一个新的镜像层并对镜像进行提交



### docker执行dockerfile的流程

1. **docker从基础镜像中运行一个容器**
2. **执行一条指令并对容器做出修改**
3. **执行类似docker commit的操作提交一个新的镜像层**
4. **docker再基于刚提交的镜像运行一个新的容器**
5. **执行dockerfile中的下一条指令直到所有指令都执行完毕**



## 构建步骤

### 1. 编写dockerfile文件

### 2. docker build创建镜像

### 3. docker run依照镜像运行容器实例

