+ [author](http://nsddd.top)

# ç¬¬31èŠ‚ kubernetes çš„ç¼–è¯‘å’Œè°ƒè¯•

<div><a href = '30.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '32.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>

> â¤ï¸ğŸ’•ğŸ’•æ–°æ—¶ä»£æ‹¥æŠ±äº‘åŸç”Ÿï¼Œäº‘åŸç”Ÿå…·æœ‰ç¯å¢ƒç»Ÿä¸€ã€æŒ‰éœ€ä»˜è´¹ã€å³å¼€å³ç”¨ã€ç¨³å®šæ€§å¼ºç‰¹ç‚¹ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)

---
[TOC]



## ç¼–è¯‘å¯åŠ¨æœ¬åœ°å•èŠ‚ç‚¹é›†ç¾¤ï¼š

```bash
cd $GOPATH/src/k8s.io/kubernetes
# ç¼–è¯‘å•ä¸ªç»„å»ºï¼šsudo make WHAT="cmd/kube-apiserver"  
# ç¼–è¯‘æ‰€æœ‰ç»„ä»¶ï¼šsudo make all  
# å¯åŠ¨æœ¬åœ°å•èŠ‚ç‚¹é›†ç¾¤ï¼š sudo ./hack/local-up-cluster.sh  
```

::: warning local-up-cluster è„šæœ¬
`./hack/local-up-cluster.sh  ` è„šæœ¬æ˜¯ kubernetes ç¤¾åŒºæ„å»ºçš„æ–¹ä¾¿å¼€å‘è€…çš„è„šæœ¬ã€‚

å®ƒçš„ä½œç”¨æ˜¯ç¼–è¯‘å‡ºæ‰€æœ‰éœ€è¦ç¼–è¯‘çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”åœ¨å½“å‰çš„æœºå™¨ä¸Šè·‘ä¸€ä¸ªå•èŠ‚ç‚¹çš„é›†ç¾¤ã€‚

+ ç¼–è¯‘å•ä¸ªç»„å»ºï¼š`sudo make WHAT="cmd/kube-apiserver"`

+ ç¼–è¯‘æ‰€æœ‰ç»„ä»¶ï¼š`sudo make all`

+ å¯åŠ¨æœ¬åœ°å•èŠ‚ç‚¹é›†ç¾¤ï¼š `sudo ./hack/local-up-cluster.sh`

:::



## ç¬¬ä¸€æ¬¡å¯åŠ¨å•èŠ‚ç‚¹é›†ç¾¤åˆ†æ

è®°å½•ç¬¬ä¸€æ¬¡å¯åŠ¨ä½†é›†ç¾¤çš„çŠ¶æ€åˆ†æï¼š

timeï¼šå¤§æ¦‚ç­‰äº† 20 - 30 åˆ†é’Ÿï¼ˆå¯ä»¥å…ˆå–ä¸¤æ¯å’–å•¡â˜•ï¼‰



### å®‰è£…ç»†èŠ‚

**å¼€å§‹æ—¶é—´ï¼š**

```
root@cubmaster01:~/go/src/k8s.io/kubernetes# date
Thu 01 Dec 2022 06:45:33 AM UTC
```



::: details details å±•å¼€ğŸ”½ 

```bash
root@cubmaster01:~/go/src/k8s.io/kubernetes# sudo ./hack/local-up-cluster.sh
make: Entering directory '/root/go/src/k8s.io/kubernetes'
make[1]: Entering directory '/root/go/src/k8s.io/kubernetes'
+++ [1201 06:45:46] Building go targets for linux/amd64
    k8s.io/kubernetes/hack/make-rules/helpers/go2make (non-static)
+++ [1201 06:45:50] Generating openapi code for KUBE
+++ [1201 06:46:29] Generating openapi code for AGGREGATOR
+++ [1201 06:46:31] Generating openapi code for APIEXTENSIONS
+++ [1201 06:46:34] Generating openapi code for CODEGEN
+++ [1201 06:46:36] Generating openapi code for SAMPLEAPISERVER
make[1]: Leaving directory '/root/go/src/k8s.io/kubernetes'
+++ [1201 06:46:39] Building go targets for linux/amd64
    k8s.io/kubernetes/cmd/kubectl (static)
    k8s.io/kubernetes/cmd/kube-apiserver (static)
    k8s.io/kubernetes/cmd/kube-controller-manager (static)
    k8s.io/kubernetes/cmd/cloud-controller-manager (non-static)
    k8s.io/kubernetes/cmd/kubelet (non-static)
    k8s.io/kubernetes/cmd/kube-proxy (static)
    k8s.io/kubernetes/cmd/kube-scheduler (static)

make: Leaving directory '/root/go/src/k8s.io/kubernetes'
API SERVER secure port is free, proceeding...
Detected host and ready to start services.  Doing some housekeeping first...
Using GO_OUT /root/go/src/k8s.io/kubernetes/_output/local/bin/linux/amd64
Starting services now!
Starting etcd
etcd --advertise-client-urls http://127.0.0.1:2379 --data-dir /tmp/tmp.ZA6EXyPPss --listen-client-urls http://127.0.0.1:2379 --log-level=warn 2> "/tmp/etcd.log" >/dev/null
Waiting for etcd to come up.
+++ [1201 06:58:54] On try 2, etcd: : {"health":"true","reason":""}
{"header":{"cluster_id":"14841639068965178418","member_id":"10276657743932975437","revision":"2","raft_term":"2"}}Generating a RSA private key
...............................................+++++
.....+++++
writing new private key to '/var/run/kubernetes/server-ca.key'
-----
Generating a RSA private key
..............+++++
.......+++++
writing new private key to '/var/run/kubernetes/client-ca.key'
-----
Generating a RSA private key
.................+++++
......................................+++++
writing new private key to '/var/run/kubernetes/request-header-ca.key'
-----
2022/12/01 06:58:54 [INFO] generate received request
2022/12/01 06:58:54 [INFO] received CSR
2022/12/01 06:58:54 [INFO] generating key: rsa-2048
2022/12/01 06:58:54 [INFO] encoded CSR
2022/12/01 06:58:54 [INFO] signed certificate with serial number 189366430448716360665414597641985438063348873322
2022/12/01 06:58:54 [INFO] generate received request
2022/12/01 06:58:54 [INFO] received CSR
2022/12/01 06:58:54 [INFO] generating key: rsa-2048
2022/12/01 06:58:54 [INFO] encoded CSR
2022/12/01 06:58:54 [INFO] signed certificate with serial number 190125437621142035036292880957413679793726301630
2022/12/01 06:58:54 [INFO] generate received request
2022/12/01 06:58:54 [INFO] received CSR
2022/12/01 06:58:54 [INFO] generating key: rsa-2048
2022/12/01 06:58:54 [INFO] encoded CSR
2022/12/01 06:58:54 [INFO] signed certificate with serial number 606668605759100598551725540945577297218224811054
2022/12/01 06:58:54 [INFO] generate received request
2022/12/01 06:58:54 [INFO] received CSR
2022/12/01 06:58:54 [INFO] generating key: rsa-2048
2022/12/01 06:58:54 [INFO] encoded CSR
2022/12/01 06:58:54 [INFO] signed certificate with serial number 635150309675323248743719255558829775631435343029
2022/12/01 06:58:55 [INFO] generate received request
2022/12/01 06:58:55 [INFO] received CSR
2022/12/01 06:58:55 [INFO] generating key: rsa-2048
2022/12/01 06:58:55 [INFO] encoded CSR
2022/12/01 06:58:55 [INFO] signed certificate with serial number 502583423540832867136826540974772275871393658467
2022/12/01 06:58:55 [INFO] generate received request
2022/12/01 06:58:55 [INFO] received CSR
2022/12/01 06:58:55 [INFO] generating key: rsa-2048
2022/12/01 06:58:55 [INFO] encoded CSR
2022/12/01 06:58:55 [INFO] signed certificate with serial number 712098371673773073639809258966059598612266254784
2022/12/01 06:58:55 [INFO] generate received request
2022/12/01 06:58:55 [INFO] received CSR
2022/12/01 06:58:55 [INFO] generating key: rsa-2048
2022/12/01 06:58:55 [INFO] encoded CSR
2022/12/01 06:58:55 [INFO] signed certificate with serial number 254427577071095149538770795047596258056763227355
2022/12/01 06:58:55 [INFO] generate received request
2022/12/01 06:58:55 [INFO] received CSR
2022/12/01 06:58:55 [INFO] generating key: rsa-2048
2022/12/01 06:58:55 [INFO] encoded CSR
2022/12/01 06:58:55 [INFO] signed certificate with serial number 583900352045971716923710917507647330423197506650
Waiting for apiserver to come up
+++ [1201 06:59:03] On try 6, apiserver: : ok
clusterrolebinding.rbac.authorization.k8s.io/kube-apiserver-kubelet-admin created
clusterrolebinding.rbac.authorization.k8s.io/kubelet-csr created
Cluster "local-up-cluster" set.
use 'kubectl --kubeconfig=/var/run/kubernetes/admin-kube-aggregator.kubeconfig' to use the aggregated API server
serviceaccount/coredns created
clusterrole.rbac.authorization.k8s.io/system:coredns created
clusterrolebinding.rbac.authorization.k8s.io/system:coredns created
configmap/coredns created
deployment.apps/coredns created
service/kube-dns created
coredns addon successfully deployed.
Checking CNI Installation at /opt/cni/bin
WARNING : The kubelet is configured to not fail even if swap is enabled; production deployments should disable swap unless testing NodeSwap feature.
2022/12/01 06:59:07 [INFO] generate received request
2022/12/01 06:59:07 [INFO] received CSR
2022/12/01 06:59:07 [INFO] generating key: rsa-2048
2022/12/01 06:59:07 [INFO] encoded CSR
2022/12/01 06:59:07 [INFO] signed certificate with serial number 396503892652732852810951929324414744717912185576
kubelet ( 27489 ) is running.
wait kubelet ready
No resources found
No resources found
No resources found
No resources found
No resources found
No resources found
127.0.0.1   NotReady   <none>   1s    v1.24.0-dirty
2022/12/01 06:59:22 [INFO] generate received request
2022/12/01 06:59:22 [INFO] received CSR
2022/12/01 06:59:22 [INFO] generating key: rsa-2048
2022/12/01 06:59:22 [INFO] encoded CSR
2022/12/01 06:59:22 [INFO] signed certificate with serial number 270579443091576203614576860806582064911709216666
Create default storage class for 
storageclass.storage.k8s.io/standard created
Local Kubernetes cluster is running. Press Ctrl-C to shut it down.

Logs:
  /tmp/kube-apiserver.log
  /tmp/kube-controller-manager.log
  
  /tmp/kube-proxy.log
  /tmp/kube-scheduler.log
  /tmp/kubelet.log

To start using your cluster, you can open up another terminal/tab and run:

  export KUBECONFIG=/var/run/kubernetes/admin.kubeconfig
  cluster/kubectl.sh

Alternatively, you can write to the default kubeconfig:

  export KUBERNETES_PROVIDER=local

  cluster/kubectl.sh config set-cluster local --server=https://localhost:6443 --certificate-authority=/var/run/kubernetes/server-ca.crt
  cluster/kubectl.sh config set-credentials myself --client-key=/var/run/kubernetes/client-admin.key --client-certificate=/var/run/kubernetes/client-admin.crt
  cluster/kubectl.sh config set-context local --cluster=local --user=myself
  cluster/kubectl.sh config use-context local
  cluster/kubectl.sh

```

:::



**ç»“æŸæ—¶é—´ï¼š**

```
root@cubmaster01:~/go/src/k8s.io/kubernetes# date
Thu 01 Dec 2022 07:04:00 AM UTC
```





### åœæ­¢

**stopï¼š`ctrl + c`**



### æ—¥å¿—

**Logsï¼š**

+   `/tmp/kube-apiserver.log`
+   `/tmp/kube-controller-manager.log`
+   `/tmp/kube-proxy.log`
+   `/tmp/kube-scheduler.log`
+   `/tmp/kubelet.log`



### testï¼šç¼–å†™ pod.yaml

**åˆ›å»ºæ–‡ä»¶å¹¶ç¼–å†™å†…å®¹ï¼š**

```
mkdir ~/go-yaml; cd ~/go-yaml
vim pod.yaml
```

**è¾“å…¥ä»¥ä¸‹ï¼š**

```yaml
apiVersion: v1
kind: Pod
metadata: 
  name: busybox
  namespaces: default
spec:
  containers: 
  - name: busybox
    image: busybox
    command: 
  	  - sleep
  	  - "3600"
  	imagePullPolicy: IfNotPresent
  restartPolicy: Always
```

**åˆ›å»ºå®ƒï¼š**

```
cluster/kubectl.sh create -f ~/go-yaml/pod.yaml
```

**è·å–ï¼š**

```
cluster/kubectl.sh get pod
```



**ç»†èŠ‚ï¼š**

```
cluster/kubectl.sh describe pod busybox
cluster/kubectl.sh describe node
```



### å†æ¬¡è¿è¡Œè„šæœ¬

::: warning æ³¨æ„
æˆ‘ä»¬ä¸€èˆ¬å†æ¬¡è¿è¡Œçš„æ—¶å€™ï¼Œç¼–è¯‘æˆ `exe` çš„åŠ¨ä½œä¹Ÿæ˜¯è¢«ç¼“å­˜äº†ï¼Œä¸ä¼šå†ç”Ÿæˆï¼Œæ‰€ä»¥ä¿®æ”¹å debug åˆ é™¤ï¼š

```bash
sudo make clean
```

:::



## å¼€å¯æœ¬åœ°debugåŠŸèƒ½

::: tip éœ€è¦å¼€å¯ debug
ä¸€èˆ¬ç¼–è¯‘å•ä¸ªç»„å»ºï¼Œæˆ–è€…æ˜¯ç¼–è¯‘æ‰€æœ‰çš„ç»„ä»¶ï¼Œéƒ½éœ€è¦å¼€å¯ debug è°ƒè¯•ã€‚

æˆ‘ä»¬ä¸ºäº†æ–¹ä¾¿ï¼Œåœ¨ä»»ä½•æ—¶å€™éƒ½æŠŠ debug èƒ½åŠ› build è¿‡å»ã€‚

:::

```bash
cd $GOPATH/src/k8s.io/kubernetes
# kubernetes goç¼–è¯‘æ–‡ä»¶
sudo vim ./hack/lib/golang.sh
# æŸ¥æ‰¾build_binaries()å‡½æ•° viè¯­æ³•
?build_binaries()
```



### æ‰¾åˆ°ä¸€ä¸‹bebugåˆ¤æ–­ï¼Œæ³¨é‡Šï¼Œä¸€ç›´å¼€å¯debugèƒ½åŠ›

```bash
	gogcflags="all=-trimpath=${trimroot} ${GOGCFLAGS:-}"
    if [[ "${DBG:-}" == 1 ]]; then
        # Debugging - disable optimizations and inlining.
        gogcflags="${gogcflags} -N -l"
    fi

    goldflags="all=$(kube::version::ldflags) ${GOLDFLAGS:-}"
    if [[ "${DBG:-}" != 1 ]]; then
        # Not debugging - disable symbols and DWARF.
        goldflags="${goldflags} -s -w"
    fi
```



**æ³¨é‡Šåˆ¤æ–­ï¼Œå°†debugç›´æ¥æ”¾åœ¨ä¸‹é¢ï¼Œ å†ä¿å­˜å³å¯ï¼š**

```bash
	gogcflags="all=-trimpath=${trimroot} ${GOGCFLAGS:-}"
    # if [[ "${DBG:-}" == 1 ]]; then
    #     # Debugging - disable optimizations and inlining.
    #     gogcflags="${gogcflags} -N -l"
    # fi
	gogcflags="${gogcflags} -N -l"
    goldflags="all=$(kube::version::ldflags) ${GOLDFLAGS:-}"
    # if [[ "${DBG:-}" != 1 ]]; then
    #     # Not debugging - disable symbols and DWARF.
    #     goldflags="${goldflags} -s -w"
    # fi
```



**è§‚å¯Ÿæ­¤æ—¶çš„è¿›ç¨‹ï¼š**

![image-20221201140939729](http://sm.nsddd.top/smimage-20221201140939729.png)





## delve è°ƒè¯•

**æˆ–è®¸ä½ å¯ä»¥é€‰æ‹© GDBï¼Œæˆ–è®¸ä¹Ÿæœ‰ä¸€ä¸ªæ›´é€‚åˆçš„æ–¹å¼ï¼šgo-delve:**

::: tip 

+ [delve](https://docker.nsddd.top/Cloud-Native/14.html)

:::



### ç‰¹æ€§

+ æœ¬åœ°è°ƒè¯• å’Œ è¿œç¨‹è°ƒè¯•
+ ç®€å•æ˜“ç”¨ï¼Œå¼€æº



## å¯åŠ¨æœ¬åœ°é›†ç¾¤ä»è€Œ Debug - ä»¥ API Server ä¸ºä¾‹

::: tip 
æ­£å¥½ä¹‹å‰çš„ API server è¯ä¹¦å‡ºç°äº†é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜çš„åœ°å€ ISSUEï¼š

+ [ã€An error occurred attempting to install kubernetes learningã€‘ #114222](https://github.com/kubernetes/kubernetes/issues/114222)

:::



### ç¼–è¯‘å‚æ•°

+ ä¿®æ”¹ `hack/lib/golang.sh` æ–‡ä»¶ï¼Œä»è€Œä½¿å¾—ç¼–è¯‘å™¨ä¸å»ä¼˜åŒ–æ‰æ”¯æŒçš„ debug ä¿¡æ¯

+ ç¦æ­¢ `-w` ã€`-s` ä¿ç•™æ–‡ä»¶åï¼Œè¡Œå·

+ åŠ ä¸Š `-gcflags= "all=-N -l"` ï¼Œç¦æ­¢ä¼˜åŒ–å’Œå†…è”ã€‚


åœ¨`k8s.io/kubernetes/hack/lib/golang.sh`ä¸­è®¾ç½®äº†`-s -w`é€‰é¡¹æ¥ç¦ç”¨ç¬¦å·è¡¨ä»¥åŠdebugä¿¡æ¯ï¼Œå› æ­¤åœ¨ç¼–è¯‘ `Kubernetes` ç»„ä»¶è¿›è¡Œè¿œç¨‹è°ƒè¯•æ—¶éœ€è¦å»æ‰è¿™ä¸¤ä¸ªé™åˆ¶ï¼Œå¦‚ä¸‹ï¼š

```bash
-    goldflags="${GOLDFLAGS=-s -w} $(kube::version::ldflags)"
+    #goldflags="${GOLDFLAGS=-s -w} $(kube::version::ldflags)"
+    goldflags="${GOLDFLAGS:-} $(kube::version::ldflags)"
```





### å¯åŠ¨æœ¬åœ°é›†ç¾¤

å¦‚æœéœ€è¦ï¼Œç”¨ `make clean` æ¸…é™¤æœªç¼–è¯‘çš„å¯æ‰§è¡Œç¨‹åºã€‚é€šè¿‡ `hack/local-up-cluster.sh` è„šæœ¬å¯åŠ¨æœ¬åœ°é›†ç¾¤ã€‚



### é‡å¯ API Server

**å¦‚æœè¦è°ƒè¯• API Server ï¼Œå…ˆå…³é—­å…¶è¿›ç¨‹ï¼Œå†ä»¥ dlv å¯åŠ¨ã€‚**

âš ï¸ ä¸ºä»€ä¹ˆè¦é‡å¯ï¼Œå› ä¸º go çš„ debug ä¾é  dlvï¼Œæ‰€ä»¥éœ€è¦ç”¨ dlv åŒ…è¢±å†å¯åŠ¨ä¸‹ã€‚



### è¿æ¥ Debug Server

é€šè¿‡ delve è¿æ¥ debug server å¹¶ä¸”å¼€å§‹è°ƒè¯•ã€‚



### æ€æ­» Api Server è°ƒè¯•

**æŸ¥çœ‹ Api Server çš„åº”ç”¨ç¨‹åºå’Œåé¢çš„å‚æ•°ï¼Œè¿™ä¸ªå¾ˆé‡è¦ï¼š**

```bash
root@cubmaster01:~/go/src/k8s.io/kubernetes#  ps -ef | grep kube-apiserver
root       27052    8091 10 06:58 pts/0    00:00:43 /root/go/src/k8s.io/kubernetes/_output/local/bin/linux/amd64/kube-apiserver --authorization-mode=Node,RBAC  --cloud-provider= --cloud-config=   --v=3 --vmodule= --audit-policy-file=/tmp/kube-audit-policy-file --audit-log-path=/tmp/kube-apiserver-audit.log --authorization-webhook-config-file= --authentication-token-webhook-config-file= --cert-dir=/var/run/kubernetes --egress-selector-config-file=/tmp/kube_egress_selector_configuration.yaml --client-ca-file=/var/run/kubernetes/client-ca.crt --kubelet-client-certificate=/var/run/kubernetes/client-kube-apiserver.crt --kubelet-client-key=/var/run/kubernetes/client-kube-apiserver.key --service-account-key-file=/tmp/kube-serviceaccount.key --service-account-lookup=true --service-account-issuer=https://kubernetes.default.svc --service-account-jwks-uri=https://kubernetes.default.svc/openid/v1/jwks --service-account-signing-key-file=/tmp/kube-serviceaccount.key --enable-admission-plugins=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,DefaultTolerationSeconds,Priority,MutatingAdmissionWebhook,ValidatingAdmissionWebhook,ResourceQuota,NodeRestriction --disable-admission-plugins= --admission-control-config-file= --bind-address=0.0.0.0 --secure-port=6443 --tls-cert-file=/var/run/kubernetes/serving-kube-apiserver.crt --tls-private-key-file=/var/run/kubernetes/serving-kube-apiserver.key --storage-backend=etcd3 --storage-media-type=application/vnd.kubernetes.protobuf --etcd-servers=http://127.0.0.1:2379 --service-cluster-ip-range=10.0.0.0/24 --feature-gates=AllAlpha=false --external-hostname=localhost --requestheader-username-headers=X-Remote-User --requestheader-group-headers=X-Remote-Group --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-client-ca-file=/var/run/kubernetes/request-header-ca.crt --requestheader-allowed-names=system:auth-proxy --proxy-client-cert-file=/var/run/kubernetes/client-auth-proxy.crt --proxy-client-key-file=/var/run/kubernetes/client-auth-proxy.key --cors-allowed-origins=/127.0.0.1(:[0-9]+)?$,/localhost(:[0-9]+)?$
root       33017    9251  0 07:05 pts/1    00:00:00 grep --color=auto kube-apiserver
```



**æ€æ­»**

```
kill -9 {api-server PID}
```



**å¯åŠ¨ï¼š**

åˆ›å»ºæ—¥å¿—ä¿¡æ¯ä¿å­˜ç›®å½•ï¼š`mkdir -p /root/kubelog/delve-log `

```
sudo dlv  --headless exec /root/go/src/k8s.io/kubernetes/_output/local/bin/linux/amd64/kube-apiserver --listen=127.0.0.1:2345 --api-version=2 --log --log-output=debugger,gdbwire,lidbout,debuglineerr,rpc,dap,fncall,minidump --log-dest=/root/kubelog/delve-log/log -- --authorization-mode=Node,RBAC  --cloud-provider= --cloud-config=   --v=3 --vmodule= --audit-policy-file=/tmp/kube-audit-policy-file --audit-log-path=/tmp/kube-apiserver-audit.log --authorization-webhook-config-file= --authentication-token-webhook-config-file= --cert-dir=/var/run/kubernetes --egress-selector-config-file=/tmp/kube_egress_selector_configuration.yaml --client-ca-file=/var/run/kubernetes/client-ca.crt --kubelet-client-certificate=/var/run/kubernetes/client-kube-apiserver.crt --kubelet-client-key=/var/run/kubernetes/client-kube-apiserver.key --service-account-key-file=/tmp/kube-serviceaccount.key --service-account-lookup=true --service-account-issuer=https://kubernetes.default.svc --service-account-jwks-uri=https://kubernetes.default.svc/openid/v1/jwks --service-account-signing-key-file=/tmp/kube-serviceaccount.key --enable-admission-plugins=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,DefaultTolerationSeconds,Priority,MutatingAdmissionWebhook,ValidatingAdmissionWebhook,ResourceQuota,NodeRestriction --disable-admission-plugins= --admission-control-config-file= --bind-address=0.0.0.0 --secure-port=6443 --tls-cert-file=/var/run/kubernetes/serving-kube-apiserver.crt --tls-private-key-file=/var/run/kubernetes/serving-kube-apiserver.key --storage-backend=etcd3 --storage-media-type=application/vnd.kubernetes.protobuf --etcd-servers=http://127.0.0.1:2379 --service-cluster-ip-range=10.0.0.0/24 --feature-gates=AllAlpha=false --external-hostname=localhost --requestheader-username-headers=X-Remote-User --requestheader-group-headers=X-Remote-Group --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-client-ca-file=/var/run/kubernetes/request-header-ca.crt --requestheader-allowed-names=system:auth-proxy --proxy-client-cert-file=/var/run/kubernetes/client-auth-proxy.crt --proxy-client-key-file=/var/run/kubernetes/client-auth-proxy.key --cors-allowed-origins="/127.0.0.1(:[0-9]+)?$,/localhost(:[0-9]+)?$"
```



**å¦ä¸€å°æœºå™¨è¿æ¥ï¼š**

```bash
dlv connect localhost:2345
```



## vscode è¿œç¨‹è°ƒè¯•æ–¹æ¡ˆ

```json
{
    // ä½¿ç”¨ IntelliSense äº†è§£ç›¸å…³å±æ€§ã€‚ 
    // æ‚¬åœä»¥æŸ¥çœ‹ç°æœ‰å±æ€§çš„æè¿°ã€‚
    // æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Connect to server",
            "type": "go",
            "request": "attach",
            "mode": "remote",
            // "remotePath": "${workspaceFolder}",
            "port": 2345,
            "host": "192.168.71.130"
        }
    ]
}
```



**åœ¨è¿œç¨‹å¯åŠ¨ API Serverï¼š**

> å’Œä¸Šé¢çš„å¯åŠ¨ä¸€æ ·ï¼š





## END é“¾æ¥

<ul><li><div><a href = '30.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '32.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

